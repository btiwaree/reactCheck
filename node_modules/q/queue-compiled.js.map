{"version":3,"sources":["queue.js"],"names":[],"mappings":";AACA,IAAI,IAAI,QAAQ,KAAR,CAAJ;;AAEJ,OAAO,OAAP,GAAiB,KAAjB;AACA,SAAS,KAAT,GAAiB;AACb,QAAI,OAAO,EAAE,KAAF,EAAP,CADS;AAEb,QAAI,SAAS,EAAE,KAAF,EAAT,CAFS;AAGb,WAAO;AACH,aAAK,UAAU,KAAV,EAAiB;AAClB,gBAAI,OAAO,EAAE,KAAF,EAAP,CADc;AAElB,iBAAK,OAAL,CAAa;AACT,sBAAM,KAAN;AACA,sBAAM,KAAK,OAAL;aAFV,EAFkB;AAMlB,iBAAK,OAAL,GAAe,KAAK,OAAL,CANG;SAAjB;AAQL,aAAK,YAAY;AACb,gBAAI,SAAS,KAAK,OAAL,CAAa,GAAb,CAAiB,MAAjB,CAAT,CADS;AAEb,iBAAK,OAAL,GAAe,KAAK,OAAL,CAAa,GAAb,CAAiB,MAAjB,CAAf,CAFa;AAGb,mBAAO,OAAO,IAAP,CAAY,UAAU,KAAV,EAAiB;AAChC,uBAAO,OAAP,CAAe,KAAf,EADgC;AAEhC,sBAAM,KAAN,CAFgC;aAAjB,CAAnB,CAHa;SAAZ;AAQL,gBAAQ,OAAO,OAAP;AACR,eAAO,UAAU,KAAV,EAAiB;AACpB,oBAAQ,SAAS,IAAI,KAAJ,CAAU,mCAAV,CAAT,CADY;AAEpB,gBAAI,MAAM,EAAC,MAAM,EAAE,MAAF,CAAS,KAAT,CAAN,EAAP,CAFgB;AAGpB,gBAAI,IAAJ,GAAW,GAAX,CAHoB;AAIpB,iBAAK,OAAL,CAAa,GAAb,EAJoB;AAKpB,mBAAO,OAAO,OAAP,CALa;SAAjB;KAlBX,CAHa;CAAjB","file":"queue-compiled.js","sourcesContent":["\nvar Q = require(\"./q\");\n\nmodule.exports = Queue;\nfunction Queue() {\n    var ends = Q.defer();\n    var closed = Q.defer();\n    return {\n        put: function (value) {\n            var next = Q.defer();\n            ends.resolve({\n                head: value,\n                tail: next.promise\n            });\n            ends.resolve = next.resolve;\n        },\n        get: function () {\n            var result = ends.promise.get(\"head\");\n            ends.promise = ends.promise.get(\"tail\");\n            return result.fail(function (error) {\n                closed.resolve(error);\n                throw error;\n            });\n        },\n        closed: closed.promise,\n        close: function (error) {\n            error = error || new Error(\"Can't get value from closed queue\");\n            var end = {head: Q.reject(error)};\n            end.tail = end;\n            ends.resolve(end);\n            return closed.promise;\n        }\n    };\n}\n\n"]}