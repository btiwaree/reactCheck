{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AAEA,OAAO,OAAP,GAAiB,UAAU,GAAV,EAAe,IAAf,EAAqB;AACrC,KAAI,IAAI,YAAJ,EAAkB;AAAE,SAAO,GAAP,CAAF;EAAtB;;AAEA,KAAI,OAAO,IAAI,QAAJ,GAAgB,SAAS,IAAI,QAAJ,CAAa,IAAb,GAAqB,EAA9C,CAH0B;;AAKrC,KAAI,YAAJ,GAAmB,WAAW,SAAS,cAAT,GAA0B;AACvD,MAAI,KAAJ,GADuD;AAEvD,MAAI,IAAI,IAAI,KAAJ,CAAU,oCAAoC,IAApC,CAAd,CAFmD;AAGvD,IAAE,IAAF,GAAS,WAAT,CAHuD;AAIvD,MAAI,IAAJ,CAAS,OAAT,EAAkB,CAAlB,EAJuD;EAA1B,EAK3B,IALgB,CAAnB;;;;AALqC,IAcrC,CAAI,UAAJ,CAAe,IAAf,EAAqB,SAAS,oBAAT,GAAgC;AACpD,MAAI,KAAJ,GADoD;AAEpD,MAAI,IAAI,IAAI,KAAJ,CAAU,gCAAgC,IAAhC,CAAd,CAFgD;AAGpD,IAAE,IAAF,GAAS,iBAAT,CAHoD;AAIpD,MAAI,IAAJ,CAAS,OAAT,EAAkB,CAAlB,EAJoD;EAAhC,CAArB,CAdqC;;AAqBrC,UAAS,KAAT,GAAiB;AAChB,MAAI,IAAI,YAAJ,EAAkB;AACrB,gBAAa,IAAI,YAAJ,CAAb,CADqB;AAErB,OAAI,YAAJ,GAAmB,IAAnB,CAFqB;GAAtB;EADD;;AAOA,QAAO,IACL,EADK,CACF,UADE,EACU,KADV,EAEL,EAFK,CAEF,OAFE,EAEO,KAFP,CAAP,CA5BqC;CAArB","file":"index-compiled.js","sourcesContent":["'use strict';\n\nmodule.exports = function (req, time) {\n\tif (req.timeoutTimer) { return req; }\n\n\tvar host = req._headers ? (' to ' + req._headers.host) : '';\n\n\treq.timeoutTimer = setTimeout(function timeoutHandler() {\n\t\treq.abort();\n\t\tvar e = new Error('Connection timed out on request' + host);\n\t\te.code = 'ETIMEDOUT';\n\t\treq.emit('error', e);\n\t}, time);\n\n\t// Set additional timeout on socket - in case if remote\n\t// server freeze after sending headers\n\treq.setTimeout(time, function socketTimeoutHandler() {\n\t\treq.abort();\n\t\tvar e = new Error('Socket timed out on request' + host);\n\t\te.code = 'ESOCKETTIMEDOUT';\n\t\treq.emit('error', e);\n\t});\n\n\tfunction clear() {\n\t\tif (req.timeoutTimer) {\n\t\t\tclearTimeout(req.timeoutTimer);\n\t\t\treq.timeoutTimer = null;\n\t\t}\n\t}\n\n\treturn req\n\t\t.on('response', clear)\n\t\t.on('error', clear);\n};\n"]}