{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var licenseIDs = require('spdx-license-ids');\n\nfunction valid(string) {\n  return licenseIDs.indexOf(string) > -1;\n}\n\n// Common transpositions of license identifier acronyms\nvar transpositions = [\n  ['APGL', 'AGPL'],\n  ['Gpl', 'GPL'],\n  ['GLP', 'GPL'],\n  ['APL', 'Apache'],\n  ['ISD', 'ISC'],\n  ['GLP', 'GPL'],\n  ['IST', 'ISC'],\n  ['Claude', 'Clause'],\n  [' or later', '+'],\n  [' International', ''],\n  ['GNU', 'GPL'],\n  ['GUN', 'GPL'],\n  ['+', ''],\n  ['GNU GPL', 'GPL'],\n  ['GNU/GPL', 'GPL'],\n  ['GNU GLP', 'GPL'],\n  ['GNU General Public License', 'GPL'],\n  ['Gnu public license', 'GPL'],\n  ['GNU Public License', 'GPL'],\n  ['GNU GENERAL PUBLIC LICENSE', 'GPL'],\n  ['MTI', 'MIT'],\n  ['Mozilla Public License', 'MPL'],\n  ['WTH', 'WTF'],\n  ['-License', '']\n];\n\nvar TRANSPOSED = 0;\nvar CORRECT = 1;\n\n// Simple corrections to nearly valid identifiers.\nvar transforms = [\n  // e.g. 'mit'\n  function(argument) {\n    return argument.toUpperCase();\n  },\n  // e.g. 'MIT '\n  function(argument) {\n    return argument.trim();\n  },\n  // e.g. 'M.I.T.'\n  function(argument) {\n    return argument.replace(/\\./g, '');\n  },\n  // e.g. 'Apache- 2.0'\n  function(argument) {\n    return argument.replace(/\\s+/g, '');\n  },\n  // e.g. 'CC BY 4.0''\n  function(argument) {\n    return argument.replace(/\\s+/g, '-');\n  },\n  // e.g. 'LGPLv2.1'\n  function(argument) {\n    return argument.replace('v', '-');\n  },\n  // e.g. 'Apache 2.0'\n  function(argument) {\n    return argument.replace(/,?\\s*(\\d)/, '-$1');\n  },\n  // e.g. 'GPL 2'\n  function(argument) {\n    return argument.replace(/,?\\s*(\\d)/, '-$1.0');\n  },\n  // e.g. 'Apache Version 2.0'\n  function(argument) {\n    return argument.replace(/,?\\s*(V\\.|v\\.|V|v|Version|version)\\s*(\\d)/, '-$2');\n  },\n  // e.g. 'Apache Version 2'\n  function(argument) {\n    return argument.replace(/,?\\s*(V\\.|v\\.|V|v|Version|version)\\s*(\\d)/, '-$2.0');\n  },\n  // e.g. 'ZLIB'\n  function(argument) {\n    return argument[0].toUpperCase() + argument.slice(1);\n  },\n  // e.g. 'MPL/2.0'\n  function(argument) {\n    return argument.replace('/', '-');\n  },\n  // e.g. 'Apache 2'\n  function(argument) {\n    return argument\n      .replace(/\\s*V\\s*(\\d)/, '-$1')\n      .replace(/(\\d)$/, '$1.0');\n  },\n  // e.g. 'GPL-2.0-'\n  function(argument) {\n    return argument.slice(0, argument.length - 1);\n  },\n  // e.g. 'GPL2'\n  function(argument) {\n    return argument.replace(/(\\d)$/, '-$1.0');\n  },\n  // e.g. 'BSD 3'\n  function(argument) {\n    return argument.replace(/(-| )?(\\d)$/, '-$2-Clause');\n  },\n  // e.g. 'BSD clause 3'\n  function(argument) {\n    return argument.replace(/(-| )clause(-| )(\\d)/, '-$3-Clause');\n  },\n  // e.g. 'BY-NC-4.0'\n  function(argument) {\n    return 'CC-' + argument;\n  },\n  // e.g. 'BY-NC'\n  function(argument) {\n    return 'CC-' + argument + '-4.0';\n  },\n  // e.g. 'Attribution-NonCommercial'\n  function(argument) {\n    return argument\n      .replace('Attribution', 'BY')\n      .replace('NonCommercial', 'NC')\n      .replace('NoDerivatives', 'ND')\n      .replace(/ (\\d)/, '-$1')\n      .replace(/ ?International/, '');\n  },\n  // e.g. 'Attribution-NonCommercial'\n  function(argument) {\n    return 'CC-' +\n      argument\n      .replace('Attribution', 'BY')\n      .replace('NonCommercial', 'NC')\n      .replace('NoDerivatives', 'ND')\n      .replace(/ (\\d)/, '-$1')\n      .replace(/ ?International/, '') +\n      '-4.0';\n  }\n];\n\n// If all else fails, guess that strings containing certain substrings\n// meant to identify certain licenses.\nvar lastResorts = [\n  ['UNLI', 'Unlicense'],\n  ['WTF', 'WTFPL'],\n  ['2 CLAUSE', 'BSD-2-Clause'],\n  ['2-CLAUSE', 'BSD-2-Clause'],\n  ['3 CLAUSE', 'BSD-3-Clause'],\n  ['3-CLAUSE', 'BSD-3-Clause'],\n  ['AFFERO', 'AGPL-3.0'],\n  ['AGPL', 'AGPL-3.0'],\n  ['APACHE', 'Apache-2.0'],\n  ['ARTISTIC', 'Artistic-2.0'],\n  ['Affero', 'AGPL-3.0'],\n  ['BEER', 'Beerware'],\n  ['BOOST', 'BSL-1.0'],\n  ['BSD', 'BSD-2-Clause'],\n  ['ECLIPSE', 'EPL-1.0'],\n  ['FUCK', 'WTFPL'],\n  ['GNU', 'GPL-3.0'],\n  ['LGPL', 'LGPL-3.0'],\n  ['GPL', 'GPL-3.0'],\n  ['MIT', 'MIT'],\n  ['MPL', 'MPL-2.0'],\n  ['X11', 'X11'],\n  ['ZLIB', 'Zlib']\n];\n\nvar SUBSTRING = 0;\nvar IDENTIFIER = 1;\n\nvar validTransformation = function(identifier) {\n  for (var i = 0; i < transforms.length; i++) {\n    var transformed = transforms[i](identifier);\n    if (transformed !== identifier && valid(transformed)) {\n      return transformed;\n    }\n  }\n  return null;\n};\n\nvar validLastResort = function(identifier) {\n  var upperCased = identifier.toUpperCase();\n  for (var i = 0; i < lastResorts.length; i++) {\n    var lastResort = lastResorts[i];\n    if (upperCased.indexOf(lastResort[SUBSTRING]) > -1) {\n      return lastResort[IDENTIFIER];\n    }\n  }\n  return null;\n};\n\nvar anyCorrection = function(identifier, check) {\n  for (var i = 0; i < transpositions.length; i++) {\n    var transposition = transpositions[i];\n    var transposed = transposition[TRANSPOSED];\n    if (identifier.indexOf(transposed) > -1) {\n      var corrected = identifier.replace(\n        transposed,\n        transposition[CORRECT]\n      );\n      var checked = check(corrected);\n      if (checked !== null) {\n        return checked;\n      }\n    }\n  }\n  return null;\n};\n\nmodule.exports = function(identifier) {\n  identifier = identifier.replace(/\\+$/, '');\n  if (valid(identifier)) {\n    return identifier;\n  }\n  var transformed = validTransformation(identifier);\n  if (transformed !== null) {\n    return transformed;\n  }\n  transformed = anyCorrection(identifier, function(argument) {\n    if (valid(argument)) {\n      return argument;\n    }\n    return validTransformation(argument);\n  });\n  if (transformed !== null) {\n    return transformed;\n  }\n  transformed = validLastResort(identifier);\n  if (transformed !== null) {\n    return transformed;\n  }\n  transformed = anyCorrection(identifier, validLastResort);\n  if (transformed !== null) {\n    return transformed;\n  }\n  return null;\n};\n"]}