{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["'use strict';\n\nvar PENDING = 'pending';\nvar SETTLED = 'settled';\nvar FULFILLED = 'fulfilled';\nvar REJECTED = 'rejected';\nvar NOOP = function () {};\nvar isNode = typeof global !== 'undefined' && typeof global.process !== 'undefined' && typeof global.process.emit === 'function';\n\nvar asyncSetTimer = typeof setImmediate === 'undefined' ? setTimeout : setImmediate;\nvar asyncQueue = [];\nvar asyncTimer;\n\nfunction asyncFlush() {\n\t// run promise callbacks\n\tfor (var i = 0; i < asyncQueue.length; i++) {\n\t\tasyncQueue[i][0](asyncQueue[i][1]);\n\t}\n\n\t// reset async asyncQueue\n\tasyncQueue = [];\n\tasyncTimer = false;\n}\n\nfunction asyncCall(callback, arg) {\n\tasyncQueue.push([callback, arg]);\n\n\tif (!asyncTimer) {\n\t\tasyncTimer = true;\n\t\tasyncSetTimer(asyncFlush, 0);\n\t}\n}\n\nfunction invokeResolver(resolver, promise) {\n\tfunction resolvePromise(value) {\n\t\tresolve(promise, value);\n\t}\n\n\tfunction rejectPromise(reason) {\n\t\treject(promise, reason);\n\t}\n\n\ttry {\n\t\tresolver(resolvePromise, rejectPromise);\n\t} catch (e) {\n\t\trejectPromise(e);\n\t}\n}\n\nfunction invokeCallback(subscriber) {\n\tvar owner = subscriber.owner;\n\tvar settled = owner._state;\n\tvar value = owner._data;\n\tvar callback = subscriber[settled];\n\tvar promise = subscriber.then;\n\n\tif (typeof callback === 'function') {\n\t\tsettled = FULFILLED;\n\t\ttry {\n\t\t\tvalue = callback(value);\n\t\t} catch (e) {\n\t\t\treject(promise, e);\n\t\t}\n\t}\n\n\tif (!handleThenable(promise, value)) {\n\t\tif (settled === FULFILLED) {\n\t\t\tresolve(promise, value);\n\t\t}\n\n\t\tif (settled === REJECTED) {\n\t\t\treject(promise, value);\n\t\t}\n\t}\n}\n\nfunction handleThenable(promise, value) {\n\tvar resolved;\n\n\ttry {\n\t\tif (promise === value) {\n\t\t\tthrow new TypeError('A promises callback cannot return that same promise.');\n\t\t}\n\n\t\tif (value && (typeof value === 'function' || typeof value === 'object')) {\n\t\t\t// then should be retrieved only once\n\t\t\tvar then = value.then;\n\n\t\t\tif (typeof then === 'function') {\n\t\t\t\tthen.call(value, function (val) {\n\t\t\t\t\tif (!resolved) {\n\t\t\t\t\t\tresolved = true;\n\n\t\t\t\t\t\tif (value === val) {\n\t\t\t\t\t\t\tfulfill(promise, val);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(promise, val);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, function (reason) {\n\t\t\t\t\tif (!resolved) {\n\t\t\t\t\t\tresolved = true;\n\n\t\t\t\t\t\treject(promise, reason);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tif (!resolved) {\n\t\t\treject(promise, e);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nfunction resolve(promise, value) {\n\tif (promise === value || !handleThenable(promise, value)) {\n\t\tfulfill(promise, value);\n\t}\n}\n\nfunction fulfill(promise, value) {\n\tif (promise._state === PENDING) {\n\t\tpromise._state = SETTLED;\n\t\tpromise._data = value;\n\n\t\tasyncCall(publishFulfillment, promise);\n\t}\n}\n\nfunction reject(promise, reason) {\n\tif (promise._state === PENDING) {\n\t\tpromise._state = SETTLED;\n\t\tpromise._data = reason;\n\n\t\tasyncCall(publishRejection, promise);\n\t}\n}\n\nfunction publish(promise) {\n\tpromise._then = promise._then.forEach(invokeCallback);\n}\n\nfunction publishFulfillment(promise) {\n\tpromise._state = FULFILLED;\n\tpublish(promise);\n}\n\nfunction publishRejection(promise) {\n\tpromise._state = REJECTED;\n\tpublish(promise);\n\tif (!promise._handled && isNode) {\n\t\tglobal.process.emit('unhandledRejection', promise._data, promise);\n\t}\n}\n\nfunction notifyRejectionHandled(promise) {\n\tglobal.process.emit('rejectionHandled', promise);\n}\n\n/**\n * @class\n */\nfunction Promise(resolver) {\n\tif (typeof resolver !== 'function') {\n\t\tthrow new TypeError('Promise resolver ' + resolver + ' is not a function');\n\t}\n\n\tif (this instanceof Promise === false) {\n\t\tthrow new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n\t}\n\n\tthis._then = [];\n\n\tinvokeResolver(resolver, this);\n}\n\nPromise.prototype = {\n\tconstructor: Promise,\n\n\t_state: PENDING,\n\t_then: null,\n\t_data: undefined,\n\t_handled: false,\n\n\tthen: function (onFulfillment, onRejection) {\n\t\tvar subscriber = {\n\t\t\towner: this,\n\t\t\tthen: new this.constructor(NOOP),\n\t\t\tfulfilled: onFulfillment,\n\t\t\trejected: onRejection\n\t\t};\n\n\t\tif ((onRejection || onFulfillment) && !this._handled) {\n\t\t\tthis._handled = true;\n\t\t\tif (this._state === REJECTED && isNode) {\n\t\t\t\tasyncCall(notifyRejectionHandled, this);\n\t\t\t}\n\t\t}\n\n\t\tif (this._state === FULFILLED || this._state === REJECTED) {\n\t\t\t// already resolved, call callback async\n\t\t\tasyncCall(invokeCallback, subscriber);\n\t\t} else {\n\t\t\t// subscribe\n\t\t\tthis._then.push(subscriber);\n\t\t}\n\n\t\treturn subscriber.then;\n\t},\n\n\tcatch: function (onRejection) {\n\t\treturn this.then(null, onRejection);\n\t}\n};\n\nPromise.all = function (promises) {\n\tif (!Array.isArray(promises)) {\n\t\tthrow new TypeError('You must pass an array to Promise.all().');\n\t}\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar results = [];\n\t\tvar remaining = 0;\n\n\t\tfunction resolver(index) {\n\t\t\tremaining++;\n\t\t\treturn function (value) {\n\t\t\t\tresults[index] = value;\n\t\t\t\tif (!--remaining) {\n\t\t\t\t\tresolve(results);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tfor (var i = 0, promise; i < promises.length; i++) {\n\t\t\tpromise = promises[i];\n\n\t\t\tif (promise && typeof promise.then === 'function') {\n\t\t\t\tpromise.then(resolver(i), reject);\n\t\t\t} else {\n\t\t\t\tresults[i] = promise;\n\t\t\t}\n\t\t}\n\n\t\tif (!remaining) {\n\t\t\tresolve(results);\n\t\t}\n\t});\n};\n\nPromise.race = function (promises) {\n\tif (!Array.isArray(promises)) {\n\t\tthrow new TypeError('You must pass an array to Promise.race().');\n\t}\n\n\treturn new Promise(function (resolve, reject) {\n\t\tfor (var i = 0, promise; i < promises.length; i++) {\n\t\t\tpromise = promises[i];\n\n\t\t\tif (promise && typeof promise.then === 'function') {\n\t\t\t\tpromise.then(resolve, reject);\n\t\t\t} else {\n\t\t\t\tresolve(promise);\n\t\t\t}\n\t\t}\n\t});\n};\n\nPromise.resolve = function (value) {\n\tif (value && typeof value === 'object' && value.constructor === Promise) {\n\t\treturn value;\n\t}\n\n\treturn new Promise(function (resolve) {\n\t\tresolve(value);\n\t});\n};\n\nPromise.reject = function (reason) {\n\treturn new Promise(function (resolve, reject) {\n\t\treject(reason);\n\t});\n};\n\nmodule.exports = Promise;\n"]}