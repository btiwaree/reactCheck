{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["'use strict';\nvar bufferToVinyl = require('buffer-to-vinyl');\nvar concatStream = require('concat-stream');\nvar streamCombiner = require('stream-combiner2');\nvar vinylFs = require('vinyl-fs');\nvar vinylAssign = require('vinyl-assign');\n\n/**\n * Initialize Decompress\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Decompress(opts) {\n\tif (!(this instanceof Decompress)) {\n\t\treturn new Decompress(opts);\n\t}\n\n\tthis.opts = opts || {};\n\tthis.streams = [];\n}\n\n/**\n * Get or set the source files\n *\n * @param {Array|Buffer|String} file\n * @api public\n */\n\nDecompress.prototype.src = function (file) {\n\tif (!arguments.length) {\n\t\treturn this._src;\n\t}\n\n\tthis._src = file;\n\treturn this;\n};\n\n/**\n * Get or set the destination folder\n *\n * @param {String} dir\n * @api public\n */\n\nDecompress.prototype.dest = function (dir) {\n\tif (!arguments.length) {\n\t\treturn this._dest;\n\t}\n\n\tthis._dest = dir;\n\treturn this;\n};\n\n/**\n * Add a plugin to the middleware stack\n *\n * @param {Function} plugin\n * @api public\n */\n\nDecompress.prototype.use = function (plugin) {\n\tthis.streams.push(plugin);\n\treturn this;\n};\n\n/**\n * Decompress archive\n *\n * @param {Function} cb\n * @api public\n */\n\nDecompress.prototype.run = function (cb) {\n\tcb = cb || function () {};\n\n\tvar stream = this.createStream();\n\n\tstream.on('error', cb);\n\tstream.pipe(concatStream(cb.bind(null, null)));\n};\n\n/**\n * Create stream\n *\n * @api private\n */\n\nDecompress.prototype.createStream = function () {\n\tthis.streams.unshift(vinylAssign({extract: true}));\n\tthis.streams.unshift(this.getFiles());\n\n\tif (this.streams.length === 2) {\n\t\tthis.use(Decompress.tar(this.opts));\n\t\tthis.use(Decompress.tarbz2(this.opts));\n\t\tthis.use(Decompress.targz(this.opts));\n\t\tthis.use(Decompress.zip(this.opts));\n\t}\n\n\tif (this.dest()) {\n\t\tthis.streams.push(vinylFs.dest(this.dest()));\n\t}\n\n\treturn streamCombiner.obj(this.streams);\n};\n\n/**\n * Get files\n *\n * @api private\n */\n\nDecompress.prototype.getFiles = function () {\n\tif (Buffer.isBuffer(this.src())) {\n\t\treturn bufferToVinyl.stream(this.src());\n\t}\n\n\treturn vinylFs.src(this.src());\n};\n\n/**\n * Module exports\n */\n\nmodule.exports = Decompress;\nmodule.exports.tar = require('decompress-tar');\nmodule.exports.tarbz2 = require('decompress-tarbz2');\nmodule.exports.targz = require('decompress-targz');\nmodule.exports.zip = require('decompress-unzip');\n"]}