{"version":3,"sources":["ModalManager.js"],"names":[],"mappings":"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","file":"ModalManager-compiled.js","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _domHelpersStyle = require('dom-helpers/style');\n\nvar _domHelpersStyle2 = _interopRequireDefault(_domHelpersStyle);\n\nvar _domHelpersClass = require('dom-helpers/class');\n\nvar _domHelpersClass2 = _interopRequireDefault(_domHelpersClass);\n\nvar _domHelpersUtilScrollbarSize = require('dom-helpers/util/scrollbarSize');\n\nvar _domHelpersUtilScrollbarSize2 = _interopRequireDefault(_domHelpersUtilScrollbarSize);\n\nvar _utilsIsOverflowing = require('./utils/isOverflowing');\n\nvar _utilsIsOverflowing2 = _interopRequireDefault(_utilsIsOverflowing);\n\nvar _utilsManageAriaHidden = require('./utils/manageAriaHidden');\n\nfunction findIndexOf(arr, cb) {\n  var idx = -1;\n  arr.some(function (d, i) {\n    if (cb(d, i)) {\n      idx = i;\n      return true;\n    }\n  });\n  return idx;\n}\n\nfunction findContainer(data, modal) {\n  return findIndexOf(data, function (d) {\n    return d.modals.indexOf(modal) !== -1;\n  });\n}\n\n/**\n * Proper state managment for containers and the modals in those containers.\n *\n * @internal Used by the Modal to ensure proper styling of containers.\n */\n\nvar ModalManager = (function () {\n  function ModalManager() {\n    var hideSiblingNodes = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n    _classCallCheck(this, ModalManager);\n\n    this.hideSiblingNodes = hideSiblingNodes;\n    this.modals = [];\n    this.containers = [];\n    this.data = [];\n  }\n\n  ModalManager.prototype.add = function add(modal, container, className) {\n    var modalIdx = this.modals.indexOf(modal);\n    var containerIdx = this.containers.indexOf(container);\n\n    if (modalIdx !== -1) {\n      return modalIdx;\n    }\n\n    modalIdx = this.modals.length;\n    this.modals.push(modal);\n\n    if (this.hideSiblingNodes) {\n      _utilsManageAriaHidden.hideSiblings(container, modal.mountNode);\n    }\n\n    if (containerIdx !== -1) {\n      this.data[containerIdx].modals.push(modal);\n      return modalIdx;\n    }\n\n    var data = {\n      modals: [modal],\n      //right now only the first modal of a container will have its classes applied\n      classes: className ? className.split(/\\s+/) : [],\n      //we are only interested in the actual `style` here becasue we will override it\n      style: {\n        overflow: container.style.overflow,\n        paddingRight: container.style.paddingRight\n      }\n    };\n\n    var style = { overflow: 'hidden' };\n\n    data.overflowing = _utilsIsOverflowing2['default'](container);\n\n    if (data.overflowing) {\n      // use computed style, here to get the real padding\n      // to add our scrollbar width\n      style.paddingRight = parseInt(_domHelpersStyle2['default'](container, 'paddingRight') || 0, 10) + _domHelpersUtilScrollbarSize2['default']() + 'px';\n    }\n\n    _domHelpersStyle2['default'](container, style);\n\n    data.classes.forEach(_domHelpersClass2['default'].addClass.bind(null, container));\n\n    this.containers.push(container);\n    this.data.push(data);\n\n    return modalIdx;\n  };\n\n  ModalManager.prototype.remove = function remove(modal) {\n    var modalIdx = this.modals.indexOf(modal);\n\n    if (modalIdx === -1) {\n      return;\n    }\n\n    var containerIdx = findContainer(this.data, modal);\n    var data = this.data[containerIdx];\n    var container = this.containers[containerIdx];\n\n    data.modals.splice(data.modals.indexOf(modal), 1);\n\n    this.modals.splice(modalIdx, 1);\n\n    // if that was the last modal in a container,\n    // clean up the container stylinhg.\n    if (data.modals.length === 0) {\n      Object.keys(data.style).forEach(function (key) {\n        return container.style[key] = data.style[key];\n      });\n\n      data.classes.forEach(_domHelpersClass2['default'].removeClass.bind(null, container));\n\n      if (this.hideSiblingNodes) {\n        _utilsManageAriaHidden.showSiblings(container, modal.mountNode);\n      }\n      this.containers.splice(containerIdx, 1);\n      this.data.splice(containerIdx, 1);\n    } else if (this.hideSiblingNodes) {\n      //otherwise make sure the next top modal is visible to a SR\n      _utilsManageAriaHidden.ariaHidden(false, data.modals[data.modals.length - 1].mountNode);\n    }\n  };\n\n  ModalManager.prototype.isTopModal = function isTopModal(modal) {\n    return !!this.modals.length && this.modals[this.modals.length - 1] === modal;\n  };\n\n  return ModalManager;\n})();\n\nexports['default'] = ModalManager;\nmodule.exports = exports['default'];"]}