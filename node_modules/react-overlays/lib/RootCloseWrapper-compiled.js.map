{"version":3,"sources":["RootCloseWrapper.js"],"names":[],"mappings":"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","file":"RootCloseWrapper-compiled.js","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _utilsAddEventListener = require('./utils/addEventListener');\n\nvar _utilsAddEventListener2 = _interopRequireDefault(_utilsAddEventListener);\n\nvar _utilsCreateChainedFunction = require('./utils/createChainedFunction');\n\nvar _utilsCreateChainedFunction2 = _interopRequireDefault(_utilsCreateChainedFunction);\n\nvar _utilsOwnerDocument = require('./utils/ownerDocument');\n\nvar _utilsOwnerDocument2 = _interopRequireDefault(_utilsOwnerDocument);\n\n// TODO: Consider using an ES6 symbol here, once we use babel-runtime.\nvar CLICK_WAS_INSIDE = '__click_was_inside';\n\nvar counter = 0;\n\nfunction isLeftClickEvent(event) {\n  return event.button === 0;\n}\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\nfunction getSuppressRootClose() {\n  var id = CLICK_WAS_INSIDE + '_' + counter++;\n  return {\n    id: id,\n    suppressRootClose: function suppressRootClose(event) {\n      // Tag the native event to prevent the root close logic on document click.\n      // This seems safer than using event.nativeEvent.stopImmediatePropagation(),\n      // which is only supported in IE >= 9.\n      event.nativeEvent[id] = true;\n    }\n  };\n}\n\nvar RootCloseWrapper = (function (_React$Component) {\n  _inherits(RootCloseWrapper, _React$Component);\n\n  function RootCloseWrapper(props) {\n    _classCallCheck(this, RootCloseWrapper);\n\n    _React$Component.call(this, props);\n\n    this.handleDocumentClick = this.handleDocumentClick.bind(this);\n    this.handleDocumentKeyUp = this.handleDocumentKeyUp.bind(this);\n\n    var _getSuppressRootClose = getSuppressRootClose();\n\n    var id = _getSuppressRootClose.id;\n    var suppressRootClose = _getSuppressRootClose.suppressRootClose;\n\n    this._suppressRootId = id;\n\n    this._suppressRootCloseHandler = suppressRootClose;\n  }\n\n  RootCloseWrapper.prototype.bindRootCloseHandlers = function bindRootCloseHandlers() {\n    var doc = _utilsOwnerDocument2['default'](this);\n\n    this._onDocumentClickListener = _utilsAddEventListener2['default'](doc, 'click', this.handleDocumentClick);\n\n    this._onDocumentKeyupListener = _utilsAddEventListener2['default'](doc, 'keyup', this.handleDocumentKeyUp);\n  };\n\n  RootCloseWrapper.prototype.handleDocumentClick = function handleDocumentClick(e) {\n    // This is now the native event.\n    if (e[this._suppressRootId]) {\n      return;\n    }\n\n    if (isModifiedEvent(e) || !isLeftClickEvent(e)) {\n      return;\n    }\n\n    this.props.onRootClose();\n  };\n\n  RootCloseWrapper.prototype.handleDocumentKeyUp = function handleDocumentKeyUp(e) {\n    if (e.keyCode === 27) {\n      this.props.onRootClose();\n    }\n  };\n\n  RootCloseWrapper.prototype.unbindRootCloseHandlers = function unbindRootCloseHandlers() {\n    if (this._onDocumentClickListener) {\n      this._onDocumentClickListener.remove();\n    }\n\n    if (this._onDocumentKeyupListener) {\n      this._onDocumentKeyupListener.remove();\n    }\n  };\n\n  RootCloseWrapper.prototype.componentDidMount = function componentDidMount() {\n    this.bindRootCloseHandlers();\n  };\n\n  RootCloseWrapper.prototype.render = function render() {\n    var _props = this.props;\n    var noWrap = _props.noWrap;\n    var children = _props.children;\n\n    var child = _react2['default'].Children.only(children);\n\n    if (noWrap) {\n      return _react2['default'].cloneElement(child, {\n        onClick: _utilsCreateChainedFunction2['default'](this._suppressRootCloseHandler, child.props.onClick)\n      });\n    }\n\n    // Wrap the child in a new element, so the child won't have to handle\n    // potentially combining multiple onClick listeners.\n    return _react2['default'].createElement(\n      'div',\n      { onClick: this._suppressRootCloseHandler },\n      child\n    );\n  };\n\n  RootCloseWrapper.prototype.getWrappedDOMNode = function getWrappedDOMNode() {\n    // We can't use a ref to identify the wrapped child, since we might be\n    // stealing the ref from the owner, but we know exactly the DOM structure\n    // that will be rendered, so we can just do this to get the child's DOM\n    // node for doing size calculations in OverlayMixin.\n    var node = _reactDom2['default'].findDOMNode(this);\n    return this.props.noWrap ? node : node.firstChild;\n  };\n\n  RootCloseWrapper.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.unbindRootCloseHandlers();\n  };\n\n  return RootCloseWrapper;\n})(_react2['default'].Component);\n\nexports['default'] = RootCloseWrapper;\n\nRootCloseWrapper.displayName = 'RootCloseWrapper';\n\nRootCloseWrapper.propTypes = {\n  onRootClose: _react2['default'].PropTypes.func.isRequired,\n\n  /**\n   * Passes the suppress click handler directly to the child component instead\n   * of placing it on a wrapping div. Only use when you can be sure the child\n   * properly handle the click event.\n   */\n  noWrap: _react2['default'].PropTypes.bool\n};\nmodule.exports = exports['default'];"]}