{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var path = require('path');\nvar clone = require('clone');\nvar cloneStats = require('clone-stats');\nvar cloneBuffer = require('./lib/cloneBuffer');\nvar isBuffer = require('./lib/isBuffer');\nvar isStream = require('./lib/isStream');\nvar isNull = require('./lib/isNull');\nvar inspectStream = require('./lib/inspectStream');\nvar Stream = require('stream');\nvar replaceExt = require('replace-ext');\n\nfunction File(file) {\n  if (!file) {\n    file = {};\n  }\n\n  // Record path change\n  var history = file.path ? [file.path] : file.history;\n  this.history = history || [];\n\n  this.cwd = file.cwd || process.cwd();\n  this.base = file.base || this.cwd;\n\n  // Stat = files stats object\n  this.stat = file.stat || null;\n\n  // Contents = stream, buffer, or null if not read\n  this.contents = file.contents || null;\n\n  this._isVinyl = true;\n}\n\nFile.prototype.isBuffer = function() {\n  return isBuffer(this.contents);\n};\n\nFile.prototype.isStream = function() {\n  return isStream(this.contents);\n};\n\nFile.prototype.isNull = function() {\n  return isNull(this.contents);\n};\n\n// TODO: Should this be moved to vinyl-fs?\nFile.prototype.isDirectory = function() {\n  return this.isNull() && this.stat && this.stat.isDirectory();\n};\n\nFile.prototype.clone = function(opt) {\n  if (typeof opt === 'boolean') {\n    opt = {\n      deep: opt,\n      contents: true,\n    };\n  } else if (!opt) {\n    opt = {\n      deep: true,\n      contents: true,\n    };\n  } else {\n    opt.deep = opt.deep === true;\n    opt.contents = opt.contents !== false;\n  }\n\n  // Clone our file contents\n  var contents;\n  if (this.isStream()) {\n    contents = this.contents.pipe(new Stream.PassThrough());\n    this.contents = this.contents.pipe(new Stream.PassThrough());\n  } else if (this.isBuffer()) {\n    contents = opt.contents ? cloneBuffer(this.contents) : this.contents;\n  }\n\n  var file = new File({\n    cwd: this.cwd,\n    base: this.base,\n    stat: (this.stat ? cloneStats(this.stat) : null),\n    history: this.history.slice(),\n    contents: contents,\n  });\n\n  // Clone our custom properties\n  Object.keys(this).forEach(function(key) {\n    // Ignore built-in fields\n    if (key === '_contents' || key === 'stat' ||\n      key === 'history' || key === 'path' ||\n      key === 'base' || key === 'cwd') {\n      return;\n    }\n    file[key] = opt.deep ? clone(this[key], true) : this[key];\n  }, this);\n  return file;\n};\n\nFile.prototype.pipe = function(stream, opt) {\n  if (!opt) {\n    opt = {};\n  }\n  if (typeof opt.end === 'undefined') {\n    opt.end = true;\n  }\n\n  if (this.isStream()) {\n    return this.contents.pipe(stream, opt);\n  }\n  if (this.isBuffer()) {\n    if (opt.end) {\n      stream.end(this.contents);\n    } else {\n      stream.write(this.contents);\n    }\n    return stream;\n  }\n\n  // Check if isNull\n  if (opt.end) {\n    stream.end();\n  }\n  return stream;\n};\n\nFile.prototype.inspect = function() {\n  var inspect = [];\n\n  // Use relative path if possible\n  var filePath = (this.base && this.path) ? this.relative : this.path;\n\n  if (filePath) {\n    inspect.push('\"' + filePath + '\"');\n  }\n\n  if (this.isBuffer()) {\n    inspect.push(this.contents.inspect());\n  }\n\n  if (this.isStream()) {\n    inspect.push(inspectStream(this.contents));\n  }\n\n  return '<File ' + inspect.join(' ') + '>';\n};\n\nFile.isVinyl = function(file) {\n  return (file && file._isVinyl === true) || false;\n};\n\n// Virtual attributes\n// Or stuff with extra logic\nObject.defineProperty(File.prototype, 'contents', {\n  get: function() {\n    return this._contents;\n  },\n  set: function(val) {\n    if (!isBuffer(val) && !isStream(val) && !isNull(val)) {\n      throw new Error('File.contents can only be a Buffer, a Stream, or null.');\n    }\n    this._contents = val;\n  },\n});\n\n// TODO: Should this be moved to vinyl-fs?\nObject.defineProperty(File.prototype, 'relative', {\n  get: function() {\n    if (!this.base) {\n      throw new Error('No base specified! Can not get relative.');\n    }\n    if (!this.path) {\n      throw new Error('No path specified! Can not get relative.');\n    }\n    return path.relative(this.base, this.path);\n  },\n  set: function() {\n    throw new Error('File.relative is generated from the base and path attributes. Do not modify it.');\n  },\n});\n\nObject.defineProperty(File.prototype, 'dirname', {\n  get: function() {\n    if (!this.path) {\n      throw new Error('No path specified! Can not get dirname.');\n    }\n    return path.dirname(this.path);\n  },\n  set: function(dirname) {\n    if (!this.path) {\n      throw new Error('No path specified! Can not set dirname.');\n    }\n    this.path = path.join(dirname, path.basename(this.path));\n  },\n});\n\nObject.defineProperty(File.prototype, 'basename', {\n  get: function() {\n    if (!this.path) {\n      throw new Error('No path specified! Can not get basename.');\n    }\n    return path.basename(this.path);\n  },\n  set: function(basename) {\n    if (!this.path) {\n      throw new Error('No path specified! Can not set basename.');\n    }\n    this.path = path.join(path.dirname(this.path), basename);\n  },\n});\n\n// Property for getting/setting stem of the filename.\nObject.defineProperty(File.prototype, 'stem', {\n  get: function() {\n    if (!this.path) {\n      throw new Error('No path specified! Can not get stem.');\n    }\n    return path.basename(this.path, this.extname);\n  },\n  set: function(stem) {\n    if (!this.path) {\n      throw new Error('No PassThrough specified! Can not set stem.');\n    }\n    this.path = path.join(path.dirname(this.path), stem + this.extname);\n  },\n});\n\nObject.defineProperty(File.prototype, 'extname', {\n  get: function() {\n    if (!this.path) {\n      throw new Error('No path specified! Can not get extname.');\n    }\n    return path.extname(this.path);\n  },\n  set: function(extname) {\n    if (!this.path) {\n      throw new Error('No path specified! Can not set extname.');\n    }\n    this.path = replaceExt(this.path, extname);\n  },\n});\n\nObject.defineProperty(File.prototype, 'path', {\n  get: function() {\n    return this.history[this.history.length - 1];\n  },\n  set: function(path) {\n    if (typeof path !== 'string') {\n      throw new Error('path should be string');\n    }\n\n    // Record history only when path changed\n    if (path && path !== this.path) {\n      this.history.push(path);\n    }\n  },\n});\n\nmodule.exports = File;\n"]}