{"version":3,"sources":["compare.js"],"names":[],"mappings":"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","file":"compare-compiled.js","sourcesContent":["var zero = '0'.charCodeAt(0);\r\nvar plus = '+'.charCodeAt(0);\r\nvar minus = '-'.charCodeAt(0);\r\n\r\nfunction isWhitespace(code) {\r\n\treturn code <= 32;\r\n}\r\n\r\nfunction isDigit(code) {\r\n\treturn 48 <= code && code <= 57;\r\n}\r\n\r\nfunction isSign(code) {\r\n\treturn code === minus || code === plus;\r\n}\r\n\r\nmodule.exports = function (opts, a, b) {\r\n\tvar checkSign = opts.sign;\r\n\tvar ia = 0;\r\n\tvar ib = 0;\r\n\tvar ma = a.length;\r\n\tvar mb = b.length;\r\n\tvar ca, cb; // character code\r\n\tvar za, zb; // leading zero count\r\n\tvar na, nb; // number length\r\n\tvar sa, sb; // number sign\r\n\tvar ta, tb; // temporary\r\n\tvar bias;\r\n\r\n\twhile (ia < ma && ib < mb) {\r\n\t\tca = a.charCodeAt(ia);\r\n\t\tcb = b.charCodeAt(ib);\r\n\t\tza = zb = 0;\r\n\t\tna = nb = 0;\r\n\t\tsa = sb = true;\r\n\t\tbias = 0;\r\n\r\n\t\t// skip over leading spaces\r\n\t\twhile (isWhitespace(ca)) {\r\n\t\t\tia += 1;\r\n\t\t\tca = a.charCodeAt(ia);\r\n\t\t}\r\n\t\twhile (isWhitespace(cb)) {\r\n\t\t\tib += 1;\r\n\t\t\tcb = b.charCodeAt(ib);\r\n\t\t}\r\n\r\n\t\t// skip and save sign\r\n\t\tif (checkSign) {\r\n\t\t\tta = a.charCodeAt(ia + 1);\r\n\t\t\tif (isSign(ca) && isDigit(ta)) {\r\n\t\t\t\tif (ca === minus) {\r\n\t\t\t\t\tsa = false;\r\n\t\t\t\t}\r\n\t\t\t\tia += 1;\r\n\t\t\t\tca = ta;\r\n\t\t\t}\r\n\t\t\ttb = b.charCodeAt(ib + 1);\r\n\t\t\tif (isSign(cb) && isDigit(tb)) {\r\n\t\t\t\tif (cb === minus) {\r\n\t\t\t\t\tsb = false;\r\n\t\t\t\t}\r\n\t\t\t\tib += 1;\r\n\t\t\t\tcb = tb;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// compare digits with other symbols\r\n\t\tif (isDigit(ca) && !isDigit(cb)) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tif (!isDigit(ca) && isDigit(cb)) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t// compare negative and positive\r\n\t\tif (!sa && sb) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tif (sa && !sb) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t// count leading zeros\r\n\t\twhile (ca === zero) {\r\n\t\t\tza += 1;\r\n\t\t\tia += 1;\r\n\t\t\tca = a.charCodeAt(ia);\r\n\t\t}\r\n\t\twhile (cb === zero) {\r\n\t\t\tzb += 1;\r\n\t\t\tib += 1;\r\n\t\t\tcb = b.charCodeAt(ib);\r\n\t\t}\r\n\r\n\t\t// count numbers\r\n\t\twhile (isDigit(ca) || isDigit(cb)) {\r\n\t\t\tif (isDigit(ca) && isDigit(cb) && bias === 0) {\r\n\t\t\t\tif (sa) {\r\n\t\t\t\t\tif (ca < cb) {\r\n\t\t\t\t\t\tbias = -1;\r\n\t\t\t\t\t} else if (ca > cb) {\r\n\t\t\t\t\t\tbias = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (ca > cb) {\r\n\t\t\t\t\t\tbias = -1;\r\n\t\t\t\t\t} else if (ca < cb) {\r\n\t\t\t\t\t\tbias = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (isDigit(ca)) {\r\n\t\t\t\tia += 1;\r\n\t\t\t\tna += 1;\r\n\t\t\t\tca = a.charCodeAt(ia);\r\n\t\t\t}\r\n\t\t\tif (isDigit(cb)) {\r\n\t\t\t\tib += 1;\r\n\t\t\t\tnb += 1;\r\n\t\t\t\tcb = b.charCodeAt(ib);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// compare number length\r\n\t\tif (sa) {\r\n\t\t\tif (na < nb) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tif (na > nb) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (na > nb) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tif (na < nb) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// compare numbers\r\n\t\tif (bias) {\r\n\t\t\treturn bias;\r\n\t\t}\r\n\r\n\t\t// compare leading zeros\r\n\t\tif (sa) {\r\n\t\t\tif (za > zb) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tif (za < zb) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (za < zb) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tif (za > zb) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// compare ascii codes\r\n\t\tif (ca < cb) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tif (ca > cb) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\tia += 1;\r\n\t\tib += 1;\r\n\t}\r\n\r\n\t// compare length\r\n\tif (ma < mb) {\r\n\t\treturn -1;\r\n\t}\r\n\tif (ma > mb) {\r\n\t\treturn 1;\r\n\t}\r\n};\r\n"]}