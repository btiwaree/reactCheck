{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,QAAQ,QAAQ,QAAR,CAAR;AACJ,IAAI,OAAO,QAAQ,MAAR,CAAP;AACJ,IAAI,UAAU,QAAQ,UAAR,CAAV;;AAEJ,OAAO,OAAP,GAAiB,UAAU,IAAV,EAAgB;AAChC,QAAO,QAAQ,EAAR,CADyB;;AAGhC,QAAO,QAAQ,IAAR,CAAa,EAAC,YAAY,IAAZ,EAAd,EAAiC,UAAU,IAAV,EAAgB,GAAhB,EAAqB,EAArB,EAAyB;AAChE,MAAI,KAAK,MAAL,EAAJ,EAAmB;AAClB,MAAG,IAAH,EAAS,IAAT,EADkB;AAElB,UAFkB;GAAnB;;AAKA,MAAI,KAAK,QAAL,EAAJ,EAAqB;AACpB,MAAG,IAAI,KAAJ,CAAU,4BAAV,CAAH,EADoB;AAEpB,UAFoB;GAArB;;AAKA,MAAI,CAAC,MAAM,KAAK,QAAL,CAAP,EAAuB;AAC1B,MAAG,IAAH,EAAS,IAAT,EAD0B;AAE1B,UAF0B;GAA3B;;AAKA,MAAI;AACH,OAAI,OAAO,IAAI,IAAJ,CAAS,IAAT,CAAP,CADD;;AAGH,QAAK,QAAL,CAAc,KAAK,QAAL,CAAc,QAAd,CAAuB,MAAvB,CAAd,EAA8C,UAAU,GAAV,EAAe;AAC5D,QAAI,CAAC,IAAI,IAAJ,IAAY,CAAC,IAAI,IAAJ,CAAS,MAAT,EAAiB;AAClC,YADkC;KAAnC;;AAIA,QAAI,IAAJ,GAAW,IAAI,IAAJ,CAAS,OAAT,CAAiB,YAAjB,EAA+B,OAA/B,CAAX,CAL4D;AAM5D,QAAI,IAAJ,GAAW,IAAI,MAAJ,CAAW,IAAI,IAAJ,CAAtB,CAN4D;;AAQ5D,SAAK,QAAL,GAAgB,IAAI,IAAJ,CAR4C;IAAf,CAA9C,CAHG;GAAJ,CAaE,OAAO,GAAP,EAAY;AACb,OAAI,QAAJ,GAAe,KAAK,IAAL,CADF;AAEb,MAAG,GAAH,EAFa;AAGb,UAHa;GAAZ;;AAMF,KAAG,IAAH,EAAS,IAAT,EAnCgE;EAAzB,CAAxC,CAHgC;CAAhB","file":"index-compiled.js","sourcesContent":["'use strict';\n\nvar isSvg = require('is-svg');\nvar SVGO = require('svgo');\nvar through = require('through2');\n\nmodule.exports = function (opts) {\n\topts = opts || {};\n\n\treturn through.ctor({objectMode: true}, function (file, enc, cb) {\n\t\tif (file.isNull()) {\n\t\t\tcb(null, file);\n\t\t\treturn;\n\t\t}\n\n\t\tif (file.isStream()) {\n\t\t\tcb(new Error('Streaming is not supported'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (!isSvg(file.contents)) {\n\t\t\tcb(null, file);\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tvar svgo = new SVGO(opts);\n\n\t\t\tsvgo.optimize(file.contents.toString('utf8'), function (res) {\n\t\t\t\tif (!res.data || !res.data.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tres.data = res.data.replace(/&(?!amp;)/g, '&amp;');\n\t\t\t\tres.data = new Buffer(res.data);\n\n\t\t\t\tfile.contents = res.data;\n\t\t\t});\n\t\t} catch (err) {\n\t\t\terr.fileName = file.path;\n\t\t\tcb(err);\n\t\t\treturn;\n\t\t}\n\n\t\tcb(null, file);\n\t});\n};\n"]}