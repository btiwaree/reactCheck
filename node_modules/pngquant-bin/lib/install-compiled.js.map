{"version":3,"sources":["install.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,WAAW,QAAQ,WAAR,CAAX;AACJ,IAAI,UAAU,QAAQ,SAAR,CAAV;AACJ,IAAI,MAAM,QAAQ,IAAR,CAAN;;AAEJ,IAAI,GAAJ,CAAQ,CAAC,WAAD,CAAR,EAAuB,UAAU,GAAV,EAAe;AACrC,KAAI,GAAJ,EAAS;AACR,UAAQ,IAAR,CAAa,IAAI,OAAJ,CAAb,CADQ;AAER,UAAQ,IAAR,CAAa,gCAAb,EAFQ;AAGR,UAAQ,IAAR,CAAa,uBAAb,EAHQ;;AAKR,MAAI,SAAS,QAAQ,QAAR,KAAqB,QAArB,GAAgC,QAAhC,GAA2C,YAA3C,CALL;AAMR,MAAI,UAAU,IAAI,QAAJ,GACZ,GADY,CACR,yDADQ,EAEZ,GAFY,CAER,2BAA2B,IAAI,IAAJ,EAA3B,GAAwC,GAAxC,CAFQ,CAGZ,GAHY,CAGR,6BAA6B,IAAI,IAAJ,EAA7B,GAA0C,GAA1C,CAHF,CANI;;AAWR,SAAO,QAAQ,GAAR,CAAY,UAAU,GAAV,EAAe;AACjC,OAAI,GAAJ,EAAS;AACR,QAAI,OAAJ,GAAc,CACb,0CADa,EAEb,SAAS,eAAT,CAFa,CAGZ,IAHY,CAGP,GAHO,CAAd,CADQ;;AAMR,YAAQ,KAAR,CAAc,IAAI,KAAJ,CAAd,CANQ;AAOR,WAPQ;IAAT;;AAUA,WAAQ,OAAR,CAAgB,6BAAhB,EAXiC;GAAf,CAAnB,CAXQ;EAAT;;AA0BA,SAAQ,OAAR,CAAgB,6CAAhB,EA3BqC;CAAf,CAAvB","file":"install-compiled.js","sourcesContent":["'use strict';\n\nvar BinBuild = require('bin-build');\nvar logalot = require('logalot');\nvar bin = require('./');\n\nbin.run(['--version'], function (err) {\n\tif (err) {\n\t\tlogalot.warn(err.message);\n\t\tlogalot.warn('pngquant pre-build test failed');\n\t\tlogalot.info('compiling from source');\n\n\t\tvar libpng = process.platform === 'darwin' ? 'libpng' : 'libpng-dev';\n\t\tvar builder = new BinBuild()\n\t\t\t.src('https://github.com/pornel/pngquant/archive/2.5.2.tar.gz')\n\t\t\t.cmd('./configure --prefix=\"' + bin.dest() + '\"')\n\t\t\t.cmd('make install BINPREFIX=\"' + bin.dest() + '\"');\n\n\t\treturn builder.run(function (err) {\n\t\t\tif (err) {\n\t\t\t\terr.message = [\n\t\t\t\t\t'pngquant failed to build, make sure that',\n\t\t\t\t\tlibpng + ' is installed'\n\t\t\t\t].join(' ');\n\n\t\t\t\tlogalot.error(err.stack);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlogalot.success('pngquant built successfully');\n\t\t});\n\t}\n\n\tlogalot.success('pngquant pre-build test passed successfully');\n});\n"]}