{"version":3,"sources":["install.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,WAAW,QAAQ,WAAR,CAAX;AACJ,IAAI,MAAM,QAAQ,SAAR,CAAN;AACJ,IAAI,MAAM,QAAQ,IAAR,CAAN;;AAEJ,IAAI,GAAJ,CAAQ,CAAC,WAAD,CAAR,EAAuB,UAAU,GAAV,EAAe;AACrC,KAAI,GAAJ,EAAS;AACR,MAAI,IAAJ,CAAS,IAAI,OAAJ,CAAT,CADQ;AAER,MAAI,IAAJ,CAAS,gCAAT,EAFQ;AAGR,MAAI,IAAJ,CAAS,uBAAT,EAHQ;;AAKR,MAAI,MAAM,CACT,iDADS,EAET,eAAe,IAAI,IAAJ,EAAf,GAA4B,cAA5B,GAA6C,IAAI,IAAJ,EAA7C,GAA0D,GAA1D,CAFS,CAGR,IAHQ,CAGH,GAHG,CAAN,CALI;;AAUR,MAAI,UAAU,IAAI,QAAJ,GACZ,GADY,CACR,yDADQ,EAEZ,GAFY,CAER,iBAFQ,EAGZ,GAHY,CAGR,GAHQ,EAIZ,GAJY,CAIR,cAJQ,CAAV,CAVI;;AAgBR,SAAO,QAAQ,GAAR,CAAY,UAAU,GAAV,EAAe;AACjC,OAAI,GAAJ,EAAS;AACR,QAAI,KAAJ,CAAU,IAAI,KAAJ,CAAV,CADQ;AAER,WAFQ;IAAT;;AAKA,OAAI,OAAJ,CAAY,6BAAZ,EANiC;GAAf,CAAnB,CAhBQ;EAAT;;AA0BA,KAAI,OAAJ,CAAY,6CAAZ,EA3BqC;CAAf,CAAvB","file":"install-compiled.js","sourcesContent":["'use strict';\n\nvar BinBuild = require('bin-build');\nvar log = require('logalot');\nvar bin = require('./');\n\nbin.run(['--version'], function (err) {\n\tif (err) {\n\t\tlog.warn(err.message);\n\t\tlog.warn('gifsicle pre-build test failed');\n\t\tlog.info('compiling from source');\n\n\t\tvar cfg = [\n\t\t\t'./configure --disable-gifview --disable-gifdiff',\n\t\t\t'--prefix=\"' + bin.dest() + '\" --bindir=\"' + bin.dest() + '\"'\n\t\t].join(' ');\n\n\t\tvar builder = new BinBuild()\n\t\t\t.src('https://github.com/kohler/gifsicle/archive/v1.88.tar.gz')\n\t\t\t.cmd('autoreconf -ivf')\n\t\t\t.cmd(cfg)\n\t\t\t.cmd('make install');\n\n\t\treturn builder.run(function (err) {\n\t\t\tif (err) {\n\t\t\t\tlog.error(err.stack);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlog.success('gifsicle built successfully');\n\t\t});\n\t}\n\n\tlog.success('gifsicle pre-build test passed successfully');\n});\n"]}