{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,YAAY,UAAU,EAAV,EAAc,CAAd,EAAiB,IAAjB,EAAuB;AACtC,QAAO,YAAY;AAClB,MAAI,OAAO,IAAP,CADc;AAElB,MAAI,OAAO,IAAI,KAAJ,CAAU,UAAU,MAAV,CAAjB,CAFc;;AAIlB,OAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,UAAU,MAAV,EAAkB,GAAtC,EAA2C;AAC1C,QAAK,CAAL,IAAU,UAAU,CAAV,CAAV,CAD0C;GAA3C;;AAIA,SAAO,IAAI,CAAJ,CAAM,UAAU,OAAV,EAAmB,MAAnB,EAA2B;AACvC,QAAK,IAAL,CAAU,UAAU,GAAV,EAAe,MAAf,EAAuB;AAChC,QAAI,GAAJ,EAAS;AACR,YAAO,GAAP,EADQ;KAAT,MAEO,IAAI,KAAK,SAAL,EAAgB;AAC1B,SAAI,UAAU,IAAI,KAAJ,CAAU,UAAU,MAAV,GAAmB,CAAnB,CAApB,CADsB;;AAG1B,UAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,UAAU,MAAV,EAAkB,GAAtC,EAA2C;AAC1C,cAAQ,IAAI,CAAJ,CAAR,GAAiB,UAAU,CAAV,CAAjB,CAD0C;MAA3C;;AAIA,aAAQ,OAAR,EAP0B;KAApB,MAQA;AACN,aAAQ,MAAR,EADM;KARA;IAHE,CAAV,CADuC;;AAiBvC,MAAG,KAAH,CAAS,IAAT,EAAe,IAAf,EAjBuC;GAA3B,CAAb,CARkB;EAAZ,CAD+B;CAAvB;;AA+BhB,IAAI,OAAO,OAAO,OAAP,GAAiB,UAAU,GAAV,EAAe,CAAf,EAAkB,IAAlB,EAAwB;AACnD,KAAI,OAAO,CAAP,KAAa,UAAb,EAAyB;AAC5B,SAAO,CAAP,CAD4B;AAE5B,MAAI,OAAJ,CAF4B;EAA7B;;AAKA,QAAO,QAAQ,EAAR,CAN4C;AAOnD,MAAK,OAAL,GAAe,KAAK,OAAL,IAAgB,CAAC,SAAD,CAAhB,CAPoC;;AASnD,KAAI,SAAS,UAAU,GAAV,EAAe;AAC3B,MAAI,QAAQ,UAAU,OAAV,EAAmB;AAC9B,UAAO,OAAO,OAAP,KAAmB,QAAnB,GAA8B,QAAQ,OAAR,GAAkB,QAAQ,IAAR,CAAa,GAAb,CAAhD,CADuB;GAAnB,CADe;;AAK3B,SAAO,KAAK,OAAL,GAAe,KAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,CAAf,GAA0C,CAAC,KAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,CAAD,CALtB;EAAf,CATsC;;AAiBnD,KAAI,MAAM,OAAO,GAAP,KAAe,UAAf,GAA4B,YAAY;AACjD,MAAI,KAAK,WAAL,EAAkB;AACrB,UAAO,IAAI,KAAJ,CAAU,IAAV,EAAgB,SAAhB,CAAP,CADqB;GAAtB;;AAIA,SAAO,UAAU,GAAV,EAAe,CAAf,EAAkB,IAAlB,EAAwB,KAAxB,CAA8B,IAA9B,EAAoC,SAApC,CAAP,CALiD;EAAZ,GAMlC,EANM,CAjByC;;AAyBnD,QAAO,OAAO,IAAP,CAAY,GAAZ,EAAiB,MAAjB,CAAwB,UAAU,GAAV,EAAe,GAAf,EAAoB;AAClD,MAAI,IAAI,IAAI,GAAJ,CAAJ,CAD8C;;AAGlD,MAAI,GAAJ,IAAW,OAAO,CAAP,KAAa,UAAb,IAA2B,OAAO,GAAP,CAA3B,GAAyC,UAAU,CAAV,EAAa,CAAb,EAAgB,IAAhB,CAAzC,GAAiE,CAAjE,CAHuC;;AAKlD,SAAO,GAAP,CALkD;EAApB,EAM5B,GANI,CAAP,CAzBmD;CAAxB;;AAkC5B,KAAK,GAAL,GAAW,IAAX","file":"index-compiled.js","sourcesContent":["'use strict';\n\nvar processFn = function (fn, P, opts) {\n\treturn function () {\n\t\tvar that = this;\n\t\tvar args = new Array(arguments.length);\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\n\t\treturn new P(function (resolve, reject) {\n\t\t\targs.push(function (err, result) {\n\t\t\t\tif (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t} else if (opts.multiArgs) {\n\t\t\t\t\tvar results = new Array(arguments.length - 1);\n\n\t\t\t\t\tfor (var i = 1; i < arguments.length; i++) {\n\t\t\t\t\t\tresults[i - 1] = arguments[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(results);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfn.apply(that, args);\n\t\t});\n\t};\n};\n\nvar pify = module.exports = function (obj, P, opts) {\n\tif (typeof P !== 'function') {\n\t\topts = P;\n\t\tP = Promise;\n\t}\n\n\topts = opts || {};\n\topts.exclude = opts.exclude || [/.+Sync$/];\n\n\tvar filter = function (key) {\n\t\tvar match = function (pattern) {\n\t\t\treturn typeof pattern === 'string' ? key === pattern : pattern.test(key);\n\t\t};\n\n\t\treturn opts.include ? opts.include.some(match) : !opts.exclude.some(match);\n\t};\n\n\tvar ret = typeof obj === 'function' ? function () {\n\t\tif (opts.excludeMain) {\n\t\t\treturn obj.apply(this, arguments);\n\t\t}\n\n\t\treturn processFn(obj, P, opts).apply(this, arguments);\n\t} : {};\n\n\treturn Object.keys(obj).reduce(function (ret, key) {\n\t\tvar x = obj[key];\n\n\t\tret[key] = typeof x === 'function' && filter(key) ? processFn(x, P, opts) : x;\n\n\t\treturn ret;\n\t}, ret);\n};\n\npify.all = pify;\n"]}