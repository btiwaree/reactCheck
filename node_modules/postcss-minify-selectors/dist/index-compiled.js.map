{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["'use strict';\n\nvar _postcss = require('postcss');\n\nvar _postcss2 = _interopRequireDefault(_postcss);\n\nvar _alphanumSort = require('alphanum-sort');\n\nvar _alphanumSort2 = _interopRequireDefault(_alphanumSort);\n\nvar _unquote = require('./lib/unquote');\n\nvar _unquote2 = _interopRequireDefault(_unquote);\n\nvar _canUnquote = require('./lib/canUnquote');\n\nvar _canUnquote2 = _interopRequireDefault(_canUnquote);\n\nvar _postcssSelectorParser = require('postcss-selector-parser');\n\nvar _postcssSelectorParser2 = _interopRequireDefault(_postcssSelectorParser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar pseudoElements = ['::before', '::after', '::first-letter', '::first-line'];\n\nfunction getParsed(selectors, callback) {\n    return (0, _postcssSelectorParser2.default)(callback).process(selectors).result;\n}\n\nfunction optimise(rule) {\n    var selector = rule.raws.selector && rule.raws.selector.raw || rule.selector;\n    // If the selector ends with a ':' it is likely a part of a custom mixin,\n    // so just pass through.\n    if (selector[selector.length - 1] === ':') {\n        return;\n    }\n    rule.selector = getParsed(selector, function (selectors) {\n        selectors.nodes = (0, _alphanumSort2.default)(selectors.nodes, { insensitive: true });\n        var uniqueSelectors = [];\n        selectors.eachInside(function (sel) {\n            var toString = String(sel);\n            // Trim whitespace around the value\n            sel.spaces.before = sel.spaces.after = '';\n            if (sel.type === 'attribute') {\n                if (sel.value) {\n                    // Join selectors that are split over new lines\n                    sel.value = sel.value.replace(/\\\\\\n/g, '').trim();\n                    if ((0, _canUnquote2.default)(sel.value)) {\n                        sel.value = (0, _unquote2.default)(sel.value);\n                    }\n                    sel.operator = sel.operator.trim();\n                }\n                if (sel.raw) {\n                    sel.raw.insensitive = '';\n                }\n                sel.attribute = sel.attribute.trim();\n            }\n            if (sel.type === 'combinator') {\n                var value = sel.value.trim();\n                sel.value = value.length ? value : ' ';\n            }\n            if (sel.type === 'pseudo') {\n                (function () {\n                    var uniques = [];\n                    sel.eachInside(function (child) {\n                        if (child.type === 'selector') {\n                            var childStr = String(child);\n                            if (! ~uniques.indexOf(childStr)) {\n                                uniques.push(childStr);\n                            } else {\n                                child.removeSelf();\n                            }\n                        }\n                    });\n                    if (~pseudoElements.indexOf(sel.value)) {\n                        sel.value = sel.value.slice(1);\n                    }\n                })();\n            }\n            if (sel.type === 'selector' && sel.parent.type !== 'pseudo') {\n                if (! ~uniqueSelectors.indexOf(toString)) {\n                    uniqueSelectors.push(toString);\n                } else {\n                    sel.removeSelf();\n                }\n            }\n            if (sel.type === 'tag') {\n                if (sel.value === 'from') {\n                    sel.value = '0%';\n                } else if (sel.value === '100%') {\n                    sel.value = 'to';\n                }\n            }\n            if (sel.type === 'universal') {\n                var next = sel.next();\n                if (next && next.type !== 'combinator') {\n                    sel.removeSelf();\n                }\n            }\n        });\n    });\n}\n\nmodule.exports = _postcss2.default.plugin('postcss-minify-selectors', function () {\n    return function (css) {\n        return css.walkRules(optimise);\n    };\n});"]}