{"version":3,"sources":["parseValues.js"],"names":[],"mappings":"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","file":"parseValues-compiled.js","sourcesContent":["\"use strict\";\r\n\r\nvar Parser = require(\"fastparse\");\r\n\r\nfunction commentMatch(match, content) {\r\n\tthis.value.nodes.push({\r\n\t\ttype: \"comment\",\r\n\t\tcontent: content\r\n\t});\r\n}\r\n\r\nfunction spacingMatch(match) {\r\n\tvar item = this.value.nodes[this.value.nodes.length - 1];\r\n\titem.after = (item.after || \"\") + match;\r\n}\r\n\r\nfunction initialSpacingMatch(match) {\r\n\tthis.value.before = match;\r\n}\r\n\r\nfunction endSpacingMatch(match) {\r\n\tthis.value.after = match;\r\n}\r\n\r\nfunction unescapeString(content) {\r\n\treturn content.replace(/\\\\([a-fA-F0-9]{2,5}|.)/g, function(escaped) {\r\n\t\tif(escaped.length > 2) {\r\n\t\t\tvar C = parseInt(escaped.substr(1), 16);\r\n\t\t\tif(C < 0x10000) {\r\n\t\t\t\treturn String.fromCharCode(C);\r\n\t\t\t} else {\r\n\t\t\t\treturn String.fromCharCode(Math.floor((C - 0x10000) / 0x400) + 0xD800) +\r\n\t\t\t\t\tString.fromCharCode((C - 0x10000) % 0x400 + 0xDC00);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn escaped.substr(1);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction stringMatch(match, content) {\r\n\tvar value = unescapeString(content);\r\n\tthis.value.nodes.push({\r\n\t\ttype: \"string\",\r\n\t\tvalue: value,\r\n\t\tstringType: match[0]\r\n\t});\r\n}\r\n\r\nfunction commaMatch(match, spacing) {\r\n\tvar newValue = {\r\n\t\ttype: \"value\",\r\n\t\tnodes: []\r\n\t};\r\n\tif(spacing) {\r\n\t\tnewValue.before = spacing;\r\n\t}\r\n\tthis.root.nodes.push(newValue);\r\n\tthis.value = newValue;\r\n}\r\n\r\nfunction itemMatch(match) {\r\n\tthis.value.nodes.push({\r\n\t\ttype: \"item\",\r\n\t\tname: match\r\n\t});\r\n}\r\n\r\nfunction nestedItemMatch(match, name, spacing) {\r\n\tthis.stack.push(this.root);\r\n\tthis.root = {\r\n\t\ttype: \"nested-item\",\r\n\t\tname: name,\r\n\t\tnodes: [\r\n\t\t\t{ type: \"value\", nodes: [] }\r\n\t\t]\r\n\t};\r\n\tif(spacing) {\r\n\t\tthis.root.nodes[0].before = spacing;\r\n\t}\r\n\tthis.value.nodes.push(this.root);\r\n\tthis.value = this.root.nodes[0];\r\n}\r\n\r\nfunction nestedItemEndMatch(match, spacing, remaining) {\r\n\tif(this.stack.length === 0) {\r\n\t\tif(spacing) {\r\n\t\t\tvar item = this.value.nodes[this.value.nodes.length - 1];\r\n\t\t\titem.after = (item.after || \"\") + spacing;\r\n\t\t}\r\n\t\tthis.value.nodes.push({\r\n\t\t\ttype: \"invalid\",\r\n\t\t\tvalue: remaining\r\n\t\t});\r\n\t} else {\r\n\t\tif(spacing) {\r\n\t\t\tthis.value.after = spacing;\r\n\t\t}\r\n\t\tthis.root = this.stack.pop();\r\n\t\tthis.value = this.root.nodes[this.root.nodes.length - 1];\r\n\t}\r\n}\r\n\r\nfunction urlMatch(match, innerSpacingBefore, content, innerSpacingAfter) {\r\n\tvar item = {\r\n\t\ttype: \"url\"\r\n\t};\r\n\tif(innerSpacingBefore) {\r\n\t\titem.innerSpacingBefore = innerSpacingBefore;\r\n\t}\r\n\tif(innerSpacingAfter) {\r\n\t\titem.innerSpacingAfter = innerSpacingAfter;\r\n\t}\r\n\tswitch(content[0]) {\r\n\t\tcase \"\\\"\":\r\n\t\t\titem.stringType = \"\\\"\";\r\n\t\t\titem.url = unescapeString(content.substr(1, content.length - 2));\r\n\t\t\tbreak;\r\n\t\tcase \"'\":\r\n\t\t\titem.stringType = \"'\";\r\n\t\t\titem.url = unescapeString(content.substr(1, content.length - 2));\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\titem.url = unescapeString(content);\r\n\t\t\tbreak;\r\n\t}\r\n\tthis.value.nodes.push(item);\r\n}\r\n\r\nvar parser = new Parser({\r\n\tdecl: {\r\n\t\t\"^\\\\s+\": initialSpacingMatch,\r\n\t\t\"/\\\\*([\\\\s\\\\S]*?)\\\\*/\": commentMatch,\r\n\t\t\"\\\"((?:[^\\\\\\\\\\\"]|\\\\\\\\.)*)\\\"\": stringMatch,\r\n\t\t\"'((?:[^\\\\\\\\']|\\\\\\\\.)*)'\": stringMatch,\r\n\t\t\"url\\\\((\\\\s*)(\\\"(?:[^\\\\\\\\\\\"]|\\\\\\\\.)*\\\")(\\\\s*)\\\\)\": urlMatch,\r\n\t\t\"url\\\\((\\\\s*)('(?:[^\\\\\\\\']|\\\\\\\\.)*')(\\\\s*)\\\\)\": urlMatch,\r\n\t\t\"url\\\\((\\\\s*)((?:[^\\\\\\\\)'\\\"]|\\\\\\\\.)*)(\\\\s*)\\\\)\": urlMatch,\r\n\t\t\"([\\\\w\\-]+)\\\\((\\\\s*)\": nestedItemMatch,\r\n\t\t\"(\\\\s*)(\\\\))\": nestedItemEndMatch,\r\n\t\t\",(\\\\s*)\": commaMatch,\r\n\t\t\"\\\\s+$\": endSpacingMatch,\r\n\t\t\"\\\\s+\": spacingMatch,\r\n\t\t\"[^\\\\s,\\)]+\": itemMatch\r\n\t}\r\n});\r\n\r\nfunction parseValues(str) {\r\n\tvar valueNode = {\r\n\t\ttype: \"value\",\r\n\t\tnodes: []\r\n\t};\r\n\tvar rootNode = {\r\n\t\ttype: \"values\",\r\n\t\tnodes: [\r\n\t\t\tvalueNode\r\n\t\t]\r\n\t};\r\n\tparser.parse(\"decl\", str, {\r\n\t\tstack: [],\r\n\t\troot: rootNode,\r\n\t\tvalue: valueNode\r\n\t});\r\n\treturn rootNode;\r\n}\r\n\r\nmodule.exports = parseValues;\r\n"]}