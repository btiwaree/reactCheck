{"version":3,"sources":["pipe_test.js"],"names":[],"mappings":";AACA,IAAI,SAAS,QAAQ,mBAAR,CAAT;AACJ,IAAI,SAAS,QAAQ,UAAR,CAAT;;AAEJ,QAAQ,IAAR,GAAe;AACb,aAAW,UAAS,IAAT,EAAe;AACxB,QAAI,WAAW,CAAE,SAAF,EAAa,SAAb,CAAX,CADoB;AAExB,QAAI,SAAS,EAAT,CAFoB;AAGxB,QAAI,uBAAuB,KAAvB,CAHoB;AAIxB,QAAI,uBAAuB,KAAvB,CAJoB;;AAMxB,SAAK,MAAL,CAAY,CAAZ,EANwB;;AAQxB,QAAI,WAAW,IAAI,OAAO,QAAP,CAAgB,YAAW;AAC5C,6BAAuB,IAAvB,CAD4C;AAE5C,aAAO,IAAI,OAAO,aAAP,CAAqB,GAAG,MAAH,CAAU,QAAV,CAAzB,CAAP,CAF4C;KAAX,CAA/B,CARoB;;AAaxB,QAAI,WAAW,IAAI,OAAO,QAAP,CAAgB,YAAW;AAC5C,6BAAuB,IAAvB,CAD4C;AAE5C,aAAO,IAAI,OAAO,aAAP,CAAqB,MAAzB,CAAP,CAF4C;KAAX,CAA/B,CAboB;;AAkBxB,SAAK,KAAL,CAAW,oBAAX,EAAiC,KAAjC,EAAwC,6DAAxC,EAlBwB;AAmBxB,SAAK,KAAL,CAAW,oBAAX,EAAiC,KAAjC,EAAwC,6DAAxC,EAnBwB;;AAqBxB,aAAS,EAAT,CAAY,KAAZ,EAAmB,YAAW;AAC5B,WAAK,KAAL,CAAW,OAAO,IAAP,CAAY,EAAZ,CAAX,EAA4B,SAAS,IAAT,CAAc,EAAd,CAA5B,EAA+C,kDAA/C,EAD4B;AAE5B,WAAK,IAAL,GAF4B;KAAX,CAAnB,CArBwB;;AA0BxB,aAAS,IAAT,CAAc,QAAd,EA1BwB;GAAf;CADb","file":"pipe_test-compiled.js","sourcesContent":["\nvar stream = require('../lib/lazystream');\nvar helper = require('./helper');\n\nexports.pipe = {\n  readwrite: function(test) {\n    var expected = [ 'line1\\n', 'line2\\n' ];\n    var actual = [];\n    var readableInstantiated = false;\n    var writableInstantiated = false;\n\n    test.expect(3);\n\n    var readable = new stream.Readable(function() {\n      readableInstantiated = true;\n      return new helper.DummyReadable([].concat(expected));\n    });\n\n    var writable = new stream.Writable(function() {\n      writableInstantiated = true;\n      return new helper.DummyWritable(actual);\n    });\n\n    test.equal(readableInstantiated, false, 'DummyReadable should only be instantiated when it is needed');\n    test.equal(writableInstantiated, false, 'DummyWritable should only be instantiated when it is needed');\n\n    writable.on('end', function() {\n      test.equal(actual.join(''), expected.join(''), 'Piping on demand streams should keep data intact');\n      test.done();\n    });\n    \n    readable.pipe(writable);\n  }\n};\n\n\n"]}