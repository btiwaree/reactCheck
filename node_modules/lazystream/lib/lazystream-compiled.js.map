{"version":3,"sources":["lazystream.js"],"names":[],"mappings":"AAAA,IAAI,OAAO,QAAQ,MAAR,CAAP;AACJ,IAAI,cAAc,QAAQ,6BAAR,CAAd;;AAEJ,OAAO,OAAP,GAAiB;AACf,YAAU,QAAV;AACA,YAAU,QAAV;CAFF;;AAKA,KAAK,QAAL,CAAc,QAAd,EAAwB,WAAxB;AACA,KAAK,QAAL,CAAc,QAAd,EAAwB,WAAxB;;;;;AAKA,SAAS,eAAT,CAAyB,QAAzB,EAAmC,MAAnC,EAA2C,QAA3C,EAAqD;AACnD,WAAS,MAAT,IAAmB,YAAW;AAC5B,WAAO,SAAS,MAAT,CAAP,CAD4B;AAE5B,aAAS,KAAT,CAAe,IAAf,EAAqB,SAArB,EAF4B;AAG5B,WAAO,KAAK,MAAL,EAAa,KAAb,CAAmB,IAAnB,EAAyB,SAAzB,CAAP,CAH4B;GAAX,CADgC;CAArD;;AAQA,SAAS,QAAT,CAAkB,EAAlB,EAAsB,OAAtB,EAA+B;AAC7B,MAAI,EAAE,gBAAgB,QAAhB,CAAF,EACF,OAAO,IAAI,QAAJ,CAAa,EAAb,EAAiB,OAAjB,CAAP,CADF;;AAGA,cAAY,IAAZ,CAAiB,IAAjB,EAAuB,OAAvB,EAJ6B;;AAM7B,kBAAgB,IAAhB,EAAsB,OAAtB,EAA+B,YAAW;AACxC,QAAI,SAAS,GAAG,IAAH,CAAQ,IAAR,EAAc,OAAd,CAAT,CADoC;AAExC,QAAI,OAAO,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,EAAqB,OAArB,CAAP,CAFoC;AAGxC,WAAO,EAAP,CAAU,OAAV,EAAmB,IAAnB,EAHwC;AAIxC,WAAO,IAAP,CAAY,IAAZ,EAJwC;GAAX,CAA/B,CAN6B;;AAa7B,OAAK,IAAL,CAAU,UAAV,EAb6B;CAA/B;;AAgBA,SAAS,QAAT,CAAkB,EAAlB,EAAsB,OAAtB,EAA+B;AAC7B,MAAI,EAAE,gBAAgB,QAAhB,CAAF,EACF,OAAO,IAAI,QAAJ,CAAa,EAAb,EAAiB,OAAjB,CAAP,CADF;;AAGA,cAAY,IAAZ,CAAiB,IAAjB,EAAuB,OAAvB,EAJ6B;;AAM7B,kBAAgB,IAAhB,EAAsB,QAAtB,EAAgC,YAAW;AACzC,QAAI,cAAc,GAAG,IAAH,CAAQ,IAAR,EAAc,OAAd,CAAd,CADqC;AAEzC,QAAI,OAAO,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,EAAqB,OAArB,CAAP,CAFqC;AAGzC,gBAAY,EAAZ,CAAe,OAAf,EAAwB,IAAxB,EAHyC;AAIzC,SAAK,IAAL,CAAU,WAAV,EAJyC;GAAX,CAAhC,CAN6B;;AAa7B,OAAK,IAAL,CAAU,UAAV,EAb6B;CAA/B","file":"lazystream-compiled.js","sourcesContent":["var util = require('util');\nvar PassThrough = require('readable-stream/passthrough');\n\nmodule.exports = {\n  Readable: Readable,\n  Writable: Writable\n};\n\nutil.inherits(Readable, PassThrough);\nutil.inherits(Writable, PassThrough);\n\n// Patch the given method of instance so that the callback\n// is executed once, before the actual method is called the\n// first time.\nfunction beforeFirstCall(instance, method, callback) {\n  instance[method] = function() {\n    delete instance[method];\n    callback.apply(this, arguments);\n    return this[method].apply(this, arguments);\n  };\n}\n\nfunction Readable(fn, options) {\n  if (!(this instanceof Readable))\n    return new Readable(fn, options);\n\n  PassThrough.call(this, options);\n\n  beforeFirstCall(this, '_read', function() {\n    var source = fn.call(this, options);\n    var emit = this.emit.bind(this, 'error');\n    source.on('error', emit);\n    source.pipe(this);\n  });\n\n  this.emit('readable');\n}\n\nfunction Writable(fn, options) {\n  if (!(this instanceof Writable))\n    return new Writable(fn, options);\n\n  PassThrough.call(this, options);\n\n  beforeFirstCall(this, '_write', function() {\n    var destination = fn.call(this, options);\n    var emit = this.emit.bind(this, 'error');\n    destination.on('error', emit);\n    this.pipe(destination);\n  });\n\n  this.emit('writable');\n}\n\n"]}