{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AACA,IAAI,OAAO,QAAQ,MAAR,CAAP;AACJ,IAAI,YAAY,QAAQ,QAAR,EAAkB,SAAlB;;AAEhB,SAAS,IAAT,CAAc,OAAd,EAAuB,SAAvB,EAAkC;AACjC,MAAK,QAAL,CAAc,UAAd,EAA0B,SAA1B,EADiC;;AAGjC,KAAI,OAAO,OAAP,KAAmB,UAAnB,EAA+B;AAClC,cAAY,OAAZ,CADkC;AAElC,YAAU,EAAV,CAFkC;EAAnC;;AAKA,KAAI,OAAO,SAAP,KAAqB,UAArB,EAAiC;AACpC,QAAM,IAAI,KAAJ,CAAU,6BAAV,CAAN,CADoC;EAArC;;AAIA,UAAS,UAAT,CAAoB,QAApB,EAA8B;AAC7B,MAAI,EAAE,gBAAgB,UAAhB,CAAF,EAA+B;AAClC,UAAO,IAAI,UAAJ,CAAe,QAAf,CAAP,CADkC;GAAnC;;AAIA,YAAU,IAAV,CAAe,IAAf,EAAqB,QAArB,EAL6B;;AAO7B,OAAK,WAAL,GAAmB,IAAnB,CAP6B;AAQ7B,OAAK,gBAAL,GAAwB,KAAxB,CAR6B;AAS7B,OAAK,QAAL,GAAgB,QAAQ,OAAR,CATa;EAA9B;;AAYA,YAAW,SAAX,CAAqB,UAArB,GAAkC,UAAU,KAAV,EAAiB,GAAjB,EAAsB,EAAtB,EAA0B;AAC3D,OAAK,IAAL,GAAY,GAAZ,CAD2D;;AAG3D,MAAI,KAAK,WAAL,EAAkB;AACrB,QAAK,WAAL,GAAmB,KAAnB,CADqB;;AAGrB,OAAI,KAAK,QAAL,IAAiB,IAAjB,EAAuB;AAC1B,cAAU,IAAV,CAAe,IAAf,EAAqB,KAArB,EAA4B,GAA5B,EAAiC,EAAjC,EAD0B;AAE1B,SAAK,gBAAL,GAAwB,IAAxB,CAF0B;AAG1B,WAH0B;IAA3B;;AAMA,QAAK,OAAL,GAAe,KAAf,CATqB;AAUrB,QAVqB;AAWrB,UAXqB;GAAtB;;AAcA,MAAI,KAAK,QAAL,IAAiB,IAAjB,EAAuB;AAC1B,QAAK,IAAL,CAAU,KAAV,EAD0B;AAE1B,QAF0B;AAG1B,UAH0B;GAA3B;;AAMA,MAAI,KAAK,OAAL,CAAa,MAAb,GAAsB,KAAK,QAAL,EAAe;AACxC,QAAK,OAAL,GAAe,OAAO,MAAP,CAAc,CAAC,KAAK,OAAL,EAAc,KAAf,CAAd,CAAf,CADwC;AAExC,QAFwC;AAGxC,UAHwC;GAAzC;;AAMA,MAAI,KAAK,OAAL,CAAa,MAAb,IAAuB,KAAK,QAAL,EAAe;AACzC,aAAU,IAAV,CAAe,IAAf,EAAqB,KAAK,OAAL,CAAa,KAAb,EAArB,EAA2C,GAA3C,EAAgD,YAAY;AAC3D,SAAK,IAAL,CAAU,KAAV,EAD2D;AAE3D,SAF2D;IAAZ,CAG9C,IAH8C,CAGzC,IAHyC,CAAhD,EADyC;AAKzC,QAAK,gBAAL,GAAwB,IAAxB,CALyC;AAMzC,QAAK,OAAL,GAAe,KAAf,CANyC;AAOzC,UAPyC;GAA1C;;AAUA,OAAK,IAAL,CAAU,KAAV,EAvC2D;AAwC3D,OAxC2D;EAA1B,CAxBD;;AAmEjC,YAAW,SAAX,CAAqB,MAArB,GAA8B,UAAU,EAAV,EAAc;AAC3C,MAAI,CAAC,KAAK,OAAL,EAAc;AAClB,QADkB;AAElB,UAFkB;GAAnB;;AAKA,MAAI,KAAK,gBAAL,EAAuB;AAC1B,QAAK,IAAL,CAAU,KAAK,OAAL,CAAV,CAD0B;AAE1B,QAF0B;GAA3B,MAGO;AACN,aAAU,IAAV,CAAe,IAAf,EAAqB,KAAK,OAAL,CAAa,KAAb,EAArB,EAA2C,KAAK,IAAL,EAAW,EAAtD,EADM;GAHP;EAN6B,CAnEG;;AAiFjC,QAAO,UAAP,CAjFiC;CAAlC;;AAoFA,OAAO,OAAP,GAAiB,YAAY;AAC5B,QAAO,KAAK,KAAL,CAAW,IAAX,EAAiB,SAAjB,GAAP,CAD4B;CAAZ;;AAIjB,OAAO,OAAP,CAAe,IAAf,GAAsB,IAAtB","file":"index-compiled.js","sourcesContent":["'use strict';\nvar util = require('util');\nvar Transform = require('stream').Transform;\n\nfunction ctor(options, transform) {\n\tutil.inherits(FirstChunk, Transform);\n\n\tif (typeof options === 'function') {\n\t\ttransform = options;\n\t\toptions = {};\n\t}\n\n\tif (typeof transform !== 'function') {\n\t\tthrow new Error('transform function required');\n\t}\n\n\tfunction FirstChunk(options2) {\n\t\tif (!(this instanceof FirstChunk)) {\n\t\t\treturn new FirstChunk(options2);\n\t\t}\n\n\t\tTransform.call(this, options2);\n\n\t\tthis._firstChunk = true;\n\t\tthis._transformCalled = false;\n\t\tthis._minSize = options.minSize;\n\t}\n\n\tFirstChunk.prototype._transform = function (chunk, enc, cb) {\n\t\tthis._enc = enc;\n\n\t\tif (this._firstChunk) {\n\t\t\tthis._firstChunk = false;\n\n\t\t\tif (this._minSize == null) {\n\t\t\t\ttransform.call(this, chunk, enc, cb);\n\t\t\t\tthis._transformCalled = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._buffer = chunk;\n\t\t\tcb();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._minSize == null) {\n\t\t\tthis.push(chunk);\n\t\t\tcb();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._buffer.length < this._minSize) {\n\t\t\tthis._buffer = Buffer.concat([this._buffer, chunk]);\n\t\t\tcb();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._buffer.length >= this._minSize) {\n\t\t\ttransform.call(this, this._buffer.slice(), enc, function () {\n\t\t\t\tthis.push(chunk);\n\t\t\t\tcb();\n\t\t\t}.bind(this));\n\t\t\tthis._transformCalled = true;\n\t\t\tthis._buffer = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.push(chunk);\n\t\tcb();\n\t};\n\n\tFirstChunk.prototype._flush = function (cb) {\n\t\tif (!this._buffer) {\n\t\t\tcb();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._transformCalled) {\n\t\t\tthis.push(this._buffer);\n\t\t\tcb();\n\t\t} else {\n\t\t\ttransform.call(this, this._buffer.slice(), this._enc, cb);\n\t\t}\n\t};\n\n\treturn FirstChunk;\n}\n\nmodule.exports = function () {\n\treturn ctor.apply(ctor, arguments)();\n};\n\nmodule.exports.ctor = ctor;\n"]}