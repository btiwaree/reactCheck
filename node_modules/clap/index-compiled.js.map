{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var MAX_LINE_WIDTH = process.stdout.columns || 200;\nvar MIN_OFFSET = 25;\n\nvar errorHandler;\nvar commandsPath;\n\nvar reAstral = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\nvar ansiRegex = /\\x1B\\[([0-9]{1,3}(;[0-9]{1,3})*)?[m|K]/g;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction stringLength(str){\n  return str\n    .replace(ansiRegex, '')\n    .replace(reAstral, ' ')\n    .length;\n}\n\nfunction camelize(name){\n  return name.replace(/-(.)/g, function(m, ch){\n    return ch.toUpperCase();\n  });\n}\n\nfunction assign(dest, source){\n  for (var key in source)\n    if (hasOwnProperty.call(source, key))\n      dest[key] = source[key];\n\n  return dest;\n}\n\nfunction returnFirstArg(value){\n  return value;\n}\n\nfunction pad(width, str){\n  return str + Array(Math.max(0, width - stringLength(str)) + 1).join(' ');\n}\n\nfunction noop(){\n  // nothing todo\n}\n\nfunction parseParams(str){\n  // params [..<required>] [..[optional]]\n  // <foo> - require\n  // [foo] - optional\n  var tmp;\n  var left = str.trim();\n  var result = {\n    minArgsCount: 0,\n    maxArgsCount: 0,\n    args: []\n  };\n\n  do {\n    tmp = left;\n    left = left.replace(/^<([a-zA-Z][a-zA-Z0-9\\-\\_]*)>\\s*/, function(m, name){\n      result.args.push(new Argument(name, true));\n      result.minArgsCount++;\n      result.maxArgsCount++;\n\n      return '';\n    });\n  }\n  while (tmp != left);\n\n  do {\n    tmp = left;\n    left = left.replace(/^\\[([a-zA-Z][a-zA-Z0-9\\-\\_]*)\\]\\s*/, function(m, name){\n      result.args.push(new Argument(name, false));\n      result.maxArgsCount++;\n\n      return '';\n    });\n  }\n  while (tmp != left);\n\n  if (left)\n    throw new SyntaxError('Bad parameter description: ' + str);\n\n  return result.args.length ? result : false;\n}\n\n/**\n* @class\n*/\n\nvar SyntaxError = function(message){\n  this.message = message;\n};\nSyntaxError.prototype = Object.create(Error.prototype);\nSyntaxError.prototype.name = 'SyntaxError';\nSyntaxError.prototype.clap = true;\n\n/**\n* @class\n*/\nvar Argument = function(name, required){\n  this.name = name;\n  this.required = required;\n};\nArgument.prototype = {\n  required: false,\n  name: '',\n  normalize: returnFirstArg,\n  suggest: function(){\n    return [];\n  }\n};\n\n/**\n* @class\n* @param {string} usage\n* @param {string} description\n*/\nvar Option = function(usage, description){\n  var self = this;\n  var params;\n  var left = usage.trim()\n    // short usage\n    // -x\n    .replace(/^-([a-zA-Z])(?:\\s*,\\s*|\\s+)/, function(m, name){\n      self.short = name;\n\n      return '';\n    })\n    // long usage\n    // --flag\n    // --no-flag - invert value if flag is boolean\n    .replace(/^--([a-zA-Z][a-zA-Z0-9\\-\\_]+)\\s*/, function(m, name){\n      self.long = name;\n      self.name = name.replace(/(^|-)no-/, '$1');\n      self.defValue = self.name != self.long;\n\n      return '';\n    });\n\n  if (!this.long)\n    throw new SyntaxError('Usage has no long name: ' + usage);\n\n  try {\n    params = parseParams(left);\n  } catch(e) {\n    throw new SyntaxError('Bad paramenter description in usage for option: ' + usage, e);\n  }\n\n  if (params)\n  {\n    left = '';\n    this.name = this.long;\n    this.defValue = undefined;\n\n    assign(this, params);\n  }\n\n  if (left)\n    throw new SyntaxError('Bad usage description for option: ' + usage);\n\n  if (!this.name)\n    this.name = this.long;\n\n  this.description = description || '';\n  this.usage = usage.trim();\n  this.camelName = camelize(this.name);\n};\n\nOption.prototype = {\n  name: '',\n  description: '',\n  short: '',\n  long: '',\n\n  beforeInit: false,\n  required: false,\n  minArgsCount: 0,\n  maxArgsCount: 0,\n  args: null,\n\n  defValue: undefined,\n  normalize: returnFirstArg\n};\n\n\n//\n// Command\n//\n\nfunction createOption(usage, description, opt_1, opt_2){\n  var option = new Option(usage, description);\n\n  // if (option.bool && arguments.length > 2)\n  //   throw new SyntaxError('bool flags can\\'t has default value or validator');\n\n  if (arguments.length == 3)\n  {\n    if (opt_1 && opt_1.constructor === Object)\n    {\n      for (var key in opt_1)\n        if (key == 'normalize' ||\n            key == 'defValue' ||\n            key == 'beforeInit')\n          option[key] = opt_1[key];\n\n      // old name for `beforeInit` setting is `hot`\n      if (opt_1.hot)\n        option.beforeInit = true;\n    }\n    else\n    {\n      if (typeof opt_1 == 'function')\n        option.normalize = opt_1;\n      else\n        option.defValue = opt_1;\n    }\n  }\n\n  if (arguments.length == 4)\n  {\n    if (typeof opt_1 == 'function')\n      option.normalize = opt_1;\n\n    option.defValue = opt_2;\n  }\n\n  return option;\n}\n\nfunction addOptionToCommand(command, option){\n  var commandOption;\n\n  // short\n  if (option.short)\n  {\n    commandOption = command.short[option.short];\n\n    if (commandOption)\n      throw new SyntaxError('Short option name -' + option.short + ' already in use by ' + commandOption.usage + ' ' + commandOption.description);\n\n    command.short[option.short] = option;\n  }\n\n  // long\n  commandOption = command.long[option.long];\n\n  if (commandOption)\n    throw new SyntaxError('Long option --' + option.long + ' already in use by ' + commandOption.usage + ' ' + commandOption.description);\n\n  command.long[option.long] = option;\n\n  // camel\n  commandOption = command.options[option.camelName];\n\n  if (commandOption)\n    throw new SyntaxError('Name option ' + option.camelName + ' already in use by ' + commandOption.usage + ' ' + commandOption.description);\n\n  command.options[option.camelName] = option;\n\n  // set default value\n  if (typeof option.defValue != 'undefined')\n    command.setOption(option.camelName, option.defValue, true);\n\n  // add to suggestions\n  command.suggestions.push('--' + option.long);\n\n  return option;\n}\n\nfunction findVariants(obj, entry){\n  return obj.suggestions.filter(function(item){\n    return item.substr(0, entry.length) == entry;\n  });\n}\n\nfunction processArgs(command, args, suggest){\n  function processOption(option, command){\n    var params = [];\n\n    if (option.maxArgsCount)\n    {\n      for (var j = 0; j < option.maxArgsCount; j++)\n      {\n        var suggestPoint = suggest && i + 1 + j >= args.length - 1;\n        var nextToken = args[i + 1];\n\n        // TODO: suggestions for options\n        if (suggestPoint)\n        {\n          // search for suggest\n          noSuggestions = true;\n          i = args.length;\n          return;\n        }\n\n        if (!nextToken || nextToken[0] == '-')\n          break;\n\n        params.push(args[++i]);\n      }\n\n      if (params.length < option.minArgsCount)\n        throw new SyntaxError('Option ' + token + ' should be used with at least ' + option.minArgsCount + ' argument(s)\\nUsage: ' + option.usage);\n    }\n    else\n    {\n      params = !option.defValue;\n    }\n\n    //command.values[option.camelName] = newValue;\n    resultToken.options.push({\n      option: option,\n      value: params\n    });\n  }\n\n  var resultToken = {\n    command: command,\n    args: [],\n    literalArgs: [],\n    options: []\n  };\n  var result = [resultToken];\n\n  var suggestStartsWith = '';\n  var noSuggestions = false;\n  var collectArgs = false;\n  var commandArgs = [];\n  var noOptionsYet = true;\n  var option;\n\n  commandsPath = [command.name];\n\n  for (var i = 0; i < args.length; i++)\n  {\n    var suggestPoint = suggest && i == args.length - 1;\n    var token = args[i];\n\n    if (collectArgs)\n    {\n      commandArgs.push(token);\n      continue;\n    }\n\n    if (suggestPoint && (token == '--' || token == '-' || token[0] != '-'))\n    {\n      suggestStartsWith = token;\n      break; // returns long option & command list outside the loop\n    }\n\n    if (token == '--')\n    {\n      noOptionsYet = false;\n      collectArgs = true;\n      continue;\n    }\n\n    if (token[0] == '-')\n    {\n      noOptionsYet = false;\n\n      if (commandArgs.length)\n      {\n        //command.args_.apply(command, commandArgs);\n        resultToken.args = commandArgs;\n        commandArgs = [];\n      }\n\n      if (token[1] == '-')\n      {\n        // long option\n        option = command.long[token.substr(2)];\n\n        if (!option)\n        {\n          // option doesn't exist\n          if (suggestPoint)\n            return findVariants(command, token);\n          else\n            throw new SyntaxError('Unknown option: ' + token);\n        }\n\n        // process option\n        processOption(option, command);\n      }\n      else\n      {\n        // short flags sequence\n        if (!/^-[a-zA-Z]+$/.test(token))\n          throw new SyntaxError('Wrong short option sequence: ' + token);\n\n        if (token.length == 2)\n        {\n          option = command.short[token[1]];\n\n          if (!option)\n            throw new SyntaxError('Unknown short option name: -' + token[1]);\n\n          // single option\n          processOption(option, command);\n        }\n        else\n        {\n          // short options sequence\n          for (var j = 1; j < token.length; j++)\n          {\n            option = command.short[token[j]];\n\n            if (!option)\n              throw new SyntaxError('Unknown short option name: -' + token[j]);\n\n            if (option.maxArgsCount)\n              throw new SyntaxError('Non-boolean option -' + token[j] + ' can\\'t be used in short option sequence: ' + token);\n\n            processOption(option, command);\n          }\n        }\n      }\n    }\n    else\n    {\n      if (command.commands[token] && (!command.params || commandArgs.length >= command.params.minArgsCount))\n      {\n        if (noOptionsYet)\n        {\n          resultToken.args = commandArgs;\n          commandArgs = [];\n        }\n\n        if (command.params && resultToken.args.length < command.params.minArgsCount)\n          throw new SyntaxError('Missed required argument(s) for command `' + command.name + '`');\n\n        // switch control to another command\n        command = command.commands[token];\n        noOptionsYet = true;\n\n        commandsPath.push(command.name);\n\n        resultToken = {\n          command: command,\n          args: [],\n          literalArgs: [],\n          options: []\n        };\n        result.push(resultToken);\n      }\n      else\n      {\n        if (noOptionsYet && command.params && commandArgs.length < command.params.maxArgsCount)\n        {\n          commandArgs.push(token);\n          continue;\n        }\n\n        if (suggestPoint)\n          return findVariants(command, token);\n        else\n          throw new SyntaxError('Unknown command: ' + token);\n      }\n    }\n  }\n\n  if (suggest)\n  {\n    if (collectArgs || noSuggestions)\n      return [];\n\n    return findVariants(command, suggestStartsWith);\n  }\n  else\n  {\n    if (!noOptionsYet)\n      resultToken.literalArgs = commandArgs;\n    else\n      resultToken.args = commandArgs;\n\n    if (command.params && resultToken.args.length < command.params.minArgsCount)\n      throw new SyntaxError('Missed required argument(s) for command `' + command.name + '`');\n  }\n\n  return result;\n}\n\nfunction setFunctionFactory(name){\n  return function(fn){\n    var property = name + '_';\n\n    if (this[property] !== noop)\n      throw new SyntaxError('Method `' + name + '` could be invoked only once');\n\n    if (typeof fn != 'function')\n      throw new SyntaxError('Value for `' + name + '` method should be a function');\n\n    this[property] = fn;\n\n    return this;\n  }\n}\n\n/**\n* @class\n*/\nvar Command = function(name, params){\n  this.name = name;\n  this.params = false;\n\n  try {\n    if (params)\n      this.params = parseParams(params);\n  } catch(e) {\n    throw new SyntaxError('Bad paramenter description in command definition: ' + this.name + ' ' + params);\n  }\n\n  this.commands = {};\n\n  this.options = {};\n  this.short = {};\n  this.long = {};\n  this.values = {};\n  this.defaults_ = {};\n\n  this.suggestions = [];\n\n  this.option('-h, --help', 'Output usage information', function(){\n    this.showHelp();\n    process.exit(0);\n  }, undefined);\n};\n\nCommand.prototype = {\n  params: null,\n  commands: null,\n  options: null,\n  short: null,\n  long: null,\n  values: null,\n  defaults_: null,\n  suggestions: null,\n\n  description_: '',\n  version_: '',\n  initContext_: noop,\n  init_: noop,\n  delegate_: noop,\n  action_: noop,\n  args_: noop,\n  end_: null,\n\n  option: function(usage, description, opt_1, opt_2){\n    addOptionToCommand(this, createOption.apply(null, arguments));\n\n    return this;\n  },\n  shortcut: function(usage, description, fn, opt_1, opt_2){\n    if (typeof fn != 'function')\n      throw new SyntaxError('fn should be a function');\n\n    var command = this;\n    var option = addOptionToCommand(this, createOption(usage, description, opt_1, opt_2));\n    var normalize = option.normalize;\n\n    option.normalize = function(value){\n      var values;\n\n      value = normalize.call(command, value);\n      values = fn(value);\n\n      for (var name in values)\n        if (hasOwnProperty.call(values, name))\n          if (hasOwnProperty.call(command.options, name))\n            command.setOption(name, values[name]);\n          else\n            command.values[name] = values[name];\n\n      command.values[option.name] = value;\n\n      return value;\n    };\n\n    return this;\n  },\n  hasOption: function(name){\n    return hasOwnProperty.call(this.options, name);\n  },\n  hasOptions: function(){\n    return Object.keys(this.options).length > 0;\n  },\n  setOption: function(name, value, isDefault){\n    if (!this.hasOption(name))\n      throw new SyntaxError('Option `' + name + '` is not defined');\n\n    var option = this.options[name];\n    var newValue = Array.isArray(value)\n          ? option.normalize.apply(this, value)\n          : option.normalize.call(this, value);\n\n    this.values[name] = option.maxArgsCount ? newValue : value;\n\n    if (isDefault && !hasOwnProperty.call(this.defaults_, name))\n      this.defaults_[name] = this.values[name];\n  },\n  setOptions: function(values){\n    for (var name in values)\n      if (hasOwnProperty.call(values, name) && this.hasOption(name))\n        this.setOption(name, values[name]);\n  },\n  reset: function(){\n    this.values = {};\n\n    assign(this.values, this.defaults_);\n  },\n\n  command: function(nameOrCommand, params){\n    var name;\n    var command;\n\n    if (nameOrCommand instanceof Command)\n    {\n      command = nameOrCommand;\n      name = command.name;\n    }\n    else\n    {\n      name = nameOrCommand;\n\n      if (!/^[a-zA-Z][a-zA-Z0-9\\-\\_]*$/.test(name))\n        throw new SyntaxError('Wrong command name: ' + name);\n    }\n\n    // search for existing one\n    var subcommand = this.commands[name];\n\n    if (!subcommand)\n    {\n      // create new one if not exists\n      subcommand = command || new Command(name, params);\n      subcommand.end_ = this;\n      this.commands[name] = subcommand;\n      this.suggestions.push(name);\n    }\n\n    return subcommand;\n  },\n  end: function() {\n    return this.end_;\n  },\n  hasCommands: function(){\n    return Object.keys(this.commands).length > 0;\n  },\n\n  version: function(version, usage, description){\n    if (this.version_)\n      throw new SyntaxError('Version for command could be set only once');\n\n    this.version_ = version;\n    this.option(\n      usage || '-v, --version',\n      description || 'Output version',\n      function(){\n        console.log(this.version_);\n        process.exit(0);\n      },\n      undefined\n    );\n\n    return this;\n  },\n  description: function(description){\n    if (this.description_)\n      throw new SyntaxError('Description for command could be set only once');\n\n    this.description_ = description;\n\n    return this;\n  },\n\n  init: setFunctionFactory('init'),\n  initContext: setFunctionFactory('initContext'),\n  args: setFunctionFactory('args'),\n  delegate: setFunctionFactory('delegate'),\n  action: setFunctionFactory('action'),\n\n  extend: function(fn){\n    fn.apply(null, [this].concat(Array.prototype.slice.call(arguments, 1)));\n    return this;\n  },\n\n  parse: function(args, suggest){\n    if (!args)\n      args = process.argv.slice(2);\n\n    if (!errorHandler)\n      return processArgs(this, args, suggest);\n    else\n      try {\n        return processArgs(this, args, suggest);\n      } catch(e) {\n        errorHandler(e.message || e);\n      }\n  },\n  run: function(args, context){\n    var commands = this.parse(args);\n\n    if (!commands)\n      return;\n\n    var prevCommand;\n    var context = assign({}, context || this.initContext_());\n    for (var i = 0; i < commands.length; i++)\n    {\n      var item = commands[i];\n      var command = item.command;\n\n      // reset command values\n      command.reset();\n      command.context = context;\n      command.root = this;\n\n      if (prevCommand)\n        prevCommand.delegate_(command);\n\n      // apply beforeInit options\n      command.setOptions(\n        item.options.reduce(function(res, entry){\n          if (entry.option.beforeInit)\n            res[entry.option.camelName] = entry.value;\n          return res;\n        }, {})\n      );\n\n      command.init_(item.args);\n\n      if (item.args.length)\n        command.args_(item.args);\n\n      // apply regular options\n      command.setOptions(\n        item.options.reduce(function(res, entry){\n          if (!entry.option.beforeInit)\n            res[entry.option.camelName] = entry.value;\n          return res;\n        }, {})\n      );\n\n      prevCommand = command;\n    }\n\n    // return last command action result\n    if (command)\n      return command.action_(item.args, item.literalArgs);\n  },\n\n  normalize: function(values){\n    var result = {};\n\n    if (!values)\n      values = {};\n\n    for (var name in this.values)\n      if (hasOwnProperty.call(this.values, name))\n        result[name] = hasOwnProperty.call(values, name) && hasOwnProperty(this.options, name)\n          ? this.options[name].normalize.call(this, values[name])\n          : this.values[name];\n\n    for (var name in values)\n      if (hasOwnProperty.call(values, name) && !hasOwnProperty.call(this.options, name))\n        result[name] = values[name];\n\n    return result;\n  },\n\n  showHelp: function(){\n    console.log(showCommandHelp(this));\n  }\n};\n\n\n//\n// help\n//\n\n/**\n * Return program help documentation.\n *\n * @return {String}\n * @api private\n */\n\nfunction showCommandHelp(command){\n  function breakByLines(str, offset){\n    var words = str.split(' ');\n    var maxWidth = MAX_LINE_WIDTH - offset || 0;\n    var lines = [];\n    var line = '';\n\n    while (words.length)\n    {\n      var word = words.shift();\n      if (!line || (line.length + word.length + 1) < maxWidth)\n      {\n        line += (line ? ' ' : '') + word;\n      }\n      else\n      {\n        lines.push(line);\n        words.unshift(word);\n        line = '';\n      }\n    }\n\n    lines.push(line);\n\n    return lines.map(function(line, idx){\n      return (idx && offset ? pad(offset, '') : '') + line;\n    }).join('\\n');\n  }\n\n  function args(command){\n    return command.params.args.map(function(arg){\n        return arg.required\n          ? '<' + arg.name + '>'\n          : '[' + arg.name + ']';\n      }).join(' ');\n  }\n\n  function commandsHelp(){\n    if (!command.hasCommands())\n      return '';\n\n    var maxNameLength = MIN_OFFSET - 2;\n    var lines = Object.keys(command.commands).sort().map(function(name){\n      var subcommand = command.commands[name];\n\n      var line = {\n        name: chalk.green(name) + chalk.gray(\n          (subcommand.params ? ' ' + args(subcommand) : '')\n          // (subcommand.hasOptions() ? ' [options]' : '')\n        ),\n        description: subcommand.description_ || ''\n      };\n\n      maxNameLength = Math.max(maxNameLength, stringLength(line.name));\n\n      return line;\n    });\n\n    return [\n      '',\n      'Commands:',\n      '',\n      lines.map(function(line){\n        return '  ' + pad(maxNameLength, line.name) + '  ' + breakByLines(line.description, maxNameLength + 4);\n      }).join('\\n'),\n      ''\n    ].join('\\n');\n  }\n\n  function optionsHelp(){\n    if (!command.hasOptions())\n      return '';\n\n    var hasShortOptions = Object.keys(command.short).length > 0;\n    var maxNameLength = MIN_OFFSET - 2;\n    var lines = Object.keys(command.long).sort().map(function(name){\n      var option = command.long[name];\n      var line = {\n        name: option.usage\n          .replace(/^(?:-., |)/, function(m){\n            return m || (hasShortOptions ? '    ' : '');\n          })\n          .replace(/(^|\\s)(-[^\\s,]+)/ig, function(m, p, flag){\n            return p + chalk.yellow(flag);\n          }),\n        description: option.description\n      };\n\n      maxNameLength = Math.max(maxNameLength, stringLength(line.name));\n\n      return line;\n    });\n\n    // Prepend the help information\n    return [\n      '',\n      'Options:',\n      '',\n      lines.map(function(line){\n        return '  ' + pad(maxNameLength, line.name) + '  ' + breakByLines(line.description, maxNameLength + 4);\n      }).join('\\n'),\n      ''\n    ].join('\\n');\n  }\n\n  var output = [];\n  var chalk = require('chalk');\n\n  chalk.enabled = module.exports.color && process.stdout.isTTY;\n\n  if (command.description_)\n    output.push(command.description_ + '\\n');\n\n  output.push(\n    'Usage:\\n\\n  ' +\n      chalk.cyan(commandsPath ? commandsPath.join(' ') : command.name) +\n      (command.params ? ' ' + chalk.magenta(args(command)) : '') +\n      (command.hasOptions() ? ' [' + chalk.yellow('options') + ']' : '') +\n      (command.hasCommands() ? ' [' + chalk.green('command') + ']' : ''),\n    commandsHelp() +\n    optionsHelp()\n  );\n\n  return output.join('\\n');\n};\n\n\n//\n// export\n//\n\nmodule.exports = {\n  color: true,\n\n  Error: SyntaxError,\n  Argument: Argument,\n  Command: Command,\n  Option: Option,\n\n  error: function(fn){\n    if (errorHandler)\n      throw new SyntaxError('Error handler should be set only once');\n\n    if (typeof fn != 'function')\n      throw new SyntaxError('Error handler should be a function');\n\n    errorHandler = fn;\n\n    return this;\n  },\n\n  create: function(name, params){\n    return new Command(name || require('path').basename(process.argv[1]) || 'cli', params);\n  },\n\n  confirm: function(message, fn){\n    process.stdout.write(message);\n    process.stdin.setEncoding('utf8');\n    process.stdin.once('data', function(val){\n      process.stdin.pause();\n      fn(/^y|yes|ok|true$/i.test(val.trim()));\n    });\n    process.stdin.resume();\n  }\n};\n"]}