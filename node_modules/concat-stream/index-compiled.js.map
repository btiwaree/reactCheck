{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var Writable = require('readable-stream').Writable\nvar inherits = require('inherits')\n\nif (typeof Uint8Array === 'undefined') {\n  var U8 = require('typedarray').Uint8Array\n} else {\n  var U8 = Uint8Array\n}\n\nfunction ConcatStream(opts, cb) {\n  if (!(this instanceof ConcatStream)) return new ConcatStream(opts, cb)\n\n  if (typeof opts === 'function') {\n    cb = opts\n    opts = {}\n  }\n  if (!opts) opts = {}\n\n  var encoding = opts.encoding\n  var shouldInferEncoding = false\n\n  if (!encoding) {\n    shouldInferEncoding = true\n  } else {\n    encoding =  String(encoding).toLowerCase()\n    if (encoding === 'u8' || encoding === 'uint8') {\n      encoding = 'uint8array'\n    }\n  }\n\n  Writable.call(this, { objectMode: true })\n\n  this.encoding = encoding\n  this.shouldInferEncoding = shouldInferEncoding\n\n  if (cb) this.on('finish', function () { cb(this.getBody()) })\n  this.body = []\n}\n\nmodule.exports = ConcatStream\ninherits(ConcatStream, Writable)\n\nConcatStream.prototype._write = function(chunk, enc, next) {\n  this.body.push(chunk)\n  next()\n}\n\nConcatStream.prototype.inferEncoding = function (buff) {\n  var firstBuffer = buff === undefined ? this.body[0] : buff;\n  if (Buffer.isBuffer(firstBuffer)) return 'buffer'\n  if (typeof Uint8Array !== 'undefined' && firstBuffer instanceof Uint8Array) return 'uint8array'\n  if (Array.isArray(firstBuffer)) return 'array'\n  if (typeof firstBuffer === 'string') return 'string'\n  if (Object.prototype.toString.call(firstBuffer) === \"[object Object]\") return 'object'\n  return 'buffer'\n}\n\nConcatStream.prototype.getBody = function () {\n  if (!this.encoding && this.body.length === 0) return []\n  if (this.shouldInferEncoding) this.encoding = this.inferEncoding()\n  if (this.encoding === 'array') return arrayConcat(this.body)\n  if (this.encoding === 'string') return stringConcat(this.body)\n  if (this.encoding === 'buffer') return bufferConcat(this.body)\n  if (this.encoding === 'uint8array') return u8Concat(this.body)\n  return this.body\n}\n\nvar isArray = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]'\n}\n\nfunction isArrayish (arr) {\n  return /Array\\]$/.test(Object.prototype.toString.call(arr))\n}\n\nfunction stringConcat (parts) {\n  var strings = []\n  var needsToString = false\n  for (var i = 0; i < parts.length; i++) {\n    var p = parts[i]\n    if (typeof p === 'string') {\n      strings.push(p)\n    } else if (Buffer.isBuffer(p)) {\n      strings.push(p)\n    } else {\n      strings.push(Buffer(p))\n    }\n  }\n  if (Buffer.isBuffer(parts[0])) {\n    strings = Buffer.concat(strings)\n    strings = strings.toString('utf8')\n  } else {\n    strings = strings.join('')\n  }\n  return strings\n}\n\nfunction bufferConcat (parts) {\n  var bufs = []\n  for (var i = 0; i < parts.length; i++) {\n    var p = parts[i]\n    if (Buffer.isBuffer(p)) {\n      bufs.push(p)\n    } else if (typeof p === 'string' || isArrayish(p)\n    || (p && typeof p.subarray === 'function')) {\n      bufs.push(Buffer(p))\n    } else bufs.push(Buffer(String(p)))\n  }\n  return Buffer.concat(bufs)\n}\n\nfunction arrayConcat (parts) {\n  var res = []\n  for (var i = 0; i < parts.length; i++) {\n    res.push.apply(res, parts[i])\n  }\n  return res\n}\n\nfunction u8Concat (parts) {\n  var len = 0\n  for (var i = 0; i < parts.length; i++) {\n    if (typeof parts[i] === 'string') {\n      parts[i] = Buffer(parts[i])\n    }\n    len += parts[i].length\n  }\n  var u8 = new U8(len)\n  for (var i = 0, offset = 0; i < parts.length; i++) {\n    var part = parts[i]\n    for (var j = 0; j < part.length; j++) {\n      u8[offset++] = part[j]\n    }\n  }\n  return u8\n}\n"]}