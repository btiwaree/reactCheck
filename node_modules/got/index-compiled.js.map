{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["'use strict';\n\nvar EventEmitter = require('events').EventEmitter;\nvar http = require('http');\nvar https = require('https');\nvar urlLib = require('url');\nvar querystring = require('querystring');\nvar objectAssign = require('object-assign');\nvar PassThrough = require('readable-stream').PassThrough;\nvar duplexer2 = require('duplexer2');\nvar isStream = require('is-stream');\nvar readAllStream = require('read-all-stream');\nvar timedOut = require('timed-out');\nvar urlParseLax = require('url-parse-lax');\nvar lowercaseKeys = require('lowercase-keys');\nvar isRedirect = require('is-redirect');\nvar PinkiePromise = require('pinkie-promise');\nvar unzipResponse = require('unzip-response');\nvar createErrorClass = require('create-error-class');\nvar nodeStatusCodes = require('node-status-codes');\nvar isPlainObj = require('is-plain-obj');\nvar parseJson = require('parse-json');\nvar isRetryAllowed = require('is-retry-allowed');\nvar pkg = require('./package.json');\n\nfunction requestAsEventEmitter(opts) {\n\topts = opts || {};\n\n\tvar ee = new EventEmitter();\n\tvar redirectCount = 0;\n\tvar retryCount = 0;\n\n\tvar get = function (opts) {\n\t\tvar fn = opts.protocol === 'https:' ? https : http;\n\n\t\tvar req = fn.request(opts, function (res) {\n\t\t\tvar statusCode = res.statusCode;\n\n\t\t\tif (isRedirect(statusCode) && opts.followRedirect && 'location' in res.headers && (opts.method === 'GET' || opts.method === 'HEAD')) {\n\t\t\t\tres.resume();\n\n\t\t\t\tif (++redirectCount > 10) {\n\t\t\t\t\tee.emit('error', new got.MaxRedirectsError(statusCode, opts), null, res);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar redirectUrl = urlLib.resolve(urlLib.format(opts), res.headers.location);\n\t\t\t\tvar redirectOpts = objectAssign({}, opts, urlLib.parse(redirectUrl));\n\n\t\t\t\tee.emit('redirect', res, redirectOpts);\n\n\t\t\t\tget(redirectOpts);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// do not write ee.bind(...) instead of function - it will break gzip in Node.js 0.10\n\t\t\tsetImmediate(function () {\n\t\t\t\tee.emit('response', typeof unzipResponse === 'function' && req.method !== 'HEAD' ? unzipResponse(res) : res);\n\t\t\t});\n\t\t});\n\n\t\treq.once('error', function (err) {\n\t\t\tvar backoff = opts.retries(++retryCount, err);\n\t\t\tif (backoff) {\n\t\t\t\tsetTimeout(get, backoff, opts);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tee.emit('error', new got.RequestError(err, opts));\n\t\t});\n\n\t\tif (opts.timeout) {\n\t\t\ttimedOut(req, opts.timeout);\n\t\t}\n\n\t\tsetImmediate(ee.emit.bind(ee), 'request', req);\n\t};\n\n\tget(opts);\n\treturn ee;\n}\n\nfunction asCallback(opts, cb) {\n\tvar ee = requestAsEventEmitter(opts);\n\n\tee.on('request', function (req) {\n\t\tif (isStream(opts.body)) {\n\t\t\topts.body.pipe(req);\n\t\t\topts.body = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\treq.end(opts.body);\n\t});\n\n\tee.on('response', function (res) {\n\t\treadAllStream(res, opts.encoding, function (err, data) {\n\t\t\tvar statusCode = res.statusCode;\n\t\t\tvar limitStatusCode = opts.followRedirect ? 299 : 399;\n\n\t\t\tif (err) {\n\t\t\t\tcb(new got.ReadError(err, opts), null, res);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (statusCode < 200 || statusCode > limitStatusCode) {\n\t\t\t\terr = new got.HTTPError(statusCode, opts);\n\t\t\t}\n\n\t\t\tif (opts.json && data) {\n\t\t\t\ttry {\n\t\t\t\t\tdata = parseJson(data);\n\t\t\t\t} catch (e) {\n\t\t\t\t\te.fileName = urlLib.format(opts);\n\t\t\t\t\terr = new got.ParseError(e, statusCode, opts);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcb(err, data, res);\n\t\t});\n\t});\n\n\tee.on('error', cb);\n}\n\nfunction asPromise(opts) {\n\treturn new PinkiePromise(function (resolve, reject) {\n\t\tasCallback(opts, function (err, data, response) {\n\t\t\tif (response) {\n\t\t\t\tresponse.body = data;\n\t\t\t}\n\n\t\t\tif (err) {\n\t\t\t\tObject.defineProperty(err, 'response', {\n\t\t\t\t\tvalue: response,\n\t\t\t\t\tenumerable: false\n\t\t\t\t});\n\t\t\t\treject(err);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresolve(response);\n\t\t});\n\t});\n}\n\nfunction asStream(opts) {\n\tvar input = new PassThrough();\n\tvar output = new PassThrough();\n\tvar proxy = duplexer2(input, output);\n\n\tif (opts.json) {\n\t\tthrow new Error('got can not be used as stream when options.json is used');\n\t}\n\n\tif (opts.body) {\n\t\tproxy.write = function () {\n\t\t\tthrow new Error('got\\'s stream is not writable when options.body is used');\n\t\t};\n\t}\n\n\tvar ee = requestAsEventEmitter(opts);\n\n\tee.on('request', function (req) {\n\t\tproxy.emit('request', req);\n\n\t\tif (isStream(opts.body)) {\n\t\t\topts.body.pipe(req);\n\t\t\treturn;\n\t\t}\n\n\t\tif (opts.body) {\n\t\t\treq.end(opts.body);\n\t\t\treturn;\n\t\t}\n\n\t\tif (opts.method === 'POST' || opts.method === 'PUT' || opts.method === 'PATCH') {\n\t\t\tinput.pipe(req);\n\t\t\treturn;\n\t\t}\n\n\t\treq.end();\n\t});\n\n\tee.on('response', function (res) {\n\t\tvar statusCode = res.statusCode;\n\t\tvar limitStatusCode = opts.followRedirect ? 299 : 399;\n\n\t\tres.pipe(output);\n\n\t\tif (statusCode < 200 || statusCode > limitStatusCode) {\n\t\t\tproxy.emit('error', new got.HTTPError(statusCode, opts), null, res);\n\t\t\treturn;\n\t\t}\n\n\t\tproxy.emit('response', res);\n\t});\n\n\tee.on('redirect', proxy.emit.bind(proxy, 'redirect'));\n\n\tee.on('error', proxy.emit.bind(proxy, 'error'));\n\n\treturn proxy;\n}\n\nfunction normalizeArguments(url, opts) {\n\tif (typeof url !== 'string' && typeof url !== 'object') {\n\t\tthrow new Error('Parameter `url` must be a string or object, not ' + typeof url);\n\t}\n\n\tif (typeof url === 'string') {\n\t\turl = urlParseLax(url);\n\n\t\tif (url.auth) {\n\t\t\tthrow new Error('Basic authentication must be done with auth option');\n\t\t}\n\t}\n\n\topts = objectAssign(\n\t\t{protocol: 'http:', path: '', retries: 5},\n\t\turl,\n\t\topts\n\t);\n\n\topts.headers = objectAssign({\n\t\t'user-agent': pkg.name + '/' + pkg.version + ' (https://github.com/sindresorhus/got)',\n\t\t'accept-encoding': 'gzip,deflate'\n\t}, lowercaseKeys(opts.headers));\n\n\tvar query = opts.query;\n\n\tif (query) {\n\t\tif (typeof query !== 'string') {\n\t\t\topts.query = querystring.stringify(query);\n\t\t}\n\n\t\topts.path = opts.path.split('?')[0] + '?' + opts.query;\n\t\tdelete opts.query;\n\t}\n\n\tif (opts.json && opts.headers.accept === undefined) {\n\t\topts.headers.accept = 'application/json';\n\t}\n\n\tvar body = opts.body;\n\n\tif (body) {\n\t\tif (typeof body !== 'string' && !Buffer.isBuffer(body) && !isStream(body) && !isPlainObj(body)) {\n\t\t\tthrow new Error('options.body must be a ReadableStream, string, Buffer or plain Object');\n\t\t}\n\n\t\topts.method = opts.method || 'POST';\n\n\t\tif (isPlainObj(body)) {\n\t\t\topts.headers['content-type'] = opts.headers['content-type'] || 'application/x-www-form-urlencoded';\n\t\t\tbody = opts.body = querystring.stringify(body);\n\t\t}\n\n\t\tif (opts.headers['content-length'] === undefined && opts.headers['transfer-encoding'] === undefined && !isStream(body)) {\n\t\t\tvar length = typeof body === 'string' ? Buffer.byteLength(body) : body.length;\n\t\t\topts.headers['content-length'] = length;\n\t\t}\n\t}\n\n\topts.method = opts.method || 'GET';\n\n\topts.method = opts.method.toUpperCase();\n\n\tif (opts.hostname === 'unix') {\n\t\tvar matches = /(.+)\\:(.+)/.exec(opts.path);\n\n\t\tif (matches) {\n\t\t\topts.socketPath = matches[1];\n\t\t\topts.path = matches[2];\n\t\t\topts.host = null;\n\t\t}\n\t}\n\n\tif (typeof opts.retries !== 'function') {\n\t\tvar retries = opts.retries;\n\t\topts.retries = function backoff(iter, err) {\n\t\t\tif (iter > retries || !isRetryAllowed(err)) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tvar noise = Math.random() * 100;\n\t\t\treturn (1 << iter) * 1000 + noise;\n\t\t};\n\t}\n\n\tif (opts.followRedirect === undefined) {\n\t\topts.followRedirect = true;\n\t}\n\n\treturn opts;\n}\n\nfunction got(url, opts, cb) {\n\tif (typeof opts === 'function') {\n\t\tcb = opts;\n\t\topts = {};\n\t}\n\n\tif (cb) {\n\t\tasCallback(normalizeArguments(url, opts), cb);\n\t\treturn null;\n\t}\n\n\ttry {\n\t\treturn asPromise(normalizeArguments(url, opts));\n\t} catch (error) {\n\t\treturn PinkiePromise.reject(error);\n\t}\n}\n\nvar helpers = [\n\t'get',\n\t'post',\n\t'put',\n\t'patch',\n\t'head',\n\t'delete'\n];\n\nhelpers.forEach(function (el) {\n\tgot[el] = function (url, opts, cb) {\n\t\tif (typeof opts === 'function') {\n\t\t\tcb = opts;\n\t\t\topts = {};\n\t\t}\n\n\t\treturn got(url, objectAssign({}, opts, {method: el}), cb);\n\t};\n});\n\ngot.stream = function (url, opts, cb) {\n\tif (cb || typeof opts === 'function') {\n\t\tthrow new Error('callback can not be used with stream mode');\n\t}\n\n\treturn asStream(normalizeArguments(url, opts));\n};\n\nhelpers.forEach(function (el) {\n\tgot.stream[el] = function (url, opts, cb) {\n\t\tif (typeof opts === 'function') {\n\t\t\tcb = opts;\n\t\t\topts = {};\n\t\t}\n\n\t\treturn got.stream(url, objectAssign({}, opts, {method: el}), cb);\n\t};\n});\n\nfunction stdError(error, opts) {\n\tif (error.code !== undefined) {\n\t\tthis.code = error.code;\n\t}\n\n\tobjectAssign(this, {\n\t\tmessage: error.message,\n\t\thost: opts.host,\n\t\thostname: opts.hostname,\n\t\tmethod: opts.method,\n\t\tpath: opts.path\n\t});\n}\n\ngot.RequestError = createErrorClass('RequestError', stdError);\ngot.ReadError = createErrorClass('ReadError', stdError);\n\ngot.ParseError = createErrorClass('ParseError', function (e, statusCode, opts) {\n\tstdError.call(this, e, opts);\n\tthis.statusCode = statusCode;\n\tthis.statusMessage = nodeStatusCodes[this.statusCode];\n});\n\ngot.HTTPError = createErrorClass('HTTPError', function (statusCode, opts) {\n\tstdError.call(this, {}, opts);\n\tthis.statusCode = statusCode;\n\tthis.statusMessage = nodeStatusCodes[this.statusCode];\n\tthis.message = 'Response code ' + this.statusCode + ' (' + this.statusMessage + ')';\n});\n\ngot.MaxRedirectsError = createErrorClass('MaxRedirectsError', function (statusCode, opts) {\n\tstdError.call(this, {}, opts);\n\tthis.statusCode = statusCode;\n\tthis.statusMessage = nodeStatusCodes[this.statusCode];\n\tthis.message = 'Redirected 10 times. Aborting.';\n});\n\nmodule.exports = got;\n"]}