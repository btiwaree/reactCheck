{"version":3,"sources":["inflight.js"],"names":[],"mappings":"AAAA,IAAI,SAAS,QAAQ,QAAR,CAAT;AACJ,IAAI,OAAO,OAAO,MAAP,CAAc,IAAd,CAAP;AACJ,IAAI,OAAO,QAAQ,MAAR,CAAP;;AAEJ,OAAO,OAAP,GAAiB,OAAO,QAAP,CAAjB;;AAEA,SAAS,QAAT,CAAmB,GAAnB,EAAwB,EAAxB,EAA4B;AAC1B,MAAI,KAAK,GAAL,CAAJ,EAAe;AACb,SAAK,GAAL,EAAU,IAAV,CAAe,EAAf,EADa;AAEb,WAAO,IAAP,CAFa;GAAf,MAGO;AACL,SAAK,GAAL,IAAY,CAAC,EAAD,CAAZ,CADK;AAEL,WAAO,QAAQ,GAAR,CAAP,CAFK;GAHP;CADF;;AAUA,SAAS,OAAT,CAAkB,GAAlB,EAAuB;AACrB,SAAO,KAAK,SAAS,GAAT,GAAgB;AAC1B,QAAI,MAAM,KAAK,GAAL,CAAN,CADsB;AAE1B,QAAI,MAAM,IAAI,MAAJ,CAFgB;AAG1B,QAAI,OAAO,MAAM,SAAN,CAAP,CAHsB;AAI1B,SAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,GAAJ,EAAS,GAAzB,EAA8B;AAC5B,UAAI,CAAJ,EAAO,KAAP,CAAa,IAAb,EAAmB,IAAnB,EAD4B;KAA9B;AAGA,QAAI,IAAI,MAAJ,GAAa,GAAb,EAAkB;;;AAGpB,UAAI,MAAJ,CAAW,CAAX,EAAc,GAAd,EAHoB;AAIpB,cAAQ,QAAR,CAAiB,YAAY;AAC3B,YAAI,KAAJ,CAAU,IAAV,EAAgB,IAAhB,EAD2B;OAAZ,CAAjB,CAJoB;KAAtB,MAOO;AACL,aAAO,KAAK,GAAL,CAAP,CADK;KAPP;GAPU,CAAZ,CADqB;CAAvB;;AAqBA,SAAS,KAAT,CAAgB,IAAhB,EAAsB;AACpB,MAAI,SAAS,KAAK,MAAL,CADO;AAEpB,MAAI,QAAQ,EAAR,CAFgB;;AAIpB,OAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,MAAJ,EAAY,GAA5B,EAAiC,MAAM,CAAN,IAAW,KAAK,CAAL,CAAX,CAAjC;AACA,SAAO,KAAP,CALoB;CAAtB","file":"inflight-compiled.js","sourcesContent":["var wrappy = require('wrappy')\nvar reqs = Object.create(null)\nvar once = require('once')\n\nmodule.exports = wrappy(inflight)\n\nfunction inflight (key, cb) {\n  if (reqs[key]) {\n    reqs[key].push(cb)\n    return null\n  } else {\n    reqs[key] = [cb]\n    return makeres(key)\n  }\n}\n\nfunction makeres (key) {\n  return once(function RES () {\n    var cbs = reqs[key]\n    var len = cbs.length\n    var args = slice(arguments)\n    for (var i = 0; i < len; i++) {\n      cbs[i].apply(null, args)\n    }\n    if (cbs.length > len) {\n      // added more in the interim.\n      // de-zalgo, just in case, but don't call again.\n      cbs.splice(0, len)\n      process.nextTick(function () {\n        RES.apply(null, args)\n      })\n    } else {\n      delete reqs[key]\n    }\n  })\n}\n\nfunction slice (args) {\n  var length = args.length\n  var array = []\n\n  for (var i = 0; i < length; i++) array[i] = args[i]\n  return array\n}\n"]}