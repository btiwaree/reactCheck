{"version":3,"sources":["selector.js"],"names":[],"mappings":"AAAA,CAAC,YAAW;AACV,MAAI,QAAJ;MAAc,WAAd;MAA2B,QAA3B;MAAqC,QAArC;MAA+C,KAA/C;MACE,SAAS,UAAS,KAAT,EAAgB,MAAhB,EAAwB;AAAE,SAAK,IAAI,GAAJ,IAAW,MAAhB,EAAwB;AAAE,UAAI,QAAQ,IAAR,CAAa,MAAb,EAAqB,GAArB,CAAJ,EAA+B,MAAM,GAAN,IAAa,OAAO,GAAP,CAAb,CAA/B;KAA1B,SAA8F,IAAT,GAAgB;AAAE,WAAK,WAAL,GAAmB,KAAnB,CAAF;KAAhB,IAA8C,CAAK,SAAL,GAAiB,OAAO,SAAP,CAAtJ,KAAwK,CAAM,SAAN,GAAkB,IAAI,IAAJ,EAAlB,CAAxK,KAAsM,CAAM,SAAN,GAAkB,OAAO,SAAP,CAAxN,OAAiP,KAAP,CAA1O;GAAxB;MACT,UAAU,GAAG,cAAH,CAHF;;AAKV,gBAAc,QAAQ,gBAAR,CAAd,CALU;;AAOV,aAAW,QAAQ,YAAR,CAAX,CAPU;;AASV,aAAW,QAAQ,YAAR,CAAX,CATU;;AAWV,UAAQ,QAAQ,SAAR,CAAR,CAXU;;AAaV,aAAW,UAAU,UAAT,EAAqB;AAC/B,WAAO,QAAP,EAAiB,UAAjB,EAD+B;;AAG/B,aAAS,QAAT,CAAkB,KAAlB,EAAyB,QAAzB,EAAmC,GAAnC,EAAwC;AACtC,WAAK,IAAL,GAAY,KAAZ,CADsC;AAEtC,WAAK,QAAL,GAAgB,QAAhB,CAFsC;AAGtC,WAAK,GAAL,GAAW,GAAX,CAHsC;AAItC,WAAK,WAAL,GAAmB,EAAnB,CAJsC;KAAxC;;AAOA,aAAS,SAAT,CAAmB,KAAnB,GAA2B,UAAS,IAAT,EAAe;AACxC,UAAI,KAAK,QAAL,CAAc,OAAd,CAAsB,KAAK,IAAL,CAAtB,KAAqC,CAAC,CAAD,EAAI;AAC3C,eAAO,CAAC,CAAC,KAAK,QAAL,CAAc,KAAd,CAAoB,KAAK,MAAL,EAApB,CAAD,CADmC;OAA7C,MAEO;AACL,eAAO,KAAP,CADK;OAFP;KADyB,CAVI;;AAkB/B,aAAS,SAAT,CAAmB,QAAnB,GAA8B,UAAS,MAAT,EAAiB;AAC7C,aAAO,KAAK,IAAL,CAAU,OAAV,CAAkB,WAAlB,EAA+B,OAAO,MAAP,CAAtC,CAD6C;KAAjB,CAlBC;;AAsB/B,aAAS,SAAT,CAAmB,MAAnB,GAA4B,UAAS,MAAT,EAAiB;AAC3C,UAAI,IAAJ,CAD2C;AAE3C,UAAI,KAAK,WAAL,CAAiB,MAAjB,CAAJ,EAA8B;AAC5B,eAAO,KAAK,WAAL,CAAiB,MAAjB,CAAP,CAD4B;OAA9B;AAGA,aAAO,SAAS,KAAK,QAAL,CAAc,MAAd,CAAT,GAAiC,KAAK,IAAL,CALG;AAM3C,aAAO,KAAK,WAAL,CAAiB,MAAjB,IAA2B,OAAO,iBAAkB,MAAM,YAAN,CAAmB,IAAnB,CAAlB,EAA6C,IAApD,CAA3B,CANoC;KAAjB,CAtBG;;AA+B/B,aAAS,SAAT,CAAmB,QAAnB,GAA8B,YAAW;AACvC,aAAO,SAAS,QAAT,EAAP,CADuC;KAAX,CA/BC;;AAmC/B,aAAS,SAAT,CAAmB,SAAnB,GAA+B,UAAS,IAAT,EAAe;AAC5C,UAAI,CAAJ,EAAO,GAAP,EAAY,MAAZ,EAAoB,SAApB,EAA+B,GAA/B,CAD4C;AAE5C,UAAI,KAAK,sBAAL,EAA6B;AAC/B,eAAO,KAAK,sBAAL,CADwB;OAAjC;AAGA,kBAAY,EAAZ,CAL4C;AAM5C,YAAM,KAAK,QAAL,EAAN,CAN4C;AAO5C,WAAK,IAAI,CAAJ,EAAO,MAAM,IAAI,MAAJ,EAAY,IAAI,GAAJ,EAAS,GAAvC,EAA4C;AAC1C,iBAAS,IAAI,CAAJ,CAAT,CAD0C;AAE1C,kBAAU,MAAV,IAAoB,KAAK,OAAL,CAAa,KAAK,QAAL,EAAe,MAA5B,CAApB,CAF0C;OAA5C;AAIA,aAAO,KAAK,sBAAL,GAA8B,SAA9B,CAXqC;KAAf,CAnCA;;AAiD/B,aAAS,SAAT,CAAmB,OAAnB,GAA6B,UAAS,IAAT,EAAe,SAAf,EAA0B,MAA1B,EAAkC;AAC7D,UAAI,MAAJ,EAAY,KAAZ,EAAmB,GAAnB,EAAwB,QAAxB,EAAkC,IAAlC,CAD6D;AAE7D,cAAQ,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,IAA0B,CAA1B,CAFqD;AAG7D,aAAO,SAAS,CAAT,EAAY;AACjB,iBAAS,KAAK,MAAL,CAAY,KAAZ,CAAkB,KAAlB,CAAT,CADiB;AAEjB,YAAI,OAAO,IAAP,KAAgB,MAAhB,EAAwB;AAC1B,iBAAO,KAAP,CAD0B;SAA5B;AAGA,eAAO,KAAP,CALiB;AAMjB,aAAK,GAAL,IAAY,SAAZ,EAAuB;AACrB,qBAAW,UAAU,GAAV,CAAX,CADqB;AAErB,cAAI,OAAO,QAAP,KAAoB,QAApB,EAA8B;AAChC,gBAAI,WAAW,GAAX,EAAgB;AAClB,qBAAO,IAAP,CADkB;aAApB,MAEO;AACL,qBAAO,IAAP,CADK;AAEL,oBAFK;aAFP;WADF;SAFF;AAWA,YAAI,CAAC,IAAD,EAAO;AACT,iBAAO,KAAP,CADS;SAAX;AAGA,iBAAS,CAAT,CApBiB;OAAnB;AAsBA,aAAO,KAAP,CAzB6D;KAAlC,CAjDE;;AA6E/B,aAAS,SAAT,CAAmB,OAAnB,GAA6B,UAAS,QAAT,EAAmB,MAAnB,EAA2B;AACtD,aAAO,SAAS,OAAT,CAAiB,KAAK,MAAL,EAAjB,EAAgC,OAAO,KAAK,QAAL,CAAc,MAAd,CAAP,CAAvC,CADsD;KAA3B,CA7EE;;AAiF/B,aAAS,SAAT,CAAmB,GAAnB,GAAyB,UAAS,IAAT,EAAe,MAAf,EAAuB;AAC9C,UAAI,MAAJ,EAAY,SAAZ,CAD8C;AAE9C,kBAAY,KAAK,SAAL,CAAe,IAAf,CAAZ,CAF8C;AAG9C,UAAI,KAAK,OAAL,CAAa,IAAb,EAAmB,SAAnB,EAA8B,MAA9B,CAAJ,EAA2C;AACzC,eADyC;OAA3C;AAGA,eAAS,KAAK,KAAL,CAAW,IAAX,EAAiB;AACxB,kBAAU,UAAU,MAAV,CAAV;OADO,CAAT,CAN8C;AAS9C,aAAO,KAAK,MAAL,CAAY,YAAZ,CAAyB,IAAzB,EAA+B,MAA/B,CAAP,CAT8C;KAAvB,CAjFM;;AA6F/B,aAAS,SAAT,CAAmB,GAAnB,GAAyB,UAAS,MAAT,EAAiB;AACxC,aAAO,IAAI,WAAJ,CAAgB,IAAhB,EAAsB,MAAtB,CAAP,CADwC;KAAjB,CA7FM;;AAiG/B,WAAO,QAAP,CAjG+B;GAArB,CAmGT,QAnGQ,CAAX,CAbU;;AAkHV,SAAO,OAAP,GAAiB,QAAjB,CAlHU;CAAX,CAAD,CAoHG,IApHH,CAoHQ,IApHR","file":"selector-compiled.js","sourcesContent":["(function() {\n  var Browsers, OldSelector, Prefixer, Selector, utils,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  OldSelector = require('./old-selector');\n\n  Prefixer = require('./prefixer');\n\n  Browsers = require('./browsers');\n\n  utils = require('./utils');\n\n  Selector = (function(superClass) {\n    extend(Selector, superClass);\n\n    function Selector(name1, prefixes, all) {\n      this.name = name1;\n      this.prefixes = prefixes;\n      this.all = all;\n      this.regexpCache = {};\n    }\n\n    Selector.prototype.check = function(rule) {\n      if (rule.selector.indexOf(this.name) !== -1) {\n        return !!rule.selector.match(this.regexp());\n      } else {\n        return false;\n      }\n    };\n\n    Selector.prototype.prefixed = function(prefix) {\n      return this.name.replace(/^([^\\w]*)/, '$1' + prefix);\n    };\n\n    Selector.prototype.regexp = function(prefix) {\n      var name;\n      if (this.regexpCache[prefix]) {\n        return this.regexpCache[prefix];\n      }\n      name = prefix ? this.prefixed(prefix) : this.name;\n      return this.regexpCache[prefix] = RegExp(\"(^|[^:\\\"'=])\" + (utils.escapeRegexp(name)), \"gi\");\n    };\n\n    Selector.prototype.possible = function() {\n      return Browsers.prefixes();\n    };\n\n    Selector.prototype.prefixeds = function(rule) {\n      var i, len, prefix, prefixeds, ref;\n      if (rule._autoprefixerPrefixeds) {\n        return rule._autoprefixerPrefixeds;\n      }\n      prefixeds = {};\n      ref = this.possible();\n      for (i = 0, len = ref.length; i < len; i++) {\n        prefix = ref[i];\n        prefixeds[prefix] = this.replace(rule.selector, prefix);\n      }\n      return rule._autoprefixerPrefixeds = prefixeds;\n    };\n\n    Selector.prototype.already = function(rule, prefixeds, prefix) {\n      var before, index, key, prefixed, some;\n      index = rule.parent.index(rule) - 1;\n      while (index >= 0) {\n        before = rule.parent.nodes[index];\n        if (before.type !== 'rule') {\n          return false;\n        }\n        some = false;\n        for (key in prefixeds) {\n          prefixed = prefixeds[key];\n          if (before.selector === prefixed) {\n            if (prefix === key) {\n              return true;\n            } else {\n              some = true;\n              break;\n            }\n          }\n        }\n        if (!some) {\n          return false;\n        }\n        index -= 1;\n      }\n      return false;\n    };\n\n    Selector.prototype.replace = function(selector, prefix) {\n      return selector.replace(this.regexp(), '$1' + this.prefixed(prefix));\n    };\n\n    Selector.prototype.add = function(rule, prefix) {\n      var cloned, prefixeds;\n      prefixeds = this.prefixeds(rule);\n      if (this.already(rule, prefixeds, prefix)) {\n        return;\n      }\n      cloned = this.clone(rule, {\n        selector: prefixeds[prefix]\n      });\n      return rule.parent.insertBefore(rule, cloned);\n    };\n\n    Selector.prototype.old = function(prefix) {\n      return new OldSelector(this, prefix);\n    };\n\n    return Selector;\n\n  })(Prefixer);\n\n  module.exports = Selector;\n\n}).call(this);\n"]}