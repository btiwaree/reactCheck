{"version":3,"sources":["old-selector.js"],"names":[],"mappings":"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","file":"old-selector-compiled.js","sourcesContent":["(function() {\n  var OldSelector;\n\n  OldSelector = (function() {\n    function OldSelector(selector, prefix1) {\n      var i, len, prefix, ref;\n      this.prefix = prefix1;\n      this.prefixed = selector.prefixed(this.prefix);\n      this.regexp = selector.regexp(this.prefix);\n      this.prefixeds = [];\n      ref = selector.possible();\n      for (i = 0, len = ref.length; i < len; i++) {\n        prefix = ref[i];\n        this.prefixeds.push([selector.prefixed(prefix), selector.regexp(prefix)]);\n      }\n      this.unprefixed = selector.name;\n      this.nameRegexp = selector.regexp();\n    }\n\n    OldSelector.prototype.isHack = function(rule) {\n      var before, i, index, len, ref, ref1, regexp, rules, some, string;\n      index = rule.parent.index(rule) + 1;\n      rules = rule.parent.nodes;\n      while (index < rules.length) {\n        before = rules[index].selector;\n        if (!before) {\n          return true;\n        }\n        if (before.indexOf(this.unprefixed) !== -1 && before.match(this.nameRegexp)) {\n          return false;\n        }\n        some = false;\n        ref = this.prefixeds;\n        for (i = 0, len = ref.length; i < len; i++) {\n          ref1 = ref[i], string = ref1[0], regexp = ref1[1];\n          if (before.indexOf(string) !== -1 && before.match(regexp)) {\n            some = true;\n            break;\n          }\n        }\n        if (!some) {\n          return true;\n        }\n        index += 1;\n      }\n      return true;\n    };\n\n    OldSelector.prototype.check = function(rule) {\n      if (rule.selector.indexOf(this.prefixed) === -1) {\n        return false;\n      }\n      if (!rule.selector.match(this.regexp)) {\n        return false;\n      }\n      if (this.isHack(rule)) {\n        return false;\n      }\n      return true;\n    };\n\n    return OldSelector;\n\n  })();\n\n  module.exports = OldSelector;\n\n}).call(this);\n"]}