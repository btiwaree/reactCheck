{"version":3,"sources":["install.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,OAAO,QAAQ,MAAR,CAAP;AACJ,IAAI,WAAW,QAAQ,WAAR,CAAX;AACJ,IAAI,MAAM,QAAQ,SAAR,CAAN;AACJ,IAAI,MAAM,QAAQ,IAAR,CAAN;AACJ,IAAI,OAAO,CACV,OADU,EACD,MADC,EAEV,WAFU,EAGV,UAHU,EAGE,KAAK,IAAL,CAAU,SAAV,EAAqB,qCAArB,CAHF,EAIV,KAAK,IAAL,CAAU,SAAV,EAAqB,2BAArB,CAJU,CAAP;;AAOJ,IAAI,GAAJ,CAAQ,IAAR,EAAc,UAAU,GAAV,EAAe;AAC5B,KAAI,GAAJ,EAAS;AACR,MAAI,IAAJ,CAAS,IAAI,OAAJ,CAAT,CADQ;AAER,MAAI,IAAJ,CAAS,gCAAT,EAFQ;AAGR,MAAI,IAAJ,CAAS,uBAAT,EAHQ;;AAKR,MAAI,MAAM,CACT,8BADS,EAET,eAAe,IAAI,IAAJ,EAAf,GAA4B,cAA5B,GAA6C,IAAI,IAAJ,EAA7C,GAA0D,GAA1D,CAFS,CAGR,IAHQ,CAGH,GAHG,CAAN,CALI;;AAUR,MAAI,UAAU,IAAI,QAAJ,GACZ,GADY,CACR,iEADQ,EAEZ,GAFY,CAER,0FAFQ,EAGZ,GAHY,CAGR,GAHQ,EAIZ,GAJY,CAIR,cAJQ,CAAV,CAVI;;AAgBR,SAAO,QAAQ,GAAR,CAAY,UAAU,GAAV,EAAe;AACjC,OAAI,GAAJ,EAAS;AACR,QAAI,KAAJ,CAAU,IAAI,KAAJ,CAAV,CADQ;AAER,WAFQ;IAAT;;AAKA,OAAI,OAAJ,CAAY,6BAAZ,EANiC;GAAf,CAAnB,CAhBQ;EAAT;;AA0BA,KAAI,OAAJ,CAAY,6CAAZ,EA3B4B;CAAf,CAAd","file":"install-compiled.js","sourcesContent":["'use strict';\n\nvar path = require('path');\nvar BinBuild = require('bin-build');\nvar log = require('logalot');\nvar bin = require('./');\nvar args = [\n\t'-copy', 'none',\n\t'-optimize',\n\t'-outfile', path.join(__dirname, '../test/fixtures/test-optimized.jpg'),\n\tpath.join(__dirname, '../test/fixtures/test.jpg')\n];\n\nbin.run(args, function (err) {\n\tif (err) {\n\t\tlog.warn(err.message);\n\t\tlog.warn('jpegtran pre-build test failed');\n\t\tlog.info('compiling from source');\n\n\t\tvar cfg = [\n\t\t\t'./configure --disable-shared',\n\t\t\t'--prefix=\"' + bin.dest() + '\" --bindir=\"' + bin.dest() + '\"'\n\t\t].join(' ');\n\n\t\tvar builder = new BinBuild()\n\t\t\t.cmd('touch configure.ac aclocal.m4 configure Makefile.am Makefile.in')\n\t\t\t.src('https://downloads.sourceforge.net/project/libjpeg-turbo/1.4.2/libjpeg-turbo-1.4.2.tar.gz')\n\t\t\t.cmd(cfg)\n\t\t\t.cmd('make install');\n\n\t\treturn builder.run(function (err) {\n\t\t\tif (err) {\n\t\t\t\tlog.error(err.stack);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlog.success('jpegtran built successfully');\n\t\t});\n\t}\n\n\tlog.success('jpegtran pre-build test passed successfully');\n});\n"]}