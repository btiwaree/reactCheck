{"version":3,"sources":["test.js"],"names":[],"mappings":"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","file":"test-compiled.js","sourcesContent":["var fdSlicer = require('../');\nvar fs = require('fs');\nvar crypto = require('crypto');\nvar path = require('path');\nvar streamEqual = require('stream-equal');\nvar assert = require('assert');\nvar Pend = require('pend');\nvar StreamSink = require('streamsink');\n\nvar describe = global.describe;\nvar it = global.it;\nvar before = global.before;\nvar beforeEach = global.beforeEach;\nvar after = global.after;\n\nvar testBlobFile = path.join(__dirname, \"test-blob.bin\");\nvar testBlobFileSize = 20 * 1024 * 1024;\nvar testOutBlobFile = path.join(__dirname, \"test-blob-out.bin\");\n\ndescribe(\"FdSlicer\", function() {\n  before(function(done) {\n    var out = fs.createWriteStream(testBlobFile);\n    for (var i = 0; i < testBlobFileSize / 1024; i += 1) {\n      out.write(crypto.pseudoRandomBytes(1024));\n    }\n    out.end();\n    out.on('close', done);\n  });\n  beforeEach(function() {\n    try {\n      fs.unlinkSync(testOutBlobFile);\n    } catch (err) {\n    }\n  });\n  after(function() {\n    try {\n      fs.unlinkSync(testBlobFile);\n      fs.unlinkSync(testOutBlobFile);\n    } catch (err) {\n    }\n  });\n  it(\"reads a 20MB file (autoClose on)\", function(done) {\n    fs.open(testBlobFile, 'r', function(err, fd) {\n      if (err) return done(err);\n      var slicer = fdSlicer.createFromFd(fd, {autoClose: true});\n      var actualStream = slicer.createReadStream();\n      var expectedStream = fs.createReadStream(testBlobFile);\n\n      var pend = new Pend();\n      pend.go(function(cb) {\n        slicer.on('close', cb);\n      });\n      pend.go(function(cb) {\n        streamEqual(expectedStream, actualStream, function(err, equal) {\n          if (err) return done(err);\n          assert.ok(equal);\n          cb();\n        });\n      });\n      pend.wait(done);\n    });\n  });\n  it(\"reads 4 chunks simultaneously\", function(done) {\n    fs.open(testBlobFile, 'r', function(err, fd) {\n      if (err) return done(err);\n      var slicer = fdSlicer.createFromFd(fd);\n      var actualPart1 = slicer.createReadStream({start: testBlobFileSize * 0/4, end: testBlobFileSize * 1/4});\n      var actualPart2 = slicer.createReadStream({start: testBlobFileSize * 1/4, end: testBlobFileSize * 2/4});\n      var actualPart3 = slicer.createReadStream({start: testBlobFileSize * 2/4, end: testBlobFileSize * 3/4});\n      var actualPart4 = slicer.createReadStream({start: testBlobFileSize * 3/4, end: testBlobFileSize * 4/4});\n      var expectedPart1 = slicer.createReadStream({start: testBlobFileSize * 0/4, end: testBlobFileSize * 1/4});\n      var expectedPart2 = slicer.createReadStream({start: testBlobFileSize * 1/4, end: testBlobFileSize * 2/4});\n      var expectedPart3 = slicer.createReadStream({start: testBlobFileSize * 2/4, end: testBlobFileSize * 3/4});\n      var expectedPart4 = slicer.createReadStream({start: testBlobFileSize * 3/4, end: testBlobFileSize * 4/4});\n      var pend = new Pend();\n      pend.go(function(cb) {\n        streamEqual(expectedPart1, actualPart1, function(err, equal) {\n          assert.ok(equal);\n          cb(err);\n        });\n      });\n      pend.go(function(cb) {\n        streamEqual(expectedPart2, actualPart2, function(err, equal) {\n          assert.ok(equal);\n          cb(err);\n        });\n      });\n      pend.go(function(cb) {\n        streamEqual(expectedPart3, actualPart3, function(err, equal) {\n          assert.ok(equal);\n          cb(err);\n        });\n      });\n      pend.go(function(cb) {\n        streamEqual(expectedPart4, actualPart4, function(err, equal) {\n          assert.ok(equal);\n          cb(err);\n        });\n      });\n      pend.wait(function(err) {\n        if (err) return done(err);\n        fs.close(fd, done);\n      });\n    });\n  });\n\n  it(\"writes a 20MB file (autoClose on)\", function(done) {\n    fs.open(testOutBlobFile, 'w', function(err, fd) {\n      if (err) return done(err);\n      var slicer = fdSlicer.createFromFd(fd, {autoClose: true});\n      var actualStream = slicer.createWriteStream();\n      var inStream = fs.createReadStream(testBlobFile);\n\n      slicer.on('close', function() {\n        var expected = fs.createReadStream(testBlobFile);\n        var actual = fs.createReadStream(testOutBlobFile);\n\n        streamEqual(expected, actual, function(err, equal) {\n          if (err) return done(err);\n          assert.ok(equal);\n          done();\n        });\n      });\n      inStream.pipe(actualStream);\n    });\n  });\n\n  it(\"writes 4 chunks simultaneously\", function(done) {\n    fs.open(testOutBlobFile, 'w', function(err, fd) {\n      if (err) return done(err);\n      var slicer = fdSlicer.createFromFd(fd);\n      var actualPart1 = slicer.createWriteStream({start: testBlobFileSize * 0/4});\n      var actualPart2 = slicer.createWriteStream({start: testBlobFileSize * 1/4});\n      var actualPart3 = slicer.createWriteStream({start: testBlobFileSize * 2/4});\n      var actualPart4 = slicer.createWriteStream({start: testBlobFileSize * 3/4});\n      var in1 = fs.createReadStream(testBlobFile, {start: testBlobFileSize * 0/4, end: testBlobFileSize * 1/4});\n      var in2 = fs.createReadStream(testBlobFile, {start: testBlobFileSize * 1/4, end: testBlobFileSize * 2/4});\n      var in3 = fs.createReadStream(testBlobFile, {start: testBlobFileSize * 2/4, end: testBlobFileSize * 3/4});\n      var in4 = fs.createReadStream(testBlobFile, {start: testBlobFileSize * 3/4, end: testBlobFileSize * 4/4});\n      var pend = new Pend();\n      pend.go(function(cb) {\n        actualPart1.on('finish', cb);\n      });\n      pend.go(function(cb) {\n        actualPart2.on('finish', cb);\n      });\n      pend.go(function(cb) {\n        actualPart3.on('finish', cb);\n      });\n      pend.go(function(cb) {\n        actualPart4.on('finish', cb);\n      });\n      in1.pipe(actualPart1);\n      in2.pipe(actualPart2);\n      in3.pipe(actualPart3);\n      in4.pipe(actualPart4);\n      pend.wait(function() {\n        fs.close(fd, function(err) {\n          if (err) return done(err);\n          var expected = fs.createReadStream(testBlobFile);\n          var actual = fs.createReadStream(testOutBlobFile);\n          streamEqual(expected, actual, function(err, equal) {\n            if (err) return done(err);\n            assert.ok(equal);\n            done();\n          });\n        });\n      });\n    });\n  });\n\n  it(\"throws on invalid ref\", function(done) {\n    fs.open(testOutBlobFile, 'w', function(err, fd) {\n      if (err) return done(err);\n      var slicer = fdSlicer.createFromFd(fd, {autoClose: true});\n      assert.throws(function() {\n        slicer.unref();\n      }, /invalid unref/);\n      fs.close(fd, done);\n    });\n  });\n\n  it(\"write stream emits error when max size exceeded\", function(done) {\n    fs.open(testOutBlobFile, 'w', function(err, fd) {\n      if (err) return done(err);\n      var slicer = fdSlicer.createFromFd(fd, {autoClose: true});\n      var ws = slicer.createWriteStream({start: 0, end: 1000});\n      ws.on('error', function(err) {\n        assert.strictEqual(err.code, 'ETOOBIG');\n        slicer.on('close', done);\n      });\n      ws.end(new Buffer(1001));\n    });\n  });\n\n  it(\"write stream does not emit error when max size not exceeded\", function(done) {\n    fs.open(testOutBlobFile, 'w', function(err, fd) {\n      if (err) return done(err);\n      var slicer = fdSlicer.createFromFd(fd, {autoClose: true});\n      var ws = slicer.createWriteStream({end: 1000});\n      slicer.on('close', done);\n      ws.end(new Buffer(1000));\n    });\n  });\n\n  it(\"write stream start and end work together\", function(done) {\n    fs.open(testOutBlobFile, 'w', function(err, fd) {\n      if (err) return done(err);\n      var slicer = fdSlicer.createFromFd(fd, {autoClose: true});\n      var ws = slicer.createWriteStream({start: 1, end: 1000});\n      ws.on('error', function(err) {\n        assert.strictEqual(err.code, 'ETOOBIG');\n        slicer.on('close', done);\n      });\n      ws.end(new Buffer(1000));\n    });\n  });\n\n  it(\"write stream emits progress events\", function(done) {\n    fs.open(testOutBlobFile, 'w', function(err, fd) {\n      if (err) return done(err);\n      var slicer = fdSlicer.createFromFd(fd, {autoClose: true});\n      var ws = slicer.createWriteStream();\n      var progressEventCount = 0;\n      var prevBytesWritten = 0;\n      ws.on('progress', function() {\n        progressEventCount += 1;\n        assert.ok(ws.bytesWritten > prevBytesWritten);\n        prevBytesWritten = ws.bytesWritten;\n      });\n      slicer.on('close', function() {\n        assert.ok(progressEventCount > 5);\n        done();\n      });\n      for (var i = 0; i < 10; i += 1) {\n        ws.write(new Buffer(16 * 1024 * 2));\n      }\n      ws.end();\n    });\n  });\n\n  it(\"write stream unrefs when destroyed\", function(done) {\n    fs.open(testOutBlobFile, 'w', function(err, fd) {\n      if (err) return done(err);\n      var slicer = fdSlicer.createFromFd(fd, {autoClose: true});\n      var ws = slicer.createWriteStream();\n      slicer.on('close', done);\n      ws.write(new Buffer(1000));\n      ws.destroy();\n    });\n  });\n\n  it(\"read stream unrefs when destroyed\", function(done) {\n    fs.open(testBlobFile, 'r', function(err, fd) {\n      if (err) return done(err);\n      var slicer = fdSlicer.createFromFd(fd, {autoClose: true});\n      var rs = slicer.createReadStream();\n      rs.on('error', function(err) {\n        assert.strictEqual(err.message, \"stream destroyed\");\n        slicer.on('close', done);\n      });\n      rs.destroy();\n    });\n  });\n\n  it(\"fdSlicer.read\", function(done) {\n    fs.open(testBlobFile, 'r', function(err, fd) {\n      if (err) return done(err);\n      var slicer = fdSlicer.createFromFd(fd);\n      var outBuf = new Buffer(1024);\n      slicer.read(outBuf, 0, 10, 0, function(err, bytesRead, buf) {\n        assert.strictEqual(bytesRead, 10);\n        fs.close(fd, done);\n      });\n    });\n  });\n\n  it(\"fdSlicer.write\", function(done) {\n    fs.open(testOutBlobFile, 'w', function(err, fd) {\n      if (err) return done(err);\n      var slicer = fdSlicer.createFromFd(fd);\n      slicer.write(new Buffer(\"blah\\n\"), 0, 5, 0, function() {\n        if (err) return done(err);\n        fs.close(fd, done);\n      });\n    });\n  });\n});\n\ndescribe(\"BufferSlicer\", function() {\n  it(\"invalid ref\", function() {\n    var slicer = fdSlicer.createFromBuffer(new Buffer(16));\n    slicer.ref();\n    slicer.unref();\n    assert.throws(function() {\n      slicer.unref();\n    }, /invalid unref/);\n  });\n  it(\"read and write\", function(done) {\n    var buf = new Buffer(\"through the tangled thread the needle finds its way\");\n    var slicer = fdSlicer.createFromBuffer(buf);\n    var outBuf = new Buffer(1024);\n    slicer.read(outBuf, 10, 11, 8, function(err) {\n      if (err) return done(err);\n      assert.strictEqual(outBuf.toString('utf8', 10, 21), \"the tangled\");\n      slicer.write(new Buffer(\"derp\"), 0, 4, 7, function(err) {\n        if (err) return done(err);\n        assert.strictEqual(buf.toString('utf8', 7, 19), \"derp tangled\");\n        done();\n      });\n    });\n  });\n  it(\"createReadStream\", function(done) {\n    var str = \"I never conquered rarely came, 16 just held such better days\";\n    var buf = new Buffer(str);\n    var slicer = fdSlicer.createFromBuffer(buf);\n    var inStream = slicer.createReadStream();\n    var sink = new StreamSink();\n    inStream.pipe(sink);\n    sink.on('finish', function() {\n      assert.strictEqual(sink.toString(), str);\n      inStream.destroy();\n      done();\n    });\n  });\n  it(\"createWriteStream exceed buffer size\", function(done) {\n    var slicer = fdSlicer.createFromBuffer(new Buffer(4));\n    var outStream = slicer.createWriteStream();\n    outStream.on('error', function(err) {\n      assert.strictEqual(err.code, 'ETOOBIG');\n      done();\n    });\n    outStream.write(\"hi!\\n\");\n    outStream.write(\"it warked\\n\");\n    outStream.end();\n  });\n  it(\"createWriteStream ok\", function(done) {\n    var buf = new Buffer(1024);\n    var slicer = fdSlicer.createFromBuffer(buf);\n    var outStream = slicer.createWriteStream();\n    outStream.on('finish', function() {\n      assert.strictEqual(buf.toString('utf8', 0, \"hi!\\nit warked\\n\".length), \"hi!\\nit warked\\n\");\n      outStream.destroy();\n      done();\n    });\n    outStream.write(\"hi!\\n\");\n    outStream.write(\"it warked\\n\");\n    outStream.end();\n  });\n});\n"]}