{"version":3,"sources":["test-adapter.js"],"names":[],"mappings":"AAAA,CAAC,YAAY;AACT,QAAI,SAAS,OAAO,MAAP,CADJ;AAET,QAAI,QAAQ,4BAAR,CAFK;;AAIT,WAAO,gBAAP,CAAwB,UAAxB,EAJS;;AAMT,aAAS,UAAT,CAAoB,MAApB,EAA2B;AACvB,YAAI,UAAU;AACV,oBAAQ,CAAR;AACE,oBAAQ,CAAR;AACA,mBAAO,CAAP;AACA,mBAAO,EAAP;SAJF,CADmB;;AAQvB,eAAO,IAAP,CAAY,aAAZ,EARuB;;AAUvB,eAAO,oBAAP,GAA8B,UAAS,GAAT,EAAa;AACvC,gBAAI,IAAI,IAAI,KAAJ,CAAU,KAAV,CAAJ,CADmC;AAEvC,gBAAI,CAAJ,EAAO;AACH,oBAAI,SAAS,EAAE,CAAF,MAAS,IAAT,CADV;AAEH,oBAAI,OAAO;AACP,4BAAQ,SAAS,CAAT,GAAa,CAAb;AACR,4BAAQ,SAAS,CAAT,GAAa,CAAb;AACR,2BAAO,CAAP;AACA,wBAAI,EAAE,CAAF,CAAJ;AACA,0BAAM,EAAE,CAAF,CAAN;AACA,2BAAO,EAAP;iBANA,CAFD;;AAWH,oBAAI,MAAJ,EAAY;AACR,4BAAQ,MAAR,GADQ;iBAAZ,MAEO;AACH,4BAAQ,KAAR,CAAc,SAAd,EAAyB,CAAzB,EADG;;AAGH,4BAAQ,MAAR,GAHG;iBAFP;;AAQA,wBAAQ,KAAR;;;AAnBG,sBAsBH,CAAO,IAAP,CAAY,aAAZ,EAA2B,IAA3B,EAtBG;AAuBH,wBAAQ,KAAR,CAAc,IAAd,CAAmB,IAAnB,EAvBG;aAAP,MAwBO,IAAI,QAAQ,MAAR,IAAkB,IAAI,KAAJ,CAAU,cAAV,CAAlB,EAA4C;;AAEnD,uBAAO,IAAP,CAAY,kBAAZ,EAAgC,OAAhC,EAFmD;aAAhD;;;;;AA1BgC,SAAb,CAVP;KAA3B;CANH,GAAD","file":"test-adapter-compiled.js","sourcesContent":["(function () {\n    var Testem = window.Testem\n    var regex = /^((?:not )?ok) (\\d+) (.+)$/\n\n    Testem.useCustomAdapter(tapAdapter)\n\n    function tapAdapter(socket){\n        var results = {\n            failed: 0\n            , passed: 0\n            , total: 0\n            , tests: []\n        }\n\n        socket.emit('tests-start')\n\n        Testem.handleConsoleMessage = function(msg){\n            var m = msg.match(regex)\n            if (m) {\n                var passed = m[1] === 'ok'\n                var test = {\n                    passed: passed ? 1 : 0,\n                    failed: passed ? 0 : 1,\n                    total: 1,\n                    id: m[2],\n                    name: m[3],\n                    items: []\n                }\n\n                if (passed) {\n                    results.passed++\n                } else {\n                    console.error(\"failure\", m)\n\n                    results.failed++\n                }\n\n                results.total++\n\n                // console.log(\"emitted test\", test)\n                socket.emit('test-result', test)\n                results.tests.push(test)\n            } else if (msg === '# ok' || msg.match(/^# tests \\d+/)){\n                // console.log(\"emitted all test\")\n                socket.emit('all-test-results', results)\n            }\n\n            // return false if you want to prevent the console message from\n            // going to the console\n            // return false\n        }\n    }\n}())\n"]}