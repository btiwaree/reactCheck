{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _postcss = require('postcss');\n\nvar _postcss2 = _interopRequireDefault(_postcss);\n\nvar _icssReplaceSymbols = require('icss-replace-symbols');\n\nvar _icssReplaceSymbols2 = _interopRequireDefault(_icssReplaceSymbols);\n\nvar matchImports = /^(.+?)\\s+from\\s+(\"[^\"]*\"|'[^']*'|[\\w-]+)$/;\nvar matchValueDefinition = /(?:,\\s+|^)([\\w-]+):?\\s+(\"[^\"]*\"|'[^']*'|\\w+\\([^\\)]+\\)|[^,]+)\\s?/g;\nvar matchImport = /^([\\w-]+)(?:\\s+as\\s+([\\w-]+))?/;\nvar options = {};\nvar importIndex = 0;\nvar createImportedName = options && options.createImportedName || function (importName /*, path*/) {\n  return 'i__const_' + importName.replace(/\\W/g, '_') + '_' + importIndex++;\n};\n\nexports['default'] = function (css, result) {\n  var importAliases = [];\n  var definitions = {};\n\n  var addDefinition = function addDefinition(atRule) {\n    var matches = undefined;\n    while (matches = matchValueDefinition.exec(atRule.params)) {\n      var _matches = matches;\n\n      var _matches2 = _slicedToArray(_matches, 3);\n\n      var /*match*/key = _matches2[1];\n      var value = _matches2[2];\n\n      // Add to the definitions, knowing that values can refer to each other\n      definitions[key] = (0, _icssReplaceSymbols.replaceAll)(definitions, value);\n      atRule.remove();\n    }\n  };\n\n  var addImport = function addImport(atRule) {\n    var matches = matchImports.exec(atRule.params);\n    if (matches) {\n      var _matches3 = _slicedToArray(matches, 3);\n\n      var /*match*/aliases = _matches3[1];\n      var path = _matches3[2];\n\n      // We can use constants for path names\n      if (definitions[path]) path = definitions[path];\n      var imports = aliases.split(/\\s*,\\s*/).map(function (alias) {\n        var tokens = matchImport.exec(alias);\n        if (tokens) {\n          var _tokens = _slicedToArray(tokens, 3);\n\n          var /*match*/theirName = _tokens[1];\n          var _tokens$2 = _tokens[2];\n          var myName = _tokens$2 === undefined ? theirName : _tokens$2;\n\n          var importedName = createImportedName(myName);\n          definitions[myName] = importedName;\n          return { theirName: theirName, importedName: importedName };\n        } else {\n          throw new Error('@import statement \"' + alias + '\" is invalid!');\n        }\n      });\n      importAliases.push({ path: path, imports: imports });\n      atRule.remove();\n    }\n  };\n\n  /* Look at all the @value statements and treat them as locals or as imports */\n  css.walkAtRules('value', function (atRule) {\n    if (matchImports.exec(atRule.params)) {\n      addImport(atRule);\n    } else {\n      if (atRule.params.indexOf('@value') !== -1) {\n        result.warn('Invalid value definition: ' + atRule.params);\n      }\n\n      addDefinition(atRule);\n    }\n  });\n\n  /* We want to export anything defined by now, but don't add it to the CSS yet or\n  it well get picked up by the replacement stuff */\n  var exportDeclarations = Object.keys(definitions).map(function (key) {\n    return _postcss2['default'].decl({\n      value: definitions[key],\n      prop: key,\n      raws: { before: \"\\n  \" },\n      _autoprefixerDisabled: true\n    });\n  });\n\n  /* If we have no definitions, don't continue */\n  if (!Object.keys(definitions).length) return;\n\n  /* Perform replacements */\n  (0, _icssReplaceSymbols2['default'])(css, definitions);\n\n  /* Add export rules if any */\n  if (exportDeclarations.length > 0) {\n    css.prepend(_postcss2['default'].rule({\n      selector: ':export',\n      raws: { after: \"\\n\" },\n      nodes: exportDeclarations\n    }));\n  }\n\n  /* Add import rules */\n  importAliases.reverse().forEach(function (_ref) {\n    var path = _ref.path;\n    var imports = _ref.imports;\n\n    css.prepend(_postcss2['default'].rule({\n      selector: ':import(' + path + ')',\n      raws: { after: \"\\n\" },\n      nodes: imports.map(function (_ref2) {\n        var theirName = _ref2.theirName;\n        var importedName = _ref2.importedName;\n        return _postcss2['default'].decl({\n          value: theirName,\n          prop: importedName,\n          raws: { before: \"\\n  \" },\n          _autoprefixerDisabled: true\n        });\n      })\n    }));\n  });\n};\n\nmodule.exports = exports['default'];"]}