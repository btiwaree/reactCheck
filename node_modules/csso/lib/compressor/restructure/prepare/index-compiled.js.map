{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA,IAAI,oBAAoB,QAAQ,mBAAR,EAA6B,KAA7B;AACxB,IAAI,iBAAiB,QAAQ,oBAAR,EAA8B,OAA9B;AACrB,IAAI,YAAY,QAAQ,wBAAR,CAAZ;AACJ,IAAI,2BAA2B,QAAQ,+BAAR,CAA3B;AACJ,IAAI,kBAAkB,QAAQ,sBAAR,CAAlB;;AAEJ,SAAS,IAAT,CAAc,IAAd,EAAoB,eAApB,EAAqC,SAArC,EAAgD;AAC5C,YAAQ,KAAK,IAAL;AACJ,aAAK,SAAL;AACI,iBAAK,KAAL,CAAW,YAAX,CAAwB,IAAxB,CAA6B,eAA7B,EADJ;AAEI,4BAAgB,IAAhB,EAAsB,SAAtB,EAFJ;AAGI,kBAHJ;;AADJ,aAMS,QAAL;AACI,gBAAI,KAAK,UAAL,EAAiB;AACjB,qBAAK,UAAL,CAAgB,EAAhB,GAAqB,UAAU,KAAK,UAAL,CAA/B,CADiB;aAArB;;;;AADJ,gBAOQ,eAAe,KAAK,IAAL,CAAf,CAA0B,IAA1B,KAAmC,WAAnC,EAAgD;AAChD,qBAAK,KAAL,CAAW,eAAX,GAA6B,IAA7B;;AADgD,oBAGhD,CAAK,KAAL,CAAW,KAAX,CAAiB,IAAjB,CAAsB,UAAS,OAAT,EAAkB;AACpC,4BAAQ,QAAR,CAAiB,SAAjB,CAA2B,IAA3B,CAAgC,UAAS,cAAT,EAAyB;AACrD,uCAAe,aAAf,GAA+B,eAAe,EAAf,CADsB;qBAAzB,CAAhC,CADoC;iBAAlB,CAAtB,CAHgD;aAApD;AASA,kBAhBJ;AANJ,KAD4C;CAAhD;;AA2BA,OAAO,OAAP,GAAiB,SAAS,OAAT,CAAiB,GAAjB,EAAsB,SAAtB,EAAiC;AAC9C,QAAI,kBAAkB,0BAAlB,CAD0C;;AAG9C,sBAAkB,GAAlB,EAAuB,UAAS,IAAT,EAAe;AAClC,aAAK,IAAL,EAAW,eAAX,EAA4B,SAA5B,EADkC;KAAf,CAAvB,CAH8C;;AAO9C,WAAO;AACH,qBAAa,eAAb;KADJ,CAP8C;CAAjC","file":"index-compiled.js","sourcesContent":["var internalWalkRules = require('../../ast/walk.js').rules;\nvar resolveKeyword = require('../../ast/names.js').keyword;\nvar translate = require('../../ast/translate.js');\nvar createDeclarationIndexer = require('./createDeclarationIndexer.js');\nvar processSelector = require('./processSelector.js');\n\nfunction walk(node, markDeclaration, usageData) {\n    switch (node.type) {\n        case 'Ruleset':\n            node.block.declarations.each(markDeclaration);\n            processSelector(node, usageData);\n            break;\n\n        case 'Atrule':\n            if (node.expression) {\n                node.expression.id = translate(node.expression);\n            }\n\n            // compare keyframe selectors by its values\n            // NOTE: still no clarification about problems with keyframes selector grouping (issue #197)\n            if (resolveKeyword(node.name).name === 'keyframes') {\n                node.block.avoidRulesMerge = true;  /* probably we don't need to prevent those merges for @keyframes\n                                                       TODO: need to be checked */\n                node.block.rules.each(function(ruleset) {\n                    ruleset.selector.selectors.each(function(simpleselector) {\n                        simpleselector.compareMarker = simpleselector.id;\n                    });\n                });\n            }\n            break;\n    }\n};\n\nmodule.exports = function prepare(ast, usageData) {\n    var markDeclaration = createDeclarationIndexer();\n\n    internalWalkRules(ast, function(node) {\n        walk(node, markDeclaration, usageData);\n    });\n\n    return {\n        declaration: markDeclaration\n    };\n};\n"]}