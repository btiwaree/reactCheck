{"version":3,"sources":["background.js"],"names":[],"mappings":"AAAA,IAAI,OAAO,QAAQ,wBAAR,CAAP;;AAEJ,OAAO,OAAP,GAAiB,SAAS,kBAAT,CAA4B,IAA5B,EAAkC;AAC/C,aAAS,QAAT,GAAoB;AAChB,YAAI,OAAO,MAAP,EAAe;AACf,mBAAO,OAAO,OAAO,MAAP,GAAgB,CAAhB,CAAP,CAA0B,IAA1B,CADQ;SAAnB;KADJ;;AAMA,aAAS,KAAT,GAAiB;AACb,YAAI,eAAe,OAAf,EAAwB;AACxB,mBAAO,GAAP,GADwB;SAA5B;;AAIA,YAAI,CAAC,OAAO,MAAP,EAAe;AAChB,mBAAO,OAAP,CACI;AACI,sBAAM,QAAN;AACA,uBAAO,GAAP;aAHR,EAKI;AACI,sBAAM,OAAN;aANR,EAQI;AACI,sBAAM,QAAN;AACA,uBAAO,GAAP;aAVR,EADgB;SAApB;;AAgBA,iBAAS,IAAT,CAAc,KAAd,CAAoB,QAApB,EAA8B,MAA9B,EArBa;;AAuBb,iBAAS,EAAT,CAvBa;KAAjB;;AA0BA,QAAI,WAAW,EAAX,CAjC2C;AAkC/C,QAAI,SAAS,EAAT,CAlC2C;;AAoC/C,SAAK,QAAL,CAAc,IAAd,CAAmB,UAAS,IAAT,EAAe;AAC9B,YAAI,KAAK,IAAL,KAAc,UAAd,IAA4B,KAAK,KAAL,KAAe,GAAf,EAAoB;AAChD,oBADgD;AAEhD,qBAAS,IAAT,CAAc,IAAd,EAFgD;AAGhD,mBAHgD;SAApD;;;AAD8B,YAQ1B,KAAK,IAAL,KAAc,YAAd,EAA4B;AAC5B,gBAAI,KAAK,IAAL,KAAc,aAAd,IACA,KAAK,IAAL,KAAc,MAAd,IACA,KAAK,IAAL,KAAc,QAAd,IACA,KAAK,IAAL,KAAc,QAAd,EAAwB;AACxB,uBADwB;aAH5B;SADJ;;;AAR8B,YAkB1B,KAAK,IAAL,KAAc,OAAd,KAA0B,CAAC,OAAO,MAAP,IAAiB,eAAe,OAAf,CAA5C,EAAqE;AACrE,mBADqE;SAAzE;;AAIA,eAAO,IAAP,CAAY,IAAZ,EAtB8B;KAAf,CAAnB,CApC+C;;AA6D/C,YA7D+C;AA8D/C,SAAK,QAAL,GAAgB,IAAI,IAAJ,CAAS,QAAT,CAAhB,CA9D+C;CAAlC","file":"background-compiled.js","sourcesContent":["var List = require('../../../utils/list.js');\n\nmodule.exports = function compressBackground(node) {\n    function lastType() {\n        if (buffer.length) {\n            return buffer[buffer.length - 1].type;\n        }\n    }\n\n    function flush() {\n        if (lastType() === 'Space') {\n            buffer.pop();\n        }\n\n        if (!buffer.length) {\n            buffer.unshift(\n                {\n                    type: 'Number',\n                    value: '0'\n                },\n                {\n                    type: 'Space'\n                },\n                {\n                    type: 'Number',\n                    value: '0'\n                }\n            );\n        }\n\n        newValue.push.apply(newValue, buffer);\n\n        buffer = [];\n    }\n\n    var newValue = [];\n    var buffer = [];\n\n    node.sequence.each(function(node) {\n        if (node.type === 'Operator' && node.value === ',') {\n            flush();\n            newValue.push(node);\n            return;\n        }\n\n        // remove defaults\n        if (node.type === 'Identifier') {\n            if (node.name === 'transparent' ||\n                node.name === 'none' ||\n                node.name === 'repeat' ||\n                node.name === 'scroll') {\n                return;\n            }\n        }\n\n        // don't add redundant spaces\n        if (node.type === 'Space' && (!buffer.length || lastType() === 'Space')) {\n            return;\n        }\n\n        buffer.push(node);\n    });\n\n    flush();\n    node.sequence = new List(newValue);\n};\n"]}