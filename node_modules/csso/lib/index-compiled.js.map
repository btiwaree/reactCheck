{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var parse = require('./parser');\nvar compress = require('./compressor');\nvar traslateInternal = require('./compressor/ast/translate');\nvar traslateInternalWithSourceMap = require('./compressor/ast/translateWithSourceMap');\nvar internalWalkers = require('./compressor/ast/walk');\nvar walk = require('./utils/walker');\nvar translate = require('./utils/translate');\nvar stringify = require('./utils/stringify');\nvar cleanInfo = require('./utils/cleanInfo');\n\nvar justDoIt = function(src, noStructureOptimizations, needInfo) {\n    console.warn('`csso.justDoIt()` method is deprecated, use `csso.minify()` instead');\n\n    var ast = parse(src, 'stylesheet', needInfo);\n    var compressed = compress(ast, {\n        restructure: !noStructureOptimizations,\n        outputAst: 'internal'\n    });\n\n    return traslateInternal(compressed);\n};\n\nfunction debugOutput(name, options, startTime, data) {\n    if (options.debug) {\n        console.error('## ' + name + ' done in %d ms\\n', Date.now() - startTime);\n    }\n\n    return data;\n}\n\nfunction createDefaultLogger(level) {\n    var lastDebug;\n\n    return function logger(title, ast) {\n        var line = title;\n\n        if (ast) {\n            line = '[' + ((Date.now() - lastDebug) / 1000).toFixed(3) + 's] ' + line;\n        }\n\n        if (level > 1 && ast) {\n            var css = traslateInternal(ast, true);\n\n            // when level 2, limit css to 256 symbols\n            if (level === 2 && css.length > 256) {\n                css = css.substr(0, 256) + '...';\n            }\n\n            line += '\\n  ' + css + '\\n';\n        }\n\n        console.error(line);\n        lastDebug = Date.now();\n    };\n}\n\nfunction copy(obj) {\n    var result = {};\n\n    for (var key in obj) {\n        result[key] = obj[key];\n    }\n\n    return result;\n}\n\nfunction buildCompressOptions(options) {\n    options = copy(options);\n    options.outputAst = 'internal';\n\n    if (typeof options.logger !== 'function' && options.debug) {\n        options.logger = createDefaultLogger(options.debug);\n    }\n\n    return options;\n}\n\nfunction minify(context, source, options) {\n    options = options || {};\n\n    var filename = options.filename || '<unknown>';\n    var result;\n\n    // parse\n    var ast = debugOutput('parsing', options, Date.now(),\n        parse(source, context, {\n            filename: filename,\n            positions: Boolean(options.sourceMap),\n            needInfo: true\n        })\n    );\n\n    // compress\n    var compressedAst = debugOutput('compress', options, Date.now(),\n        compress(ast, buildCompressOptions(options))\n    );\n\n    // translate\n    if (options.sourceMap) {\n        result = debugOutput('translateWithSourceMap', options, Date.now(), (function() {\n            var tmp = traslateInternalWithSourceMap(compressedAst);\n            tmp.map._file = filename; // since other tools can relay on file in source map transform chain\n            tmp.map.setSourceContent(filename, source);\n            return tmp;\n        })());\n    } else {\n        result = debugOutput('translate', options, Date.now(),\n            traslateInternal(compressedAst)\n        );\n    }\n\n    return result;\n}\n\nfunction minifyStylesheet(source, options) {\n    return minify('stylesheet', source, options);\n};\n\nfunction minifyBlock(source, options) {\n    return minify('declarations', source, options);\n}\n\nmodule.exports = {\n    version: require('../package.json').version,\n\n    // main method\n    minify: minifyStylesheet,\n    minifyBlock: minifyBlock,\n\n    // utils\n    parse: parse,\n    compress: compress,\n    translate: translate,\n\n    walk: walk,\n    stringify: stringify,\n    cleanInfo: cleanInfo,\n\n    // internal ast\n    internal: {\n        fromGonzales: require('./compressor/ast/gonzalesToInternal'),\n        toGonzales: require('./compressor/ast/internalToGonzales'),\n        translate: traslateInternal,\n        translateWithSourceMap: traslateInternalWithSourceMap,\n        walk: internalWalkers.all,\n        walkRules: internalWalkers.rules,\n        walkRulesRight: internalWalkers.rulesRight\n    },\n\n    // deprecated\n    justDoIt: justDoIt\n};\n"]}