{"version":3,"sources":["reducePositions.js"],"names":[],"mappings":"AAAA;;AAEA,QAAQ,UAAR,GAAqB,IAArB;;AAEA,IAAI,WAAW,QAAQ,SAAR,CAAX;;AAEJ,IAAI,sBAAsB,QAAQ,sBAAR,CAAtB;;AAEJ,IAAI,uBAAuB,uBAAuB,mBAAvB,CAAvB;;AAEJ,SAAS,sBAAT,CAAgC,GAAhC,EAAqC;AAAE,WAAO,OAAO,IAAI,UAAJ,GAAiB,GAAxB,GAA8B,EAAE,SAAS,GAAT,EAAhC,CAAT;CAArC;;AAEA,IAAI,aAAa,CAAC,KAAD,EAAQ,OAAR,EAAiB,QAAjB,EAA2B,MAA3B,EAAmC,QAAnC,CAAb;AACJ,IAAI,aAAa,CAAC,YAAD,EAAe,qBAAf,CAAb;;AAEJ,IAAI,aAAa;AACb,WAAO,MAAP;AACA,UAAM,GAAN;CAFA;;AAKJ,IAAI,WAAW;AACX,YAAQ,MAAR;AACA,SAAK,GAAL;CAFA;;AAKJ,IAAI,QAAQ,OAAO,IAAP,CAAY,UAAZ,CAAR;AACJ,IAAI,QAAQ,OAAO,IAAP,CAAY,QAAZ,CAAR;;AAEJ,SAAS,YAAT,CAAsB,IAAtB,EAA4B;AACxB,WAAO,KAAK,KAAL,CAAW,MAAX,CAAkB,UAAU,IAAV,EAAgB,KAAhB,EAAuB;AAC5C,YAAI,MAAM,IAAN,KAAe,KAAf,EAAsB;AACtB,iBAAK,KAAK,MAAL,GAAc,CAAd,CAAL,CAAsB,IAAtB,CAA2B,KAA3B,EADsB;SAA1B,MAEO;AACH,iBAAK,IAAL,CAAU,EAAV,EADG;SAFP;AAKA,eAAO,IAAP,CAN4C;KAAvB,EAOtB,CAAC,EAAD,CAPI,CAAP,CADwB;CAA5B;;AAWA,SAAS,SAAT,CAAmB,IAAnB,EAAyB;AACrB,QAAI,EAAE,CAAC,WAAW,OAAX,CAAmB,KAAK,IAAL,CAApB,EAAgC;AAClC,eADkC;KAAtC;AAGA,QAAI,SAAS,CAAC,GAAG,qBAAqB,OAArB,CAAJ,CAAkC,KAAK,KAAL,CAA3C,CAJiB;AAKrB,QAAI,OAAO,aAAa,MAAb,CAAP,CALiB;AAMrB,QAAI,WAAW,EAAX,CANiB;AAOrB,SAAK,OAAL,CAAa,UAAU,GAAV,EAAe;AACxB,iBAAS,IAAT,CAAc;AACV,mBAAO,IAAP;AACA,iBAAK,IAAL;SAFJ,EADwB;AAKxB,YAAI,OAAJ,CAAY,UAAU,IAAV,EAAgB,KAAhB,EAAuB;AAC/B,gBAAI,aAAa,CAAC,WAAW,OAAX,CAAmB,KAAK,KAAL,CAApB,IAAmC,CAAC,GAAG,oBAAoB,IAApB,CAAJ,CAA8B,KAAK,KAAL,CAAjE,CADc;AAE/B,gBAAI,MAAM,SAAS,MAAT,GAAkB,CAAlB,CAFqB;AAG/B,gBAAI,SAAS,GAAT,EAAc,KAAd,KAAwB,IAAxB,IAAgC,UAAhC,EAA4C;AAC5C,yBAAS,GAAT,EAAc,KAAd,GAAsB,KAAtB,CAD4C;AAE5C,yBAAS,GAAT,EAAc,GAAd,GAAoB,KAApB,CAF4C;AAG5C,uBAH4C;aAAhD;AAKA,gBAAI,SAAS,GAAT,EAAc,KAAd,KAAwB,IAAxB,EAA8B;AAC9B,oBAAI,KAAK,IAAL,KAAc,OAAd,EAAuB;AACvB,2BADuB;iBAA3B,MAEO,IAAI,UAAJ,EAAgB;AACnB,6BAAS,GAAT,EAAc,GAAd,GAAoB,KAApB,CADmB;AAEnB,2BAFmB;iBAAhB;AAIP,uBAP8B;aAAlC;SARQ,CAAZ,CALwB;KAAf,CAAb,CAPqB;AA+BrB,aAAS,OAAT,CAAiB,UAAU,KAAV,EAAiB,KAAjB,EAAwB;AACrC,YAAI,MAAM,KAAN,KAAgB,IAAhB,EAAsB;AACtB,mBADsB;SAA1B;AAGA,YAAI,WAAW,KAAK,KAAL,EAAY,KAAZ,CAAkB,MAAM,KAAN,EAAa,MAAM,GAAN,GAAY,CAAZ,CAA1C,CAJiC;AAKrC,YAAI,SAAS,MAAT,GAAkB,CAAlB,EAAqB;AACrB,mBADqB;SAAzB;AAGA,YAAI,SAAS,MAAT,KAAoB,CAApB,IAAyB,SAAS,CAAT,EAAY,KAAZ,KAAsB,QAAtB,EAAgC;AACzD,gBAAI,SAAS,CAAT,CAAJ,EAAiB;AACb,yBAAS,CAAT,EAAY,KAAZ,GAAoB,SAAS,CAAT,EAAY,KAAZ,GAAoB,EAApB,CADP;aAAjB;AAGA,gBAAI,SAAS,CAAT,EAAY,KAAZ,KAAsB,OAAtB,EAA+B;AAC/B,yBAAS,CAAT,EAAY,KAAZ,GAAoB,MAApB,CAD+B;AAE/B,uBAF+B;aAAnC;AAIA,gBAAI,SAAS,CAAT,EAAY,KAAZ,KAAsB,MAAtB,EAA8B;AAC9B,yBAAS,CAAT,EAAY,KAAZ,GAAoB,GAApB,CAD8B;AAE9B,uBAF8B;aAAlC;AAIA,gBAAI,SAAS,CAAT,EAAY,KAAZ,KAAsB,QAAtB,EAAgC;AAChC,yBAAS,CAAT,EAAY,KAAZ,GAAoB,KAApB,CADgC;AAEhC,uBAFgC;aAApC;AAIA,mBAhByD;SAA7D;AAkBA,YAAI,SAAS,CAAT,EAAY,KAAZ,KAAsB,QAAtB,IAAkC,CAAC,WAAW,OAAX,CAAmB,SAAS,CAAT,EAAY,KAAZ,CAApB,EAAwC;AAC1E,qBAAS,CAAT,EAAY,KAAZ,GAAoB,SAAS,CAAT,EAAY,KAAZ,GAAoB,EAApB,CADsD;AAE1E,gBAAI,SAAS,CAAT,EAAY,KAAZ,KAAsB,OAAtB,EAA+B;AAC/B,yBAAS,CAAT,EAAY,KAAZ,GAAoB,MAApB,CAD+B;AAE/B,uBAF+B;aAAnC;AAIA,gBAAI,SAAS,CAAT,EAAY,KAAZ,KAAsB,MAAtB,EAA8B;AAC9B,yBAAS,CAAT,EAAY,KAAZ,GAAoB,GAApB,CAD8B;AAE9B,uBAF8B;aAAlC;AAIA,mBAV0E;SAA9E;AAYA,YAAI,CAAC,MAAM,OAAN,CAAc,SAAS,CAAT,EAAY,KAAZ,CAAf,IAAqC,CAAC,MAAM,OAAN,CAAc,SAAS,CAAT,EAAY,KAAZ,CAAf,EAAmC;AACxE,qBAAS,CAAT,EAAY,KAAZ,GAAoB,WAAW,SAAS,CAAT,EAAY,KAAZ,CAA/B,CADwE;AAExE,qBAAS,CAAT,EAAY,KAAZ,GAAoB,SAAS,SAAS,CAAT,EAAY,KAAZ,CAA7B,CAFwE;AAGxE,mBAHwE;SAA5E,MAIO,IAAI,CAAC,MAAM,OAAN,CAAc,SAAS,CAAT,EAAY,KAAZ,CAAf,IAAqC,CAAC,MAAM,OAAN,CAAc,SAAS,CAAT,EAAY,KAAZ,CAAf,EAAmC;AAC/E,gBAAI,QAAQ,SAAS,CAAT,EAAY,KAAZ,CADmE;AAE/E,qBAAS,CAAT,EAAY,KAAZ,GAAoB,WAAW,SAAS,CAAT,EAAY,KAAZ,CAA/B,CAF+E;AAG/E,qBAAS,CAAT,EAAY,KAAZ,GAAoB,SAAS,KAAT,CAApB,CAH+E;AAI/E,mBAJ+E;SAA5E;KA1CM,CAAjB,CA/BqB;AAgFrB,SAAK,KAAL,GAAa,OAAO,QAAP,EAAb,CAhFqB;CAAzB;;AAmFA,QAAQ,OAAR,GAAkB,CAAC,GAAG,SAAS,MAAT,CAAJ,CAAqB,0BAArB,EAAiD,YAAY;AAC3E,WAAO,UAAU,GAAV,EAAe;AAClB,eAAO,IAAI,SAAJ,CAAc,SAAd,CAAP,CADkB;KAAf,CADoE;CAAZ,CAAnE;AAKA,OAAO,OAAP,GAAiB,QAAQ,SAAR,CAAjB","file":"reducePositions-compiled.js","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _postcss = require('postcss');\n\nvar _postcssValueParser = require('postcss-value-parser');\n\nvar _postcssValueParser2 = _interopRequireDefault(_postcssValueParser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar directions = ['top', 'right', 'bottom', 'left', 'center'];\nvar properties = ['background', 'background-position'];\n\nvar horizontal = {\n    right: '100%',\n    left: '0'\n};\n\nvar vertical = {\n    bottom: '100%',\n    top: '0'\n};\n\nvar hkeys = Object.keys(horizontal);\nvar vkeys = Object.keys(vertical);\n\nfunction getArguments(node) {\n    return node.nodes.reduce(function (list, child) {\n        if (child.type !== 'div') {\n            list[list.length - 1].push(child);\n        } else {\n            list.push([]);\n        }\n        return list;\n    }, [[]]);\n}\n\nfunction transform(decl) {\n    if (! ~properties.indexOf(decl.prop)) {\n        return;\n    }\n    var values = (0, _postcssValueParser2.default)(decl.value);\n    var args = getArguments(values);\n    var relevant = [];\n    args.forEach(function (arg) {\n        relevant.push({\n            start: null,\n            end: null\n        });\n        arg.forEach(function (part, index) {\n            var isPosition = ~directions.indexOf(part.value) || (0, _postcssValueParser.unit)(part.value);\n            var len = relevant.length - 1;\n            if (relevant[len].start === null && isPosition) {\n                relevant[len].start = index;\n                relevant[len].end = index;\n                return;\n            }\n            if (relevant[len].start !== null) {\n                if (part.type === 'space') {\n                    return;\n                } else if (isPosition) {\n                    relevant[len].end = index;\n                    return;\n                }\n                return;\n            }\n        });\n    });\n    relevant.forEach(function (range, index) {\n        if (range.start === null) {\n            return;\n        }\n        var position = args[index].slice(range.start, range.end + 1);\n        if (position.length > 3) {\n            return;\n        }\n        if (position.length === 1 || position[2].value === 'center') {\n            if (position[2]) {\n                position[2].value = position[1].value = '';\n            }\n            if (position[0].value === 'right') {\n                position[0].value = '100%';\n                return;\n            }\n            if (position[0].value === 'left') {\n                position[0].value = '0';\n                return;\n            }\n            if (position[0].value === 'center') {\n                position[0].value = '50%';\n                return;\n            }\n            return;\n        }\n        if (position[0].value === 'center' && ~directions.indexOf(position[2].value)) {\n            position[0].value = position[1].value = '';\n            if (position[2].value === 'right') {\n                position[2].value = '100%';\n                return;\n            }\n            if (position[2].value === 'left') {\n                position[2].value = '0';\n                return;\n            }\n            return;\n        }\n        if (~hkeys.indexOf(position[0].value) && ~vkeys.indexOf(position[2].value)) {\n            position[0].value = horizontal[position[0].value];\n            position[2].value = vertical[position[2].value];\n            return;\n        } else if (~vkeys.indexOf(position[0].value) && ~hkeys.indexOf(position[2].value)) {\n            var first = position[0].value;\n            position[0].value = horizontal[position[2].value];\n            position[2].value = vertical[first];\n            return;\n        }\n    });\n    decl.value = values.toString();\n}\n\nexports.default = (0, _postcss.plugin)('cssnano-reduce-positions', function () {\n    return function (css) {\n        return css.walkDecls(transform);\n    };\n});\nmodule.exports = exports['default'];"]}