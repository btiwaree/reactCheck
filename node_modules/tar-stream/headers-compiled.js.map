{"version":3,"sources":["headers.js"],"names":[],"mappings":"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","file":"headers-compiled.js","sourcesContent":["var ZEROS = '0000000000000000000'\nvar ZERO_OFFSET = '0'.charCodeAt(0)\nvar USTAR = 'ustar\\x0000'\nvar MASK = parseInt('7777', 8)\n\nvar clamp = function (index, len, defaultValue) {\n  if (typeof index !== 'number') return defaultValue\n  index = ~~index  // Coerce to integer.\n  if (index >= len) return len\n  if (index >= 0) return index\n  index += len\n  if (index >= 0) return index\n  return 0\n}\n\nvar toType = function (flag) {\n  switch (flag) {\n    case 0:\n      return 'file'\n    case 1:\n      return 'link'\n    case 2:\n      return 'symlink'\n    case 3:\n      return 'character-device'\n    case 4:\n      return 'block-device'\n    case 5:\n      return 'directory'\n    case 6:\n      return 'fifo'\n    case 7:\n      return 'contiguous-file'\n    case 72:\n      return 'pax-header'\n    case 55:\n      return 'pax-global-header'\n    case 27:\n      return 'gnu-long-link-path'\n    case 28:\n    case 30:\n      return 'gnu-long-path'\n  }\n\n  return null\n}\n\nvar toTypeflag = function (flag) {\n  switch (flag) {\n    case 'file':\n      return 0\n    case 'link':\n      return 1\n    case 'symlink':\n      return 2\n    case 'character-device':\n      return 3\n    case 'block-device':\n      return 4\n    case 'directory':\n      return 5\n    case 'fifo':\n      return 6\n    case 'contiguous-file':\n      return 7\n    case 'pax-header':\n      return 72\n  }\n\n  return 0\n}\n\nvar alloc = function (size) {\n  var buf = new Buffer(size)\n  buf.fill(0)\n  return buf\n}\n\nvar indexOf = function (block, num, offset, end) {\n  for (; offset < end; offset++) {\n    if (block[offset] === num) return offset\n  }\n  return end\n}\n\nvar cksum = function (block) {\n  var sum = 8 * 32\n  for (var i = 0; i < 148; i++) sum += block[i]\n  for (var j = 156; j < 512; j++) sum += block[j]\n  return sum\n}\n\nvar encodeOct = function (val, n) {\n  val = val.toString(8)\n  return ZEROS.slice(0, n - val.length) + val + ' '\n}\n\n/* Copied from the node-tar repo and modified to meet\n * tar-stream coding standard.\n *\n * Source: https://github.com/npm/node-tar/blob/51b6627a1f357d2eb433e7378e5f05e83b7aa6cd/lib/header.js#L349\n */\nfunction parse256 (buf) {\n  // first byte MUST be either 80 or FF\n  // 80 for positive, FF for 2's comp\n  var positive\n  if (buf[0] === 0x80) positive = true\n  else if (buf[0] === 0xFF) positive = false\n  else return null\n\n  // build up a base-256 tuple from the least sig to the highest\n  var zero = false\n  var tuple = []\n  for (var i = buf.length - 1; i > 0; i--) {\n    var byte = buf[i]\n    if (positive) tuple.push(byte)\n    else if (zero && byte === 0) tuple.push(0)\n    else if (zero) {\n      zero = false\n      tuple.push(0x100 - byte)\n    } else tuple.push(0xFF - byte)\n  }\n\n  var sum = 0\n  var l = tuple.length\n  for (i = 0; i < l; i++) {\n    sum += tuple[i] * Math.pow(256, i)\n  }\n\n  return positive ? sum : -1 * sum\n}\n\nvar decodeOct = function (val, offset) {\n  // If prefixed with 0x80 then parse as a base-256 integer\n  if (val[offset] & 0x80) {\n    return parse256(val.slice(offset, offset + 8))\n  } else {\n    // Older versions of tar can prefix with spaces\n    while (offset < val.length && val[offset] === 32) offset++\n    var end = clamp(indexOf(val, 32, offset, val.length), val.length, val.length)\n    while (offset < end && val[offset] === 0) offset++\n    if (end === offset) return 0\n    return parseInt(val.slice(offset, end).toString(), 8)\n  }\n}\n\nvar decodeStr = function (val, offset, length) {\n  return val.slice(offset, indexOf(val, 0, offset, offset + length)).toString()\n}\n\nvar addLength = function (str) {\n  var len = Buffer.byteLength(str)\n  var digits = Math.floor(Math.log(len) / Math.log(10)) + 1\n  if (len + digits > Math.pow(10, digits)) digits++\n\n  return (len + digits) + str\n}\n\nexports.decodeLongPath = function (buf) {\n  return decodeStr(buf, 0, buf.length)\n}\n\nexports.encodePax = function (opts) { // TODO: encode more stuff in pax\n  var result = ''\n  if (opts.name) result += addLength(' path=' + opts.name + '\\n')\n  if (opts.linkname) result += addLength(' linkpath=' + opts.linkname + '\\n')\n  var pax = opts.pax\n  if (pax) {\n    for (var key in pax) {\n      result += addLength(' ' + key + '=' + pax[key] + '\\n')\n    }\n  }\n  return new Buffer(result)\n}\n\nexports.decodePax = function (buf) {\n  var result = {}\n\n  while (buf.length) {\n    var i = 0\n    while (i < buf.length && buf[i] !== 32) i++\n    var len = parseInt(buf.slice(0, i).toString(), 10)\n    if (!len) return result\n\n    var b = buf.slice(i + 1, len - 1).toString()\n    var keyIndex = b.indexOf('=')\n    if (keyIndex === -1) return result\n    result[b.slice(0, keyIndex)] = b.slice(keyIndex + 1)\n\n    buf = buf.slice(len)\n  }\n\n  return result\n}\n\nexports.encode = function (opts) {\n  var buf = alloc(512)\n  var name = opts.name\n  var prefix = ''\n\n  if (opts.typeflag === 5 && name[name.length - 1] !== '/') name += '/'\n  if (Buffer.byteLength(name) !== name.length) return null // utf-8\n\n  while (Buffer.byteLength(name) > 100) {\n    var i = name.indexOf('/')\n    if (i === -1) return null\n    prefix += prefix ? '/' + name.slice(0, i) : name.slice(0, i)\n    name = name.slice(i + 1)\n  }\n\n  if (Buffer.byteLength(name) > 100 || Buffer.byteLength(prefix) > 155) return null\n  if (opts.linkname && Buffer.byteLength(opts.linkname) > 100) return null\n\n  buf.write(name)\n  buf.write(encodeOct(opts.mode & MASK, 6), 100)\n  buf.write(encodeOct(opts.uid, 6), 108)\n  buf.write(encodeOct(opts.gid, 6), 116)\n  buf.write(encodeOct(opts.size, 11), 124)\n  buf.write(encodeOct((opts.mtime.getTime() / 1000) | 0, 11), 136)\n\n  buf[156] = ZERO_OFFSET + toTypeflag(opts.type)\n\n  if (opts.linkname) buf.write(opts.linkname, 157)\n\n  buf.write(USTAR, 257)\n  if (opts.uname) buf.write(opts.uname, 265)\n  if (opts.gname) buf.write(opts.gname, 297)\n  buf.write(encodeOct(opts.devmajor || 0, 6), 329)\n  buf.write(encodeOct(opts.devminor || 0, 6), 337)\n\n  if (prefix) buf.write(prefix, 345)\n\n  buf.write(encodeOct(cksum(buf), 6), 148)\n\n  return buf\n}\n\nexports.decode = function (buf) {\n  var typeflag = buf[156] === 0 ? 0 : buf[156] - ZERO_OFFSET\n\n  var name = decodeStr(buf, 0, 100)\n  var mode = decodeOct(buf, 100)\n  var uid = decodeOct(buf, 108)\n  var gid = decodeOct(buf, 116)\n  var size = decodeOct(buf, 124)\n  var mtime = decodeOct(buf, 136)\n  var type = toType(typeflag)\n  var linkname = buf[157] === 0 ? null : decodeStr(buf, 157, 100)\n  var uname = decodeStr(buf, 265, 32)\n  var gname = decodeStr(buf, 297, 32)\n  var devmajor = decodeOct(buf, 329)\n  var devminor = decodeOct(buf, 337)\n\n  if (buf[345]) name = decodeStr(buf, 345, 155) + '/' + name\n\n  // to support old tar versions that use trailing / to indicate dirs\n  if (typeflag === 0 && name && name[name.length - 1] === '/') typeflag = 5\n\n  var c = cksum(buf)\n\n  // checksum is still initial value if header was null.\n  if (c === 8 * 32) return null\n\n  // valid checksum\n  if (c !== decodeOct(buf, 148)) throw new Error('Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?')\n\n  return {\n    name: name,\n    mode: mode,\n    uid: uid,\n    gid: gid,\n    size: size,\n    mtime: new Date(1000 * mtime),\n    type: type,\n    linkname: linkname,\n    uname: uname,\n    gname: gname,\n    devmajor: devmajor,\n    devminor: devminor\n  }\n}\n"]}