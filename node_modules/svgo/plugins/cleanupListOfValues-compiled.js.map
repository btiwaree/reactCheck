{"version":3,"sources":["cleanupListOfValues.js"],"names":[],"mappings":"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","file":"cleanupListOfValues-compiled.js","sourcesContent":["'use strict';\n\nexports.type = 'perItem';\n\nexports.active = false;\n\nexports.description = 'rounds list of values to the fixed precision';\n\nexports.params = {\n    floatPrecision: 3,\n    leadingZero: true,\n    defaultPx: true,\n    convertToPx: true\n};\n\nvar regNumericValues = /^([\\-+]?\\d*\\.?\\d+([eE][\\-+]?\\d+)?)(px|pt|pc|mm|cm|m|in|ft|em|ex|%)?$/,\n    regSeparator = /\\s+,?\\s*|,\\s*/,\n    removeLeadingZero = require('../lib/svgo/tools').removeLeadingZero,\n    absoluteLengths = { // relative to px\n        cm: 96/2.54,\n        mm: 96/25.4,\n        in: 96,\n        pt: 4/3,\n        pc: 16\n    };\n\n/**\n * Round list of values to the fixed precision.\n *\n * @example\n * <svg viewBox=\"0 0 200.28423 200.28423\" enable-background=\"new 0 0 200.28423 200.28423\">\n *         ⬇\n * <svg viewBox=\"0 0 200.284 200.284\" enable-background=\"new 0 0 200.284 200.284\">\n *\n *\n * <polygon points=\"208.250977 77.1308594 223.069336 ... \"/>\n *         ⬇\n * <polygon points=\"208.251 77.131 223.069 ... \"/>\n *\n *\n * @param {Object} item current iteration item\n * @param {Object} params plugin params\n * @return {Boolean} if false, item will be filtered out\n *\n * @author kiyopikko\n */\nexports.fn = function(item, params) {\n\n\n    if ( item.hasAttr('points') ) {\n        roundValues(item.attrs.points);\n    }\n\n    if ( item.hasAttr('enable-background') ) {\n        roundValues(item.attrs['enable-background']);\n    }\n\n    if ( item.hasAttr('viewBox') ) {\n        roundValues(item.attrs.viewBox);\n    }\n\n    if ( item.hasAttr('stroke-dasharray') ) {\n        roundValues(item.attrs['stroke-dasharray']);\n    }\n\n    if ( item.hasAttr('dx') ) {\n        roundValues(item.attrs.dx);\n    }\n\n    if ( item.hasAttr('dy') ) {\n        roundValues(item.attrs.dy);\n    }\n\n    if ( item.hasAttr('x') ) {\n        roundValues(item.attrs.x);\n    }\n\n    if ( item.hasAttr('y') ) {\n        roundValues(item.attrs.y);\n    }\n\n\n    function roundValues($prop){\n\n        var num, units,\n            match,\n            matchNew,\n            lists = $prop.value,\n            listsArr = lists.split(regSeparator),\n            roundedListArr = [],\n            roundedList;\n\n        listsArr.forEach(function(elem){\n\n            match = elem.match(regNumericValues);\n            matchNew = elem.match(/new/);\n\n             // if attribute value matches regNumericValues\n            if(match){\n\n                // round it to the fixed precision\n                num = +(+match[1]).toFixed(params.floatPrecision),\n                units = match[3] || '';\n\n                // convert absolute values to pixels\n                if (params.convertToPx && units && (units in absoluteLengths)) {\n                    var pxNum = +(absoluteLengths[units] * match[1]).toFixed(params.floatPrecision);\n\n                    if (String(pxNum).length < match[0].length)\n                        num = pxNum,\n                        units = 'px';\n                }\n\n                 // and remove leading zero\n                if (params.leadingZero) {\n                    num = removeLeadingZero(num);\n                }\n\n                // remove default 'px' units\n                if (params.defaultPx && units === 'px') {\n                    units = '';\n                }\n\n                roundedListArr.push(num+units);\n\n            }\n            // if attribute value is \"new\"(only enable-background).\n            else if(matchNew){\n\n                roundedListArr.push('new');\n\n            }\n\n        });\n\n        roundedList = roundedListArr.join(' ');\n        $prop.value = roundedList;\n\n    }\n\n};\n"]}