{"version":3,"sources":["removeHiddenElems.js"],"names":[],"mappings":"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","file":"removeHiddenElems-compiled.js","sourcesContent":["'use strict';\n\nexports.type = 'perItem';\n\nexports.active = true;\n\nexports.description = 'removes hidden elements (zero sized, with absent attributes)';\n\nexports.params = {\n    displayNone: true,\n    opacity0: true,\n    circleR0: true,\n    ellipseRX0: true,\n    ellipseRY0: true,\n    rectWidth0: true,\n    rectHeight0: true,\n    patternWidth0: true,\n    patternHeight0: true,\n    imageWidth0: true,\n    imageHeight0: true,\n    pathEmptyD: true,\n    polylineEmptyPoints: true,\n    polygonEmptyPoints: true\n};\n\nvar regValidPath = /M\\s*(?:[-+]?(?:\\d*\\.\\d+|\\d+(?:\\.|(?!\\.)))([eE][-+]?\\d+)?(?!\\d)\\s*,?\\s*){2}\\D*\\d/i;\n\n/**\n * Remove hidden elements with disabled rendering:\n * - display=\"none\"\n * - opacity=\"0\"\n * - circle with zero radius\n * - ellipse with zero x-axis or y-axis radius\n * - rectangle with zero width or height\n * - pattern with zero width or height\n * - image with zero width or height\n * - path with empty data\n * - polyline with empty points\n * - polygon with empty points\n *\n * @param {Object} item current iteration item\n * @param {Object} params plugin params\n * @return {Boolean} if false, item will be filtered out\n *\n * @author Kir Belevich\n */\nexports.fn = function(item, params) {\n\n    if (item.elem) {\n\n        // display=\"none\"\n        //\n        // http://www.w3.org/TR/SVG/painting.html#DisplayProperty\n        // \"A value of display: none indicates that the given element\n        // and its children shall not be rendered directly\"\n        if (\n            params.displayNone &&\n            item.hasAttr('display', 'none')\n        ) return false;\n\n        // opacity=\"0\"\n        //\n        // http://www.w3.org/TR/SVG/masking.html#ObjectAndGroupOpacityProperties\n        if (\n            params.opacity0 &&\n            item.hasAttr('opacity', '0')\n        ) return false;\n\n        // Circles with zero radius\n        //\n        // http://www.w3.org/TR/SVG/shapes.html#CircleElementRAttribute\n        // \"A value of zero disables rendering of the element\"\n        //\n        // <circle r=\"0\">\n        if (\n            params.circleR0 &&\n            item.isElem('circle') &&\n            item.isEmpty() &&\n            item.hasAttr('r', '0')\n        ) return false;\n\n        // Ellipse with zero x-axis radius\n        //\n        // http://www.w3.org/TR/SVG/shapes.html#EllipseElementRXAttribute\n        // \"A value of zero disables rendering of the element\"\n        //\n        // <ellipse rx=\"0\">\n        if (\n            params.ellipseRX0 &&\n            item.isElem('ellipse') &&\n            item.isEmpty() &&\n            item.hasAttr('rx', '0')\n        ) return false;\n\n        // Ellipse with zero y-axis radius\n        //\n        // http://www.w3.org/TR/SVG/shapes.html#EllipseElementRYAttribute\n        // \"A value of zero disables rendering of the element\"\n        //\n        // <ellipse ry=\"0\">\n        if (\n            params.ellipseRY0 &&\n            item.isElem('ellipse') &&\n            item.isEmpty() &&\n            item.hasAttr('ry', '0')\n        ) return false;\n\n        // Rectangle with zero width\n        //\n        // http://www.w3.org/TR/SVG/shapes.html#RectElementWidthAttribute\n        // \"A value of zero disables rendering of the element\"\n        //\n        // <rect width=\"0\">\n        if (\n            params.rectWidth0 &&\n            item.isElem('rect') &&\n            item.isEmpty() &&\n            item.hasAttr('width', '0')\n        ) return false;\n\n        // Rectangle with zero height\n        //\n        // http://www.w3.org/TR/SVG/shapes.html#RectElementHeightAttribute\n        // \"A value of zero disables rendering of the element\"\n        //\n        // <rect height=\"0\">\n        if (\n            params.rectHeight0 &&\n            params.rectWidth0 &&\n            item.isElem('rect') &&\n            item.isEmpty() &&\n            item.hasAttr('height', '0')\n        ) return false;\n\n        // Pattern with zero width\n        //\n        // http://www.w3.org/TR/SVG/pservers.html#PatternElementWidthAttribute\n        // \"A value of zero disables rendering of the element (i.e., no paint is applied)\"\n        //\n        // <pattern width=\"0\">\n        if (\n            params.patternWidth0 &&\n            item.isElem('pattern') &&\n            item.hasAttr('width', '0')\n        ) return false;\n\n        // Pattern with zero height\n        //\n        // http://www.w3.org/TR/SVG/pservers.html#PatternElementHeightAttribute\n        // \"A value of zero disables rendering of the element (i.e., no paint is applied)\"\n        //\n        // <pattern height=\"0\">\n        if (\n            params.patternHeight0 &&\n            item.isElem('pattern') &&\n            item.hasAttr('height', '0')\n        ) return false;\n\n        // Image with zero width\n        //\n        // http://www.w3.org/TR/SVG/struct.html#ImageElementWidthAttribute\n        // \"A value of zero disables rendering of the element\"\n        //\n        // <image width=\"0\">\n        if (\n            params.imageWidth0 &&\n            item.isElem('image') &&\n            item.hasAttr('width', '0')\n        ) return false;\n\n        // Image with zero height\n        //\n        // http://www.w3.org/TR/SVG/struct.html#ImageElementHeightAttribute\n        // \"A value of zero disables rendering of the element\"\n        //\n        // <image height=\"0\">\n        if (\n            params.imageHeight0 &&\n            item.isElem('image') &&\n            item.hasAttr('height', '0')\n        ) return false;\n\n        // Path with empty data\n        //\n        // http://www.w3.org/TR/SVG/paths.html#DAttribute\n        //\n        // <path d=\"\"/>\n        if (\n            params.pathEmptyD &&\n            item.isElem('path') &&\n            (!item.hasAttr('d') || !regValidPath.test(item.attr('d').value))\n        ) return false;\n\n        // Polyline with empty points\n        //\n        // http://www.w3.org/TR/SVG/shapes.html#PolylineElementPointsAttribute\n        //\n        // <polyline points=\"\">\n        if (\n            params.polylineEmptyPoints &&\n            item.isElem('polyline') &&\n            !item.hasAttr('points')\n        ) return false;\n\n        // Polygon with empty points\n        //\n        // http://www.w3.org/TR/SVG/shapes.html#PolygonElementPointsAttribute\n        //\n        // <polygon points=\"\">\n        if (\n            params.polygonEmptyPoints &&\n            item.isElem('polygon') &&\n            !item.hasAttr('points')\n        ) return false;\n\n    }\n\n};\n"]}