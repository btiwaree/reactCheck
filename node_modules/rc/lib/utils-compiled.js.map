{"version":3,"sources":["utils.js"],"names":[],"mappings":"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","file":"utils-compiled.js","sourcesContent":["'use strict';\nvar fs   = require('fs')\nvar ini  = require('ini')\nvar path = require('path')\nvar stripJsonComments = require('strip-json-comments')\n\nvar parse = exports.parse = function (content) {\n\n  //if it ends in .json or starts with { then it must be json.\n  //must be done this way, because ini accepts everything.\n  //can't just try and parse it and let it throw if it's not ini.\n  //everything is ini. even json with a syntax error.\n\n  if(/^\\s*{/.test(content))\n    return JSON.parse(stripJsonComments(content))\n  return ini.parse(content)\n\n}\n\nvar file = exports.file = function () {\n  var args = [].slice.call(arguments).filter(function (arg) { return arg != null })\n\n  //path.join breaks if it's a not a string, so just skip this.\n  for(var i in args)\n    if('string' !== typeof args[i])\n      return\n\n  var file = path.join.apply(null, args)\n  var content\n  try {\n    return fs.readFileSync(file,'utf-8')\n  } catch (err) {\n    return\n  }\n}\n\nvar json = exports.json = function () {\n  var content = file.apply(null, arguments)\n  return content ? parse(content) : null\n}\n\nvar env = exports.env = function (prefix, env) {\n  env = env || process.env\n  var obj = {}\n  var l = prefix.length\n  for(var k in env) {\n    if((k.indexOf(prefix)) === 0) {\n\n      var keypath = k.substring(l).split('__')\n\n      // Trim empty strings from keypath array\n      var _emptyStringIndex\n      while ((_emptyStringIndex=keypath.indexOf('')) > -1) {\n        keypath.splice(_emptyStringIndex, 1)\n      }\n\n      var cursor = obj\n      keypath.forEach(function _buildSubObj(_subkey,i){\n\n        // (check for _subkey first so we ignore empty strings)\n        // (check for cursor to avoid assignment to primitive objects)\n        if (!_subkey || typeof cursor !== 'object')\n          return\n\n        // If this is the last key, just stuff the value in there\n        // Assigns actual value from env variable to final key\n        // (unless it's just an empty string- in that case use the last valid key)\n        if (i === keypath.length-1)\n          cursor[_subkey] = env[k]\n\n\n        // Build sub-object if nothing already exists at the keypath\n        if (cursor[_subkey] === undefined)\n          cursor[_subkey] = {}\n\n        // Increment cursor used to track the object at the current depth\n        cursor = cursor[_subkey]\n\n      })\n\n    }\n\n  }\n\n  return obj\n}\n\nvar find = exports.find = function () {\n  var rel = path.join.apply(null, [].slice.call(arguments))\n\n  function find(start, rel) {\n    var file = path.join(start, rel)\n    try {\n      fs.statSync(file)\n      return file\n    } catch (err) {\n      if(path.dirname(start) !== start) // root\n        return find(path.dirname(start), rel)\n    }\n  }\n  return find(process.cwd(), rel)\n}\n\n"]}