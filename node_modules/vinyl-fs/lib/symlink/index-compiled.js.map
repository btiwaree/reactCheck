{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,WAAW,QAAQ,UAAR,CAAX;AACJ,IAAI,KAAK,QAAQ,aAAR,CAAL;AACJ,IAAI,eAAe,QAAQ,iBAAR,CAAf;;AAEJ,SAAS,OAAT,CAAiB,SAAjB,EAA4B,GAA5B,EAAiC;AAC/B,WAAS,QAAT,CAAkB,IAAlB,EAAwB,GAAxB,EAA6B,EAA7B,EAAiC;AAC/B,QAAI,UAAU,KAAK,IAAL,CADiB;AAE/B,QAAI,UAAW,KAAK,WAAL,KAAqB,KAArB,GAA6B,MAA7B,CAFgB;AAG/B,iBAAa,SAAb,EAAwB,IAAxB,EAA8B,GAA9B,EAAmC,UAAS,GAAT,EAAc,SAAd,EAAyB;AAC1D,UAAI,GAAJ,EAAS;AACP,eAAO,GAAG,GAAH,CAAP,CADO;OAAT;AAGA,SAAG,OAAH,CAAW,OAAX,EAAoB,SAApB,EAA+B,OAA/B,EAAwC,UAAS,GAAT,EAAc;AACpD,YAAI,OAAO,IAAI,IAAJ,KAAa,QAAb,EAAuB;AAChC,iBAAO,GAAG,GAAH,CAAP,CADgC;SAAlC;AAGA,WAAG,IAAH,EAAS,IAAT,EAJoD;OAAd,CAAxC,CAJ0D;KAAzB,CAAnC,CAH+B;GAAjC;;AAgBA,MAAI,SAAS,SAAS,GAAT,CAAa,GAAb,EAAkB,QAAlB,CAAT;;AAjB2B,QAmB/B,CAAO,MAAP,GAnB+B;AAoB/B,SAAO,MAAP,CApB+B;CAAjC;;AAuBA,OAAO,OAAP,GAAiB,OAAjB","file":"index-compiled.js","sourcesContent":["'use strict';\n\nvar through2 = require('through2');\nvar fs = require('graceful-fs');\nvar prepareWrite = require('../prepareWrite');\n\nfunction symlink(outFolder, opt) {\n  function linkFile(file, enc, cb) {\n    var srcPath = file.path;\n    var symType = (file.isDirectory() ? 'dir' : 'file');\n    prepareWrite(outFolder, file, opt, function(err, writePath) {\n      if (err) {\n        return cb(err);\n      }\n      fs.symlink(srcPath, writePath, symType, function(err) {\n        if (err && err.code !== 'EEXIST') {\n          return cb(err);\n        }\n        cb(null, file);\n      });\n    });\n  }\n\n  var stream = through2.obj(opt, linkFile);\n  // TODO: option for either backpressure or lossy\n  stream.resume();\n  return stream;\n}\n\nmodule.exports = symlink;\n"]}