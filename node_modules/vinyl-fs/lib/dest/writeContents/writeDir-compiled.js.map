{"version":3,"sources":["writeDir.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,KAAK,QAAQ,aAAR,CAAL;AACJ,IAAI,SAAS,QAAQ,QAAR,CAAT;;AAEJ,IAAI,KAAK,QAAQ,sBAAR,CAAL;;AAEJ,SAAS,QAAT,CAAkB,SAAlB,EAA6B,IAA7B,EAAmC,OAAnC,EAA4C;AAC1C,MAAI,aAAa;AACf,UAAM,KAAK,IAAL,CAAU,IAAV;AACN,QAAI,EAAJ;GAFE,CADsC;AAK1C,SAAO,SAAP,EAAkB,UAAlB,EAA8B,QAA9B,EAL0C;;AAO1C,WAAS,QAAT,CAAkB,SAAlB,EAA6B;AAC3B,QAAI,SAAJ,EAAe;AACb,aAAO,QAAQ,SAAR,CAAP,CADa;KAAf;;AAIA,OAAG,IAAH,CAAQ,SAAR,EAAmB,GAAnB,EAAwB,MAAxB,EAL2B;GAA7B;;AAQA,WAAS,MAAT,CAAgB,OAAhB,EAAyB,EAAzB,EAA6B;;AAE3B,QAAI,eAAe,OAAf,CAAJ,EAA6B;AAC3B,aAAO,GAAG,OAAH,CAAW,IAAX,EAAiB,EAAjB,EAAqB,OAArB,CAAP,CAD2B;KAA7B;;AAIA,QAAI,OAAJ,EAAa;AACX,aAAO,GAAG,OAAH,CAAW,OAAX,EAAoB,EAApB,EAAwB,OAAxB,CAAP,CADW;KAAb;;AAIA,OAAG,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,QAA5B,EAV2B;GAA7B;;AAaA,WAAS,QAAT,CAAkB,OAAlB,EAA2B,EAA3B,EAA+B;AAC7B,OAAG,OAAH,CAAW,OAAX,EAAoB,EAApB,EAAwB,OAAxB,EAD6B;GAA/B;CA5BF;;AAiCA,SAAS,cAAT,CAAwB,GAAxB,EAA6B;AACzB,MAAI,CAAC,GAAD,EAAM;AACR,WAAO,KAAP,CADQ;GAAV;;AAIA,MAAI,IAAI,IAAJ,KAAa,QAAb,EAAuB;AACzB,WAAO,IAAP,CADyB;GAA3B;;AAIA,SAAO,KAAP,CATyB;CAA7B;;AAYA,OAAO,OAAP,GAAiB,QAAjB","file":"writeDir-compiled.js","sourcesContent":["'use strict';\n\nvar fs = require('graceful-fs');\nvar mkdirp = require('mkdirp');\n\nvar fo = require('../../fileOperations');\n\nfunction writeDir(writePath, file, written) {\n  var mkdirpOpts = {\n    mode: file.stat.mode,\n    fs: fs,\n  };\n  mkdirp(writePath, mkdirpOpts, onMkdirp);\n\n  function onMkdirp(mkdirpErr) {\n    if (mkdirpErr) {\n      return written(mkdirpErr);\n    }\n\n    fs.open(writePath, 'r', onOpen);\n  }\n\n  function onOpen(openErr, fd) {\n    // If we don't have access, just move along\n    if (isInaccessible(openErr)) {\n      return fo.closeFd(null, fd, written);\n    }\n\n    if (openErr) {\n      return fo.closeFd(openErr, fd, written);\n    }\n\n    fo.updateMetadata(fd, file, onUpdate);\n  }\n\n  function onUpdate(statErr, fd) {\n    fo.closeFd(statErr, fd, written);\n  }\n}\n\nfunction isInaccessible(err) {\n    if (!err) {\n      return false;\n    }\n\n    if (err.code === 'EACCES') {\n      return true;\n    }\n\n    return false;\n  }\n\nmodule.exports = writeDir;\n"]}