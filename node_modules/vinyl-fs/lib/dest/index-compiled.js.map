{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,WAAW,QAAQ,UAAR,CAAX;AACJ,IAAI,aAAa,QAAQ,iBAAR,CAAb;AACJ,IAAI,YAAY,QAAQ,WAAR,CAAZ;AACJ,IAAI,OAAO,QAAQ,SAAR,CAAP;AACJ,IAAI,eAAe,QAAQ,iBAAR,CAAf;AACJ,IAAI,gBAAgB,QAAQ,iBAAR,CAAhB;;AAEJ,SAAS,IAAT,CAAc,SAAd,EAAyB,GAAzB,EAA8B;AAC5B,MAAI,CAAC,GAAD,EAAM;AACR,UAAM,EAAN,CADQ;GAAV;;AAIA,WAAS,QAAT,CAAkB,IAAlB,EAAwB,GAAxB,EAA6B,EAA7B,EAAiC;AAC/B,iBAAa,SAAb,EAAwB,IAAxB,EAA8B,GAA9B,EAAmC,UAAS,GAAT,EAAc,SAAd,EAAyB;AAC1D,UAAI,GAAJ,EAAS;AACP,eAAO,GAAG,GAAH,CAAP,CADO;OAAT;AAGA,oBAAc,SAAd,EAAyB,IAAzB,EAA+B,EAA/B,EAJ0D;KAAzB,CAAnC,CAD+B;GAAjC;;AASA,MAAI,aAAa,SAAS,GAAT,CAAa,GAAb,EAAkB,QAAlB,CAAb,CAdwB;AAe5B,MAAI,CAAC,IAAI,UAAJ,EAAgB;;;AAGnB,YAAQ,QAAR,CAAiB,KAAK,UAAL,CAAjB,EAHmB;;AAKnB,WAAO,UAAP,CALmB;GAArB;;AAQA,MAAI,eAAe,IAAI,UAAJ,CAvBS;AAwB5B,MAAI,OAAO,YAAP,KAAwB,SAAxB,EAAmC;AACrC,mBAAe,EAAf,CADqC;GAAvC;AAGA,MAAI,OAAO,YAAP,KAAwB,QAAxB,EAAkC;AACpC,mBAAe;AACb,YAAM,YAAN;KADF,CADoC;GAAtC;;AAMA,MAAI,YAAY,WAAW,KAAX,CAAiB,aAAa,IAAb,EAAmB,YAApC,CAAZ,CAjCwB;AAkC5B,MAAI,eAAe,UAAU,GAAV,CAAc,SAAd,EAAyB,UAAzB,CAAf,CAlCwB;AAmC5B,YAAU,IAAV,CAAe,UAAf;;;;AAnC4B,SAuC5B,CAAQ,QAAR,CAAiB,KAAK,YAAL,CAAjB,EAvC4B;;AAyC5B,SAAO,YAAP,CAzC4B;CAA9B;;AA4CA,OAAO,OAAP,GAAiB,IAAjB","file":"index-compiled.js","sourcesContent":["'use strict';\n\nvar through2 = require('through2');\nvar sourcemaps = require('gulp-sourcemaps');\nvar duplexify = require('duplexify');\nvar sink = require('../sink');\nvar prepareWrite = require('../prepareWrite');\nvar writeContents = require('./writeContents');\n\nfunction dest(outFolder, opt) {\n  if (!opt) {\n    opt = {};\n  }\n\n  function saveFile(file, enc, cb) {\n    prepareWrite(outFolder, file, opt, function(err, writePath) {\n      if (err) {\n        return cb(err);\n      }\n      writeContents(writePath, file, cb);\n    });\n  }\n\n  var saveStream = through2.obj(opt, saveFile);\n  if (!opt.sourcemaps) {\n    // Sink the save stream to start flowing\n    // Do this on nextTick, it will flow at slowest speed of piped streams\n    process.nextTick(sink(saveStream));\n\n    return saveStream;\n  }\n\n  var sourcemapOpt = opt.sourcemaps;\n  if (typeof sourcemapOpt === 'boolean') {\n    sourcemapOpt = {};\n  }\n  if (typeof sourcemapOpt === 'string') {\n    sourcemapOpt = {\n      path: sourcemapOpt,\n    };\n  }\n\n  var mapStream = sourcemaps.write(sourcemapOpt.path, sourcemapOpt);\n  var outputStream = duplexify.obj(mapStream, saveStream);\n  mapStream.pipe(saveStream);\n\n  // Sink the output stream to start flowing\n  // Do this on nextTick, it will flow at slowest speed of piped streams\n  process.nextTick(sink(outputStream));\n\n  return outputStream;\n}\n\nmodule.exports = dest;\n"]}