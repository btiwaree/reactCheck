{"version":3,"sources":["lazy-result.js"],"names":[],"mappings":"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","file":"lazy-result-compiled.js","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _mapGenerator = require('./map-generator');\n\nvar _mapGenerator2 = _interopRequireDefault(_mapGenerator);\n\nvar _stringify2 = require('./stringify');\n\nvar _stringify3 = _interopRequireDefault(_stringify2);\n\nvar _warnOnce = require('./warn-once');\n\nvar _warnOnce2 = _interopRequireDefault(_warnOnce);\n\nvar _result = require('./result');\n\nvar _result2 = _interopRequireDefault(_result);\n\nvar _parse = require('./parse');\n\nvar _parse2 = _interopRequireDefault(_parse);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction isPromise(obj) {\n    return (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object' && typeof obj.then === 'function';\n}\n\nvar LazyResult = function () {\n    function LazyResult(processor, css, opts) {\n        _classCallCheck(this, LazyResult);\n\n        this.stringified = false;\n        this.processed = false;\n\n        var root = undefined;\n        if ((typeof css === 'undefined' ? 'undefined' : _typeof(css)) === 'object' && css.type === 'root') {\n            root = css;\n        } else if (css instanceof LazyResult || css instanceof _result2.default) {\n            root = css.root;\n            if (css.map) {\n                if (typeof opts.map === 'undefined') opts.map = {};\n                if (!opts.map.inline) opts.map.inline = false;\n                opts.map.prev = css.map;\n            }\n        } else {\n            var parser = _parse2.default;\n            if (opts.syntax) parser = opts.syntax.parse;\n            if (opts.parser) parser = opts.parser;\n            if (parser.parse) parser = parser.parse;\n\n            try {\n                root = parser(css, opts);\n            } catch (error) {\n                this.error = error;\n            }\n        }\n\n        this.result = new _result2.default(processor, root, opts);\n    }\n\n    LazyResult.prototype.warnings = function warnings() {\n        return this.sync().warnings();\n    };\n\n    LazyResult.prototype.toString = function toString() {\n        return this.css;\n    };\n\n    LazyResult.prototype.then = function then(onFulfilled, onRejected) {\n        return this.async().then(onFulfilled, onRejected);\n    };\n\n    LazyResult.prototype.catch = function _catch(onRejected) {\n        return this.async().catch(onRejected);\n    };\n\n    LazyResult.prototype.handleError = function handleError(error, plugin) {\n        try {\n            this.error = error;\n            if (error.name === 'CssSyntaxError' && !error.plugin) {\n                error.plugin = plugin.postcssPlugin;\n                error.setMessage();\n            } else if (plugin.postcssVersion) {\n                var pluginName = plugin.postcssPlugin;\n                var pluginVer = plugin.postcssVersion;\n                var runtimeVer = this.result.processor.version;\n                var a = pluginVer.split('.');\n                var b = runtimeVer.split('.');\n\n                if (a[0] !== b[0] || parseInt(a[1]) > parseInt(b[1])) {\n                    (0, _warnOnce2.default)('Your current PostCSS version ' + 'is ' + runtimeVer + ', but ' + pluginName + ' ' + 'uses ' + pluginVer + '. Perhaps this is ' + 'the source of the error below.');\n                }\n            }\n        } catch (err) {\n            /* istanbul ignore next */\n            if (console && console.error) console.error(err);\n        }\n    };\n\n    LazyResult.prototype.asyncTick = function asyncTick(resolve, reject) {\n        var _this = this;\n\n        if (this.plugin >= this.processor.plugins.length) {\n            this.processed = true;\n            return resolve();\n        }\n\n        try {\n            (function () {\n                var plugin = _this.processor.plugins[_this.plugin];\n                var promise = _this.run(plugin);\n                _this.plugin += 1;\n\n                if (isPromise(promise)) {\n                    promise.then(function () {\n                        _this.asyncTick(resolve, reject);\n                    }).catch(function (error) {\n                        _this.handleError(error, plugin);\n                        _this.processed = true;\n                        reject(error);\n                    });\n                } else {\n                    _this.asyncTick(resolve, reject);\n                }\n            })();\n        } catch (error) {\n            this.processed = true;\n            reject(error);\n        }\n    };\n\n    LazyResult.prototype.async = function async() {\n        var _this2 = this;\n\n        if (this.processed) {\n            return new Promise(function (resolve, reject) {\n                if (_this2.error) {\n                    reject(_this2.error);\n                } else {\n                    resolve(_this2.stringify());\n                }\n            });\n        }\n        if (this.processing) {\n            return this.processing;\n        }\n\n        this.processing = new Promise(function (resolve, reject) {\n            if (_this2.error) return reject(_this2.error);\n            _this2.plugin = 0;\n            _this2.asyncTick(resolve, reject);\n        }).then(function () {\n            _this2.processed = true;\n            return _this2.stringify();\n        });\n\n        return this.processing;\n    };\n\n    LazyResult.prototype.sync = function sync() {\n        if (this.processed) return this.result;\n        this.processed = true;\n\n        if (this.processing) {\n            throw new Error('Use process(css).then(cb) to work with async plugins');\n        }\n\n        if (this.error) throw this.error;\n\n        for (var _iterator = this.result.processor.plugins, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n            var _ref;\n\n            if (_isArray) {\n                if (_i >= _iterator.length) break;\n                _ref = _iterator[_i++];\n            } else {\n                _i = _iterator.next();\n                if (_i.done) break;\n                _ref = _i.value;\n            }\n\n            var plugin = _ref;\n\n            var promise = this.run(plugin);\n            if (isPromise(promise)) {\n                throw new Error('Use process(css).then(cb) to work with async plugins');\n            }\n        }\n\n        return this.result;\n    };\n\n    LazyResult.prototype.run = function run(plugin) {\n        this.result.lastPlugin = plugin;\n\n        try {\n            return plugin(this.result.root, this.result);\n        } catch (error) {\n            this.handleError(error, plugin);\n            throw error;\n        }\n    };\n\n    LazyResult.prototype.stringify = function stringify() {\n        if (this.stringified) return this.result;\n        this.stringified = true;\n\n        this.sync();\n\n        var opts = this.result.opts;\n        var str = _stringify3.default;\n        if (opts.syntax) str = opts.syntax.stringify;\n        if (opts.stringifier) str = opts.stringifier;\n        if (str.stringify) str = str.stringify;\n\n        var map = new _mapGenerator2.default(str, this.result.root, this.result.opts);\n        var data = map.generate();\n        this.result.css = data[0];\n        this.result.map = data[1];\n\n        return this.result;\n    };\n\n    _createClass(LazyResult, [{\n        key: 'processor',\n        get: function get() {\n            return this.result.processor;\n        }\n    }, {\n        key: 'opts',\n        get: function get() {\n            return this.result.opts;\n        }\n    }, {\n        key: 'css',\n        get: function get() {\n            return this.stringify().css;\n        }\n    }, {\n        key: 'content',\n        get: function get() {\n            return this.stringify().content;\n        }\n    }, {\n        key: 'map',\n        get: function get() {\n            return this.stringify().map;\n        }\n    }, {\n        key: 'root',\n        get: function get() {\n            return this.sync().root;\n        }\n    }, {\n        key: 'messages',\n        get: function get() {\n            return this.sync().messages;\n        }\n    }]);\n\n    return LazyResult;\n}();\n\nexports.default = LazyResult;\nmodule.exports = exports['default'];"]}