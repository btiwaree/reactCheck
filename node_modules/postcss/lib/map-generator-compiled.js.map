{"version":3,"sources":["map-generator.js"],"names":[],"mappings":"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","file":"map-generator-compiled.js","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _jsBase = require('js-base64');\n\nvar _sourceMap = require('source-map');\n\nvar _sourceMap2 = _interopRequireDefault(_sourceMap);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class(stringify, root, opts) {\n        _classCallCheck(this, _class);\n\n        this.stringify = stringify;\n        this.mapOpts = opts.map || {};\n        this.root = root;\n        this.opts = opts;\n    }\n\n    _class.prototype.isMap = function isMap() {\n        if (typeof this.opts.map !== 'undefined') {\n            return !!this.opts.map;\n        } else {\n            return this.previous().length > 0;\n        }\n    };\n\n    _class.prototype.previous = function previous() {\n        var _this = this;\n\n        if (!this.previousMaps) {\n            this.previousMaps = [];\n            this.root.walk(function (node) {\n                if (node.source && node.source.input.map) {\n                    var map = node.source.input.map;\n                    if (_this.previousMaps.indexOf(map) === -1) {\n                        _this.previousMaps.push(map);\n                    }\n                }\n            });\n        }\n\n        return this.previousMaps;\n    };\n\n    _class.prototype.isInline = function isInline() {\n        if (typeof this.mapOpts.inline !== 'undefined') {\n            return this.mapOpts.inline;\n        }\n\n        var annotation = this.mapOpts.annotation;\n        if (typeof annotation !== 'undefined' && annotation !== true) {\n            return false;\n        }\n\n        if (this.previous().length) {\n            return this.previous().some(function (i) {\n                return i.inline;\n            });\n        } else {\n            return true;\n        }\n    };\n\n    _class.prototype.isSourcesContent = function isSourcesContent() {\n        if (typeof this.mapOpts.sourcesContent !== 'undefined') {\n            return this.mapOpts.sourcesContent;\n        }\n        if (this.previous().length) {\n            return this.previous().some(function (i) {\n                return i.withContent();\n            });\n        } else {\n            return true;\n        }\n    };\n\n    _class.prototype.clearAnnotation = function clearAnnotation() {\n        if (this.mapOpts.annotation === false) return;\n\n        var node = undefined;\n        for (var i = this.root.nodes.length - 1; i >= 0; i--) {\n            node = this.root.nodes[i];\n            if (node.type !== 'comment') continue;\n            if (node.text.indexOf('# sourceMappingURL=') === 0) {\n                this.root.removeChild(i);\n            }\n        }\n    };\n\n    _class.prototype.setSourcesContent = function setSourcesContent() {\n        var _this2 = this;\n\n        var already = {};\n        this.root.walk(function (node) {\n            if (node.source) {\n                var from = node.source.input.from;\n                if (from && !already[from]) {\n                    already[from] = true;\n                    var relative = _this2.relative(from);\n                    _this2.map.setSourceContent(relative, node.source.input.css);\n                }\n            }\n        });\n    };\n\n    _class.prototype.applyPrevMaps = function applyPrevMaps() {\n        for (var _iterator = this.previous(), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n            var _ref;\n\n            if (_isArray) {\n                if (_i >= _iterator.length) break;\n                _ref = _iterator[_i++];\n            } else {\n                _i = _iterator.next();\n                if (_i.done) break;\n                _ref = _i.value;\n            }\n\n            var prev = _ref;\n\n            var from = this.relative(prev.file);\n            var root = prev.root || _path2.default.dirname(prev.file);\n            var map = undefined;\n\n            if (this.mapOpts.sourcesContent === false) {\n                map = new _sourceMap2.default.SourceMapConsumer(prev.text);\n                if (map.sourcesContent) {\n                    map.sourcesContent = map.sourcesContent.map(function () {\n                        return null;\n                    });\n                }\n            } else {\n                map = prev.consumer();\n            }\n\n            this.map.applySourceMap(map, from, this.relative(root));\n        }\n    };\n\n    _class.prototype.isAnnotation = function isAnnotation() {\n        if (this.isInline()) {\n            return true;\n        } else if (typeof this.mapOpts.annotation !== 'undefined') {\n            return this.mapOpts.annotation;\n        } else if (this.previous().length) {\n            return this.previous().some(function (i) {\n                return i.annotation;\n            });\n        } else {\n            return true;\n        }\n    };\n\n    _class.prototype.addAnnotation = function addAnnotation() {\n        var content = undefined;\n\n        if (this.isInline()) {\n            content = 'data:application/json;base64,' + _jsBase.Base64.encode(this.map.toString());\n        } else if (typeof this.mapOpts.annotation === 'string') {\n            content = this.mapOpts.annotation;\n        } else {\n            content = this.outputFile() + '.map';\n        }\n\n        var eol = '\\n';\n        if (this.css.indexOf('\\r\\n') !== -1) eol = '\\r\\n';\n\n        this.css += eol + '/*# sourceMappingURL=' + content + ' */';\n    };\n\n    _class.prototype.outputFile = function outputFile() {\n        if (this.opts.to) {\n            return this.relative(this.opts.to);\n        } else if (this.opts.from) {\n            return this.relative(this.opts.from);\n        } else {\n            return 'to.css';\n        }\n    };\n\n    _class.prototype.generateMap = function generateMap() {\n        this.generateString();\n        if (this.isSourcesContent()) this.setSourcesContent();\n        if (this.previous().length > 0) this.applyPrevMaps();\n        if (this.isAnnotation()) this.addAnnotation();\n\n        if (this.isInline()) {\n            return [this.css];\n        } else {\n            return [this.css, this.map];\n        }\n    };\n\n    _class.prototype.relative = function relative(file) {\n        var from = this.opts.to ? _path2.default.dirname(this.opts.to) : '.';\n\n        if (typeof this.mapOpts.annotation === 'string') {\n            from = _path2.default.dirname(_path2.default.resolve(from, this.mapOpts.annotation));\n        }\n\n        file = _path2.default.relative(from, file);\n        /* istanbul ignore next */\n        if (_path2.default.sep === '\\\\') {\n            return file.replace(/\\\\/g, '/');\n        } else {\n            return file;\n        }\n    };\n\n    _class.prototype.sourcePath = function sourcePath(node) {\n        return this.relative(node.source.input.from);\n    };\n\n    _class.prototype.generateString = function generateString() {\n        var _this3 = this;\n\n        this.css = '';\n        this.map = new _sourceMap2.default.SourceMapGenerator({ file: this.outputFile() });\n\n        var line = 1;\n        var column = 1;\n\n        var lines = undefined,\n            last = undefined;\n        this.stringify(this.root, function (str, node, type) {\n            _this3.css += str;\n\n            if (node && node.source && node.source.start && type !== 'end') {\n                _this3.map.addMapping({\n                    source: _this3.sourcePath(node),\n                    original: {\n                        line: node.source.start.line,\n                        column: node.source.start.column - 1\n                    },\n                    generated: { line: line, column: column - 1 }\n                });\n            }\n\n            lines = str.match(/\\n/g);\n            if (lines) {\n                line += lines.length;\n                last = str.lastIndexOf('\\n');\n                column = str.length - last;\n            } else {\n                column += str.length;\n            }\n\n            if (node && node.source && node.source.end && type !== 'start') {\n                _this3.map.addMapping({\n                    source: _this3.sourcePath(node),\n                    original: {\n                        line: node.source.end.line,\n                        column: node.source.end.column\n                    },\n                    generated: { line: line, column: column - 1 }\n                });\n            }\n        });\n    };\n\n    _class.prototype.generate = function generate() {\n        this.clearAnnotation();\n\n        if (this.isMap()) {\n            return this.generateMap();\n        } else {\n            var result = '';\n            this.stringify(this.root, function (i) {\n                result += i;\n            });\n            return [result];\n        }\n    };\n\n    return _class;\n}();\n\nexports.default = _class;\nmodule.exports = exports['default'];"]}