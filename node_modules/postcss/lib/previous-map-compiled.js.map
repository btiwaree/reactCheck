{"version":3,"sources":["previous-map.js"],"names":[],"mappings":"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","file":"previous-map-compiled.js","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _jsBase = require('js-base64');\n\nvar _sourceMap = require('source-map');\n\nvar _sourceMap2 = _interopRequireDefault(_sourceMap);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PreviousMap = function () {\n    function PreviousMap(css, opts) {\n        _classCallCheck(this, PreviousMap);\n\n        this.loadAnnotation(css);\n        this.inline = this.startWith(this.annotation, 'data:');\n\n        var prev = opts.map ? opts.map.prev : undefined;\n        var text = this.loadMap(opts.from, prev);\n        if (text) this.text = text;\n    }\n\n    PreviousMap.prototype.consumer = function consumer() {\n        if (!this.consumerCache) {\n            this.consumerCache = new _sourceMap2.default.SourceMapConsumer(this.text);\n        }\n        return this.consumerCache;\n    };\n\n    PreviousMap.prototype.withContent = function withContent() {\n        return !!(this.consumer().sourcesContent && this.consumer().sourcesContent.length > 0);\n    };\n\n    PreviousMap.prototype.startWith = function startWith(string, start) {\n        if (!string) return false;\n        return string.substr(0, start.length) === start;\n    };\n\n    PreviousMap.prototype.loadAnnotation = function loadAnnotation(css) {\n        var match = css.match(/\\/\\*\\s*# sourceMappingURL=(.*)\\s*\\*\\//);\n        if (match) this.annotation = match[1].trim();\n    };\n\n    PreviousMap.prototype.decodeInline = function decodeInline(text) {\n        var utf64 = 'data:application/json;charset=utf-8;base64,';\n        var b64 = 'data:application/json;base64,';\n        var uri = 'data:application/json,';\n\n        if (this.startWith(text, uri)) {\n            return decodeURIComponent(text.substr(uri.length));\n        } else if (this.startWith(text, b64)) {\n            return _jsBase.Base64.decode(text.substr(b64.length));\n        } else if (this.startWith(text, utf64)) {\n            return _jsBase.Base64.decode(text.substr(utf64.length));\n        } else {\n            var encoding = text.match(/data:application\\/json;([^,]+),/)[1];\n            throw new Error('Unsupported source map encoding ' + encoding);\n        }\n    };\n\n    PreviousMap.prototype.loadMap = function loadMap(file, prev) {\n        if (prev === false) return false;\n\n        if (prev) {\n            if (typeof prev === 'string') {\n                return prev;\n            } else if (prev instanceof _sourceMap2.default.SourceMapConsumer) {\n                return _sourceMap2.default.SourceMapGenerator.fromSourceMap(prev).toString();\n            } else if (prev instanceof _sourceMap2.default.SourceMapGenerator) {\n                return prev.toString();\n            } else if (this.isMap(prev)) {\n                return JSON.stringify(prev);\n            } else {\n                throw new Error('Unsupported previous source map format: ' + prev.toString());\n            }\n        } else if (this.inline) {\n            return this.decodeInline(this.annotation);\n        } else if (this.annotation) {\n            var map = this.annotation;\n            if (file) map = _path2.default.join(_path2.default.dirname(file), map);\n\n            this.root = _path2.default.dirname(map);\n            if (_fs2.default.existsSync && _fs2.default.existsSync(map)) {\n                return _fs2.default.readFileSync(map, 'utf-8').toString().trim();\n            } else {\n                return false;\n            }\n        }\n    };\n\n    PreviousMap.prototype.isMap = function isMap(map) {\n        if ((typeof map === 'undefined' ? 'undefined' : _typeof(map)) !== 'object') return false;\n        return typeof map.mappings === 'string' || typeof map._mappings === 'string';\n    };\n\n    return PreviousMap;\n}();\n\nexports.default = PreviousMap;\nmodule.exports = exports['default'];"]}