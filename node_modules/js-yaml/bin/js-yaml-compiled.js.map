{"version":3,"sources":["js-yaml.js"],"names":[],"mappings":"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","file":"js-yaml-compiled.js","sourcesContent":["#!/usr/bin/env node\n\n\n'use strict';\n\n/*eslint-disable no-console*/\n\n\n// stdlib\nvar fs    = require('fs');\n\n\n// 3rd-party\nvar argparse = require('argparse');\n\n\n// internal\nvar yaml = require('..');\n\n\n////////////////////////////////////////////////////////////////////////////////\n\n\nvar cli = new argparse.ArgumentParser({\n  prog:     'js-yaml',\n  version:  require('../package.json').version,\n  addHelp:  true\n});\n\n\ncli.addArgument([ '-c', '--compact' ], {\n  help:   'Display errors in compact mode',\n  action: 'storeTrue'\n});\n\n\n// deprecated (not needed after we removed output colors)\n// option suppressed, but not completely removed for compatibility\ncli.addArgument([ '-j', '--to-json' ], {\n  help:   argparse.Const.SUPPRESS,\n  dest:   'json',\n  action: 'storeTrue'\n});\n\n\ncli.addArgument([ '-t', '--trace' ], {\n  help:   'Show stack trace on error',\n  action: 'storeTrue'\n});\n\ncli.addArgument([ 'file' ], {\n  help:   'File to read, utf-8 encoded without BOM',\n  nargs:  '?',\n  defaultValue: '-'\n});\n\n\n////////////////////////////////////////////////////////////////////////////////\n\n\nvar options = cli.parseArgs();\n\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction readFile(filename, encoding, callback) {\n  if (options.file === '-') {\n    // read from stdin\n\n    var chunks = [];\n\n    process.stdin.on('data', function (chunk) {\n      chunks.push(chunk);\n    });\n\n    process.stdin.on('end', function () {\n      return callback(null, Buffer.concat(chunks).toString(encoding));\n    });\n  } else {\n    fs.readFile(filename, encoding, callback);\n  }\n}\n\nreadFile(options.file, 'utf8', function (error, input) {\n  var output, isYaml;\n\n  if (error) {\n    if (error.code === 'ENOENT') {\n      console.error('File not found: ' + options.file);\n      process.exit(2);\n    }\n\n    console.error(\n      options.trace && error.stack ||\n      error.message ||\n      String(error));\n\n    process.exit(1);\n  }\n\n  try {\n    output = JSON.parse(input);\n    isYaml = false;\n  } catch (err) {\n    if (err instanceof SyntaxError) {\n      try {\n        output = [];\n        yaml.loadAll(input, function (doc) { output.push(doc); }, {});\n        isYaml = true;\n\n        if (output.length === 0) output = null;\n        else if (output.length === 1) output = output[0];\n\n      } catch (e) {\n        if (options.trace && err.stack) console.error(e.stack);\n        else console.error(e.toString(options.compact));\n\n        process.exit(1);\n      }\n    } else {\n      console.error(\n        options.trace && err.stack ||\n        err.message ||\n        String(err));\n\n      process.exit(1);\n    }\n  }\n\n  if (isYaml) console.log(JSON.stringify(output, null, '  '));\n  else console.log(yaml.dump(output));\n\n  process.exit(0);\n});\n"]}