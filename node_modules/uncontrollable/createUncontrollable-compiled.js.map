{"version":3,"sources":["createUncontrollable.js"],"names":[],"mappings":"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","file":"createUncontrollable-compiled.js","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = createUncontrollable;\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _utils = require('./utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction createUncontrollable(mixins, set) {\n\n  return uncontrollable;\n\n  function uncontrollable(Component, controlledValues) {\n    var methods = arguments.length <= 2 || arguments[2] === undefined ? [] : arguments[2];\n\n    var displayName = Component.displayName || Component.name || 'Component',\n        basePropTypes = utils.getType(Component).propTypes,\n        propTypes;\n\n    propTypes = utils.uncontrolledPropTypes(controlledValues, basePropTypes, displayName);\n\n    methods = utils.transform(methods, function (obj, method) {\n      obj[method] = function () {\n        var _refs$inner;\n\n        return (_refs$inner = this.refs.inner)[method].apply(_refs$inner, arguments);\n      };\n    }, {});\n\n    var component = _react2['default'].createClass(_extends({\n\n      displayName: 'Uncontrolled(' + displayName + ')',\n\n      mixins: mixins,\n\n      propTypes: propTypes\n\n    }, methods, {\n\n      componentWillMount: function componentWillMount() {\n        var props = this.props,\n            keys = Object.keys(controlledValues);\n\n        this._values = utils.transform(keys, function (values, key) {\n          values[key] = props[utils.defaultKey(key)];\n        }, {});\n      },\n\n      /**\r\n       * If a prop switches from controlled to Uncontrolled\r\n       * reset its value to the defaultValue\r\n       */\n      componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n        var _this = this;\n\n        var props = this.props,\n            keys = Object.keys(controlledValues);\n\n        keys.forEach(function (key) {\n          if (utils.getValue(nextProps, key) === undefined && utils.getValue(props, key) !== undefined) {\n            _this._values[key] = nextProps[utils.defaultKey(key)];\n          }\n        });\n      },\n\n      render: function render() {\n        var _this2 = this;\n\n        var newProps = {};\n        var _props = this.props;\n        var valueLink = _props.valueLink;\n        var checkedLink = _props.checkedLink;\n\n        var props = _objectWithoutProperties(_props, ['valueLink', 'checkedLink']);\n\n        utils.each(controlledValues, function (handle, propName) {\n          var linkPropName = utils.getLinkName(propName),\n              prop = _this2.props[propName];\n\n          if (linkPropName && !isProp(_this2.props, propName) && isProp(_this2.props, linkPropName)) {\n            prop = _this2.props[linkPropName].value;\n          }\n\n          newProps[propName] = prop !== undefined ? prop : _this2._values[propName];\n\n          newProps[handle] = setAndNotify.bind(_this2, propName);\n        });\n\n        newProps = _extends({}, props, newProps, { ref: 'inner' });\n\n        return _react2['default'].createElement(Component, newProps);\n      }\n\n    }));\n\n    component.ControlledComponent = Component;\n\n    /**\r\n     * useful when wrapping a Component and you want to control\r\n     * everything\r\n     */\n    component.deferControlTo = function (newComponent, additions, nextMethods) {\n      if (additions === undefined) additions = {};\n\n      return uncontrollable(newComponent, _extends({}, controlledValues, additions), nextMethods);\n    };\n\n    return component;\n\n    function setAndNotify(propName, value) {\n      var linkName = utils.getLinkName(propName),\n          handler = this.props[controlledValues[propName]];\n\n      if (linkName && isProp(this.props, linkName) && !handler) {\n        handler = this.props[linkName].requestChange;\n      }\n\n      for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        args[_key - 2] = arguments[_key];\n      }\n\n      set(this, propName, handler, value, args);\n    }\n\n    function isProp(props, prop) {\n      return props[prop] !== undefined;\n    }\n  }\n}\n\nmodule.exports = exports['default'];"]}